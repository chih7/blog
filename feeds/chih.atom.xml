<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>chih's blog - chih</title><link href="https://blog.chih.me/" rel="alternate"></link><link href="https://blog.chih.me/feeds/chih.atom.xml" rel="self"></link><id>https://blog.chih.me/</id><updated>2018-03-01T00:00:00+08:00</updated><entry><title>æ™ºèƒ½è¿ç»´ï¼šä»åŸºäºè§„åˆ™åˆ°åŸºäºå­¦ä¹ </title><link href="https://blog.chih.me/aiops.html" rel="alternate"></link><published>2018-03-01T00:00:00+08:00</published><updated>2018-03-01T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2018-03-01:/aiops.html</id><summary type="html">&lt;p&gt;éšç€ä¼ä¸šå‘å±•ï¼Œå…¶åº”ç”¨æ¶æ„ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œä»å•ä¸€çš„åº”ç”¨ï¼Œåˆ°å¤šä¸ªåº”ç”¨å…±åŒç»„åˆå½¢æˆæœåŠ¡ï¼Œåˆ°äº‘è®¡ç®—ã€å¾®æœåŠ¡æ¶æ„ï¼Œå†åˆ°ç›®å‰æµè¡Œçš„å®¹å™¨åŒ–ã€‚é™¤äº†åŸºç¡€çš„æœåŠ¡åº”ç”¨å¤–ï¼Œä¹Ÿå‡ºç°äº†ä¸“é—¨ç”¨äºé‡‡é›†ã€å­˜å‚¨ä¸åˆ†æç”¨æˆ·ä¿¡æ¯çš„å¤§æ•°æ®å¤„ç†åº”ç”¨ã€‚äº‘æ•°æ®ä¸­å¿ƒè§„æ¨¡å¿«é€Ÿå¢é•¿ï¼Œè¿ç»´ç¯å¢ƒçš„å¼‚æ„å’Œå¤æ‚åŒ–ï¼Œå¯¼è‡´æ—¥å¸¸è¿ç»´å·¥ä½œéœ€è¦ä»˜å‡ºçš„äººåŠ›ã€æ—¶é—´æˆæœ¬è¶Šæ¥è¶Šé«˜ã€‚è¿ç»´çš„å‘å±•å·²ç»ç»å†äº†è„šæœ¬æ—¶ä»£â€”â€”å·¥å…·æ—¶ä»£â€”â€”è‡ªåŠ¨åŒ–æ—¶ä»£(DevOps)ï¼Œæ¯ä¸€æ¬¡çš„å˜è¿éƒ½ä»£è¡¨äº†è¿ç»´éœ€æ±‚çš„å˜åŒ–ï¼Œè¿ç»´æŠ€æœ¯çš„å˜é©å’Œè¿ç»´äººå‘˜æ•ˆç‡çš„æé«˜ï¼Œéšç€å¤§æ•°æ®ã€æœºå™¨å­¦ä¹ å’ŒAIæŠ€æœ¯çš„é£é€Ÿå‘å±•ï¼Œè¿ç»´éœ€æ±‚ä¹Ÿé€æ¸å‘æ™ºèƒ½åŒ–è¿‡æ¸¡ã€‚æ™ºèƒ½è¿ç»´(AIOps)æ˜¯è‡ªåŠ¨åŒ–è¿ç»´çš„æ‹“å±•ï¼Œå…¶ç›®çš„æ˜¯è¿›ä¸€æ­¥å»é™¤è‡ªåŠ¨åŒ–è¿ç»´ä¸­äººä¸ºå¹²æ‰°ï¼Œæœ€ç»ˆå®ç°è¿ç»´å·¥ä½œçš„æ— äººåŒ–ï¼Œå®Œå…¨è‡ªåŠ¨åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;æ™ºèƒ½è¿ç»´çš„å†…å®¹ä¸»è¦æœ‰æ•°æ®é‡‡é›†å­˜å‚¨ã€å¼‚å¸¸è‡ªåŠ¨æ£€æµ‹ã€å¼‚å¸¸è‡ªåŠ¨å¤„ç†å’Œæ•°æ®çš„å¯è§†åŒ–ã€‚&lt;/p&gt;
&lt;h2&gt;æ•°æ®é‡‡é›†å­˜å‚¨&lt;/h2&gt;
&lt;p&gt;è¿ç»´ç³»ç»Ÿéœ€è¦æ”¯æŒä»æœºæˆ¿è®¾æ–½ã€ç‰©ç†åŸºç¡€è®¾æ–½ã€æ•°æ®ä¸­å¿ƒç½‘ç»œã€è™šæ‹ŸåŒ–èµ„æºæ± ã€äº‘æœåŠ¡å’Œåº”ç”¨åˆ°ç”¨æˆ·ç«¯æ—¥å¿—çš„ç»Ÿä¸€ç®¡ç†ï¼Œå®ç°å¤šå¯¹è±¡å’Œå¤šç»´åº¦çš„é›†ä¸­ç›‘æ§ã€‚å¯¹äºåŸºç¡€æ¶æ„ï¼Œéœ€è¦é‡‡é›†çš„å¯èƒ½æ˜¯æ€§èƒ½æ•°æ®ï¼Œé™¤äº†åŸºç¡€çš„CPUåˆ©ç”¨ç‡ã€è´Ÿè½½ã€%iowaitï¼Œå†…å­˜çš„åˆ©ç”¨ç‡ã€é¡µæ‰«æã€äº¤æ¢ï¼Œç£ç›˜çš„åˆ©ç”¨ç‡ã€å“åº”æ—¶é—´å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¤„ç†å™¨å†…åŒ…å«çš„ç¡¬ä»¶è®¡æ•°å™¨é‡‡é›†æ›´è¯¦ç»†çš„æ€§èƒ½æŒ‡æ ‡ â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;éšç€ä¼ä¸šå‘å±•ï¼Œå…¶åº”ç”¨æ¶æ„ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œä»å•ä¸€çš„åº”ç”¨ï¼Œåˆ°å¤šä¸ªåº”ç”¨å…±åŒç»„åˆå½¢æˆæœåŠ¡ï¼Œåˆ°äº‘è®¡ç®—ã€å¾®æœåŠ¡æ¶æ„ï¼Œå†åˆ°ç›®å‰æµè¡Œçš„å®¹å™¨åŒ–ã€‚é™¤äº†åŸºç¡€çš„æœåŠ¡åº”ç”¨å¤–ï¼Œä¹Ÿå‡ºç°äº†ä¸“é—¨ç”¨äºé‡‡é›†ã€å­˜å‚¨ä¸åˆ†æç”¨æˆ·ä¿¡æ¯çš„å¤§æ•°æ®å¤„ç†åº”ç”¨ã€‚äº‘æ•°æ®ä¸­å¿ƒè§„æ¨¡å¿«é€Ÿå¢é•¿ï¼Œè¿ç»´ç¯å¢ƒçš„å¼‚æ„å’Œå¤æ‚åŒ–ï¼Œå¯¼è‡´æ—¥å¸¸è¿ç»´å·¥ä½œéœ€è¦ä»˜å‡ºçš„äººåŠ›ã€æ—¶é—´æˆæœ¬è¶Šæ¥è¶Šé«˜ã€‚è¿ç»´çš„å‘å±•å·²ç»ç»å†äº†è„šæœ¬æ—¶ä»£â€”â€”å·¥å…·æ—¶ä»£â€”â€”è‡ªåŠ¨åŒ–æ—¶ä»£(DevOps)ï¼Œæ¯ä¸€æ¬¡çš„å˜è¿éƒ½ä»£è¡¨äº†è¿ç»´éœ€æ±‚çš„å˜åŒ–ï¼Œè¿ç»´æŠ€æœ¯çš„å˜é©å’Œè¿ç»´äººå‘˜æ•ˆç‡çš„æé«˜ï¼Œéšç€å¤§æ•°æ®ã€æœºå™¨å­¦ä¹ å’ŒAIæŠ€æœ¯çš„é£é€Ÿå‘å±•ï¼Œè¿ç»´éœ€æ±‚ä¹Ÿé€æ¸å‘æ™ºèƒ½åŒ–è¿‡æ¸¡ã€‚æ™ºèƒ½è¿ç»´(AIOps)æ˜¯è‡ªåŠ¨åŒ–è¿ç»´çš„æ‹“å±•ï¼Œå…¶ç›®çš„æ˜¯è¿›ä¸€æ­¥å»é™¤è‡ªåŠ¨åŒ–è¿ç»´ä¸­äººä¸ºå¹²æ‰°ï¼Œæœ€ç»ˆå®ç°è¿ç»´å·¥ä½œçš„æ— äººåŒ–ï¼Œå®Œå…¨è‡ªåŠ¨åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;æ™ºèƒ½è¿ç»´çš„å†…å®¹ä¸»è¦æœ‰æ•°æ®é‡‡é›†å­˜å‚¨ã€å¼‚å¸¸è‡ªåŠ¨æ£€æµ‹ã€å¼‚å¸¸è‡ªåŠ¨å¤„ç†å’Œæ•°æ®çš„å¯è§†åŒ–ã€‚&lt;/p&gt;
&lt;h2&gt;æ•°æ®é‡‡é›†å­˜å‚¨&lt;/h2&gt;
&lt;p&gt;è¿ç»´ç³»ç»Ÿéœ€è¦æ”¯æŒä»æœºæˆ¿è®¾æ–½ã€ç‰©ç†åŸºç¡€è®¾æ–½ã€æ•°æ®ä¸­å¿ƒç½‘ç»œã€è™šæ‹ŸåŒ–èµ„æºæ± ã€äº‘æœåŠ¡å’Œåº”ç”¨åˆ°ç”¨æˆ·ç«¯æ—¥å¿—çš„ç»Ÿä¸€ç®¡ç†ï¼Œå®ç°å¤šå¯¹è±¡å’Œå¤šç»´åº¦çš„é›†ä¸­ç›‘æ§ã€‚å¯¹äºåŸºç¡€æ¶æ„ï¼Œéœ€è¦é‡‡é›†çš„å¯èƒ½æ˜¯æ€§èƒ½æ•°æ®ï¼Œé™¤äº†åŸºç¡€çš„CPUåˆ©ç”¨ç‡ã€è´Ÿè½½ã€%iowaitï¼Œå†…å­˜çš„åˆ©ç”¨ç‡ã€é¡µæ‰«æã€äº¤æ¢ï¼Œç£ç›˜çš„åˆ©ç”¨ç‡ã€å“åº”æ—¶é—´å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¤„ç†å™¨å†…åŒ…å«çš„ç¡¬ä»¶è®¡æ•°å™¨é‡‡é›†æ›´è¯¦ç»†çš„æ€§èƒ½æŒ‡æ ‡ï¼ŒåŒ…æ‹¬CPUå‘¨æœŸã€CPUæŒ‡ä»¤ã€ä¸€çº§/äºŒçº§/ä¸‰çº§ç¼“å­˜è®¿é—®ï¼Œæµ®ç‚¹å•å…ƒã€å†…å­˜I/Oã€èµ„æºI/Oã€‚ç”±äºå­˜åœ¨æ•°æ®ä¸­å¿ƒç»¿è‰²èŠ‚èƒ½çš„éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥é‡‡é›†æœºå™¨æˆ–åº”ç”¨çš„åŠŸè€—ä¿¡æ¯ã€‚å¯¹äºåº”ç”¨å±‚æ—¥å¿—ï¼Œå¯ä»¥ä½¿ç”¨ELKæŠ½å–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¸­é—´ä»¶é‡‡é›†æ—¥å¿—ã€‚é™¤äº†åŸå§‹æŒ‡æ ‡å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡èšåˆè½¬æ¢å½¢æˆæ–°çš„æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;h2&gt;å¼‚å¸¸è‡ªåŠ¨æ£€æµ‹&lt;/h2&gt;
&lt;p&gt;æƒ³å°½å¿«åœ¨æ™ºèƒ½è¿ç»´é¢†åŸŸæœ‰æ‰€çªç ´ï¼Œæ›´å®é™…ä¸€ç‚¹çš„åŠæ³•å°±æ˜¯å®ç°å¼‚å¸¸è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿã€‚åœ¨ç›‘æ§é¢†åŸŸï¼Œç”±æ•°æ®é‡‡é›†å™¨é‡‡é›†çš„æ•°æ®æºæºä¸æ–­çš„äº§ç”Ÿï¼Œå½¢æˆäº†æ—¶é—´ç›¸å¯¹åº”çš„æ—¶åºæ•°æ®ã€‚ä¼ ç»Ÿçš„æ—¶åºæ•°æ®å¼‚å¸¸æ£€æµ‹æ–¹æ³•æœ‰é˜ˆå€¼æ³•ï¼ŒåŒ…æ‹¬å›ºå®šé˜ˆå€¼å’ŒåŠ¨æ€é˜ˆå€¼ï¼Œå¯¹äºå›ºå®šé˜ˆå€¼ï¼Œå¦‚æœå½“å‰å€¼å¤§äºæˆ–å°äºé˜ˆå€¼ï¼Œå°±è¯´æ˜ä¸ºå¼‚å¸¸ï¼Œè€Œå¯¹äºåŠ¨æ€é˜ˆå€¼ï¼Œå¦‚æœå½“å‰å€¼å‰ä¸€ä¸ªçª—å£æ•°æ®çš„å¹³å‡å€¼ğœ‡ã€æ–¹å·®ğœï¼Œå¦‚æœå½“å‰å€¼åœ¨ğœ‡Â±2ğœæˆ–ğœ‡Â±3ğœèŒƒå›´å¤–ï¼Œå°±è¯´æ˜ä¸ºå¼‚å¸¸ã€‚ä½†ä¼ ç»Ÿæ–¹æ³•å¹¶ä¸é€‚ç”¨äºç›‘æ§æ•°æ®çš„å¼‚å¸¸æ£€æµ‹ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼Œç¬¬ä¸€æ˜¯å¿½è§†äº†å‘¨æœŸæ€§ï¼Œç¬¬äºŒæ˜¯å¿½è§†äº†è¶‹åŠ¿ã€‚åœ¨ç»æµå­¦é¢†åŸŸï¼Œéœ€è¦é¢„æµ‹ç»æµæ•°æ®ï¼Œä¸ºäº†è§£å†³å‰é¢ä¸¤ä¸ªé—®é¢˜ï¼Œæå‡ºäº†ä¸€äº›æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®å‰é¢çš„æ—¶åºæ•°æ®é¢„æµ‹ä¹‹åæ•°æ®å¯èƒ½çš„å€¼ï¼Œç”¨åœ¨å¼‚å¸¸æ£€æµ‹ä¸Šï¼Œæˆ‘ä»¬åªéœ€è¦çœ‹å®é™…å€¼å’Œé¢„æµ‹å€¼åå·®æ˜¯å¦è¶³å¤Ÿå¤§å°±å¯ä»¥åˆ¤æ–­è¯¥å€¼æ˜¯å¦ä¸ºå¼‚å¸¸ã€‚å¸¸è§çš„ç®—æ³•æœ‰ARIMAã€EWMAã€Holt-Wintersã€æ—¶åºæ•°æ®åˆ†è§£ï¼Œä¸»è¦æŒ‘æˆ˜åŒ…æ‹¬çªå‘äº‹ä»¶çš„å½±å“ã€èŠ‚å‡æ—¥çš„å½±å“ã€æ•°æ®ä¸è§„åˆ™çš„å½±å“ï¼Œæœ€é‡è¦çš„å°±æ˜¯å¯¹å¼‚å¸¸çš„å®šä¹‰ä¸ä¸€æ ·ï¼Œä¼šæœ‰ä¸»è§‚çš„å› ç´ ï¼Œæœ€åå¯¼è‡´è¿™äº›ç®—æ³•å¾ˆéš¾è°ƒèŠ‚ã€‚å¼‚å¸¸æ£€æµ‹çš„å¦å¤–ä¸€ä¸ªæ€è·¯åŸºäºæ·±åº¦å­¦ä¹ æ¥åšï¼Œå¾ªç¯ç¥ç»ç½‘ç»œï¼ˆç®€ç§°RNNï¼‰æ˜¯ä¸€ä¸ªå’Œæ—¶é—´åºåˆ—æœ‰å…³ç³»çš„ç¥ç»ç½‘ç»œï¼Œä¸è¿‡éšç€æ—¶é—´é—´éš”çš„å¢å¤§ï¼ŒRNNå¯¹äºåé¢æ—¶é—´çš„èŠ‚ç‚¹ç›¸æ¯”å‰é¢æ—¶é—´èŠ‚ç‚¹çš„æ„ŸçŸ¥åŠ›å°†ä¸‹é™ã€‚è§£å†³è¿™ä¸ªé—®é¢˜éœ€è¦ç”¨åˆ°LongShort Term ç½‘ç»œï¼ˆLSTMï¼‰ï¼Œå®ƒé€šè¿‡åˆ»æ„çš„è®¾è®¡æ¥é¿å…é•¿æœŸä¾èµ–é—®é¢˜ã€‚LSTMåœ¨å®è·µä¸­é»˜è®¤å¯ä»¥è®°ä½é•¿æœŸçš„ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦ä»˜å‡ºå¾ˆå¤§ä»£ä»·ã€‚æ›´æ–°çš„ç ”ç©¶å‘ç°ï¼Œä¸€ç§æ–°å‹çš„ç¥ç»ç½‘ç»œHTMåœ¨æ—¶åºæ•°æ®çš„å¼‚å¸¸æ£€æµ‹ä¸Šå¯ä»¥å–å¾—æ¯”LSTMæ›´å¥½çš„ç»“æœã€‚&lt;/p&gt;
&lt;h2&gt;å¼‚å¸¸è‡ªåŠ¨å¤„ç†&lt;/h2&gt;
&lt;p&gt;äº‘æ—¶ä»£ç”±äºåˆ†å¸ƒå¼å’Œå¾®æœåŠ¡åŒ–è½¯ä»¶æ¶æ„çš„æµè¡Œï¼Œä¸šåŠ¡è°ƒç”¨å…³ç³»æ„ˆå‘å¤æ‚ï¼Œå‡ºç°æ•…éšœåï¼Œå¯¹æ•…éšœçš„å¿«é€Ÿå®šä½å½¢æˆäº†å¾ˆå¤§çš„æŒ‘æˆ˜ã€‚åˆ©ç”¨å¤§æ•°æ®æŠ€æœ¯ï¼Œç»“åˆæ•…éšœç‰¹å¾åº“è¿›è¡Œè·¨æ•°æ®é¢†åŸŸå…³è”åˆ†æï¼Œæå‰å‘ç°éšæ‚£ã€é¢„æµ‹æ•…éšœã€‚ä¸è‡ªåŠ¨åŒ–ç­–ç•¥æ‰§è¡Œç³»ç»Ÿé›†æˆè”åŠ¨ï¼Œåœ¨ç”¨æˆ·å‘è§‰é—®é¢˜å‰å°†é—®é¢˜è§£å†³ï¼Œé¿å…å¯¹ä¸šåŠ¡é€ æˆå½±å“ã€‚ç›®å‰ï¼Œä¸»è¦æœ‰ä¸¤ç±»æœºå™¨å­¦ä¹ å¯ä»¥å¸®åŠ©è§£å†³è¯¥ç±»é—®é¢˜ã€‚&lt;/p&gt;
&lt;h4&gt;å…³è”è§„åˆ™ç®—æ³•&lt;/h4&gt;
&lt;p&gt;åœ¨å®é™…çš„ç³»ç»Ÿä¸­ï¼Œå­˜åœ¨å„ç§å„æ ·çš„å…³è”ï¼Œæ¯”å¦‚ï¼Œ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åº”ç”¨ä¹‹é—´çš„è°ƒç”¨é“¾å…³ç³»&lt;/li&gt;
&lt;li&gt;æ•°æ®åº“ä¸åº”ç”¨æœåŠ¡å™¨&lt;/li&gt;
&lt;li&gt;ç½‘ç»œè®¾å¤‡ä¸ç½‘ç»œè®¾å¤‡ã€ç½‘ç»œè®¾å¤‡ä¸åº”ç”¨æœåŠ¡å™¨&lt;/li&gt;
&lt;li&gt;å®¿ä¸»æœºä¸è™šæ‹Ÿæœºå…³ç³»ç­‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è‹¥åœ¨åŒä¸€ä¸ªæ—¶é—´çª—å†…ï¼Œæœ‰å¤šä¸ªå¼ºå…³è”çš„è®¾å¤‡æˆ–åº”ç”¨æœåŠ¡å™¨åŒæ—¶å‘Šè­¦ï¼Œåˆ™å¤§æ¦‚ç‡è®¤ä¸ºå‘Šè­¦ä¹‹é—´å­˜åœ¨å…³è”å…³ç³»ã€‚å…³è”è§„åˆ™ç®—æ³•ä¸»è¦æœ‰Aprioriç®—æ³•å’ŒFPGrowthç®—æ³•ä¸¤ç§ç®—æ³•ã€‚è¿™ä¸¤ç§ç®—æ³•çš„åŠŸèƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œä½ å¯ä»¥æ‰¾åˆ°é¢‘ç¹çš„é¡¹é›†ã€‚ä¸€èˆ¬PGrowthæ¯”Aprioriæ›´æœ‰æ•ˆä¸€äº›ã€‚æˆ‘ä»¬å°†æ—¶é—´çª—å£æŒ‰ä¸€å®šçš„æ—¶é—´é—´éš”è¿›è¡Œåˆ’åˆ†ï¼Œè®¡ç®—æ¯ä¸ªæ—¶é—´çª—å†…å„ç§æŠ¥è­¦å‘ç”Ÿçš„é¢‘ç‡ï¼Œå¹¶æ‰¾å‡ºå„ç§æŠ¥è­¦ä¹‹é—´çš„ç›¸å…³æ€§ã€‚æœ€åæ ¹æ®åˆ†ææŠ¥è­¦æ ¹æºçš„å…³ç³»ã€‚åœ¨å…³è”è§„åˆ™ç®—æ³•ä¸­ï¼Œæœ‰ä¸€æ¡é‡è¦çš„è§„åˆ™ï¼Œå³é“¾è·¯ä¸Šçš„è¿ç»­æŠ¥è­¦ä¹‹é—´å¯èƒ½å­˜åœ¨ç›¸å…³æ€§ï¼Œè¶Šé åçš„åº”ç”¨è¶Šå¯èƒ½æ˜¯æ ¹æºã€‚å…³è”è§„åˆ™ç®—æ³•çš„ä¼˜ç‚¹æ˜¯æ˜“äºç†è§£å’Œå®ç°ã€‚ç¼ºç‚¹æ˜¯æ•ˆç‡ä½ï¼Œçµæ´»æ€§ä¸å¤Ÿé«˜ã€‚&lt;/p&gt;
&lt;h4&gt;æ·±åº¦å­¦ä¹ æ–¹æ³•&lt;/h4&gt;
&lt;p&gt;å¼ºå…³è”æ•°æ®åˆ†ææ˜¯å¯¹å·²çŸ¥å‘Šè­¦çš„å…³è”å…³ç³»ï¼Œç›´æ¥è¿›è¡Œæ ¹æºå‘Šè­¦åˆ†æã€‚ä½†æ˜¯æœ‰äº›æ—¶å€™ï¼Œå…³è”å…³ç³»æ˜¯æœªçŸ¥çš„ã€‚è¿™æ—¶å°±éœ€è¦é€šè¿‡æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œæ‰¾åˆ°å‘Šè­¦ä¹‹é—´çš„éšå«è”ç³»ï¼Œå†è¿›è¡Œæ ¹æºå‘Šè­¦é¢„æµ‹ã€‚å¯¹äºæŸç±»æ•…éšœå¼•èµ·çš„å¤§é‡å‘Šè­¦ä¹‹é—´ï¼Œå­˜åœ¨ç€æ—¶é—´ç›¸å…³æ€§ã€‚å°†å†å²æ´¾ç”Ÿå‘Šè­¦ä½œä¸ºè¾“å…¥ï¼Œå°†æ ¹æºå‘Šè­¦ç±»å‹ä½œä¸ºè¾“å‡ºã€‚é€šè¿‡LSTMæå–æ´¾ç”Ÿå‘Šè­¦ç‰¹å¾ï¼Œå»ºç«‹å‘Šè­¦ç›¸å…³æ€§åˆ†ææ¨¡å‹ã€‚è¿™æ ·å°±å¯ä»¥å®æ—¶å°†ç¬¦åˆç‰¹å¾çš„æ´¾ç”Ÿå‘Šè­¦ï¼Œåˆ’åˆ†åˆ°åŒä¸€ç±»æ ¹æºå‘Šè­¦ä¸­ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿå®šä½é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2&gt;æ•°æ®çš„å¯è§†åŒ–&lt;/h2&gt;
&lt;p&gt;åœ¨æ•°æ®ä¸­å¿ƒå‘ç”Ÿæ•…éšœæ—¶ï¼Œç³»ç»Ÿå¥åº·çŠ¶å†µå¯è§†åŒ–å°†å¿«é€Ÿæ•è·æ¯ä¸ªæ•°æ®ä¸­å¿ƒå†…èµ„æºå’Œäº‘æœåŠ¡çš„å½“å‰å’Œå†å²å¥åº·çŠ¶å†µï¼ŒåŒ…æ‹¬æœ‰å…³æ€§èƒ½å®¹é‡ï¼Œç›¸å…³å¯¹è±¡å’Œè­¦æŠ¥ä»¥åŠæ‹“æ‰‘å’Œç±»åˆ«æ—¥å¿—ä¿¡æ¯çš„ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œå¯¹äºå¤šç»´ç›‘æ§æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨æ•°æ®ç«‹æ–¹ä½“å¸®åŠ©ç†è§£ï¼Œåœ¨æ•°æ®ç«‹æ–¹ä½“ä¸Šï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†æ·±å…¥çš„æ¢ç´¢ï¼Œå¹¶å·²æœ‰ç›¸å…³äº§å“å¼€å‘ã€‚äº‹ä»¶æµå›¾ä¹Ÿæ˜¯ä¸€ç§ç®€åŒ–è¿ç»´çš„å¯è§†åŒ–æ–¹æ³•æ™ºèƒ½ç®—æ³•éœ€è¦è‡ªåŠ¨åˆ†æè¿™äº›å‘Šè­¦ï¼Œå°†å®ƒä»¬æŒ‰ç…§ä¸»æœºã€é›†ç¾¤æˆ–è€…åº”ç”¨æ™ºèƒ½åœ°è¿›è¡Œç»„åˆï¼Œå½¢æˆäº‹ä»¶ï¼Œå¹¶æŒ‰ç…§æ—¶é—´é¡ºåºæ˜¾ç¤ºå‡ºæ¥ã€‚&lt;/p&gt;</content><category term="linux"></category><category term="è¿ç»´"></category><category term="å¤§æ•°æ®"></category><category term="æ·±åº¦å­¦ä¹ "></category><category term="æœºå™¨å­¦ä¹ "></category><category term="å¼‚å¸¸æ£€æµ‹"></category></entry><entry><title>ç¦»ç¾¤ç‚¹æŒ–æ˜ç®€è¿°</title><link href="https://blog.chih.me/Outlier-mining-review.html" rel="alternate"></link><published>2018-01-14T00:00:00+08:00</published><updated>2018-01-14T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2018-01-14:/Outlier-mining-review.html</id><summary type="html">&lt;h2&gt;å¼•è¨€&lt;/h2&gt;
&lt;p&gt;ç¦»ç¾¤ç‚¹æ˜¯ä¸€ä¸ªæˆ–ä¸€ç»„æ˜æ˜¾ä¸åŒäºå…¶ä»–æ•°æ®çš„æ•°æ®ç‚¹ã€‚HawkinsæŠŠç¦»ç¾¤ç‚¹å®šä¹‰ä¸ºâ€œç¦»ç¾¤ç‚¹æ˜¯åœ¨æ•°æ®é›†ä¸­åç¦»å¤§éƒ¨åˆ†æ•°æ®çš„æ•°æ®ï¼Œä½¿äººæ€€ç–‘è¿™äº›æ•°æ®çš„åç¦»å¹¶éç”±éšæœºå› ç´ äº§ç”Ÿï¼Œè€Œæ˜¯äº§ç”Ÿäºå®Œå…¨ä¸åŒçš„æœºåˆ¶ã€‚â€&lt;/p&gt;
&lt;p&gt;åœ¨å¤§å¤šæ•°åº”ç”¨ä¸­ï¼Œæ•°æ®ç”±ä¸€åˆ°å¤šä¸ªç¨‹åºäº§ç”Ÿï¼Œè¿™äº›æ•°æ®å¯ä»¥åæ˜ å‡ºç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€å’Œè¢«ç›‘æµ‹å®¢ä½“çš„ç›¸å…³æ•°å€¼ã€‚å½“æµ‹é‡ã€è¾“å…¥é”™è¯¯æˆ–ç³»ç»Ÿè¿è¡Œé”™è¯¯æ—¶ï¼Œæˆ–è€…å®¢ä½“å‡ºç°å¼‚å¸¸è¡Œä¸ºï¼Œç¦»ç¾¤ç‚¹å°±ä¼šäº§ç”Ÿã€‚å› æ­¤ï¼Œç¦»ç¾¤ç‚¹ç»å¸¸åŒ…å«å…³äºç³»ç»Ÿä¸å®ä½“å¼‚å¸¸ç‰¹å¾çš„æœ‰æ•ˆä¿¡æ¯ã€‚ç°æœ‰æ•°æ®æŒ–æ˜ç ”ç©¶å¤§å¤šé›†ä¸­äºå‘ç°é€‚ç”¨äºå¤§éƒ¨åˆ†æ•°æ®çš„å¸¸è§„æ¨¡å¼,åœ¨è®¸å¤šåº”ç”¨é¢†åŸŸä¸­ï¼Œç¦»ç¾¤ç‚¹é€šå¸¸ä½œä¸ºå™ªéŸ³è€Œå¿½ç•¥ï¼Œè®¸å¤šæ•°æ®æŒ–æ˜ç®—æ³•è¯•å›¾é™ä½æˆ–æ¶ˆé™¤ç¦»ç¾¤ç‚¹çš„å½±å“ã€‚è€Œåœ¨æœ‰äº›åº”ç”¨é¢†åŸŸè¯†åˆ«ç¦»ç¾¤ç‚¹æ˜¯è®¸å¤šå·¥ä½œçš„åŸºç¡€å’Œå‰æï¼Œç¦»ç¾¤ç‚¹ä¼šå¸¦ç»™æˆ‘ä»¬æ–°çš„è§†è§’ã€‚å¦‚åœ¨æ¬ºè¯ˆæ£€æµ‹ä¸­ï¼Œç¦»ç¾¤ç‚¹å¯èƒ½æ„å‘³æ¬ºè¯ˆè¡Œä¸ºçš„å‘ç”Ÿï¼Œåœ¨å…¥ä¾µæ£€æµ‹ä¸­ç¦»ç¾¤ç‚¹å¯èƒ½æ„å‘³å…¥ä¾µè¡Œä¸ºçš„å‘ç”Ÿã€‚å…¶ä»–çš„ä¸€äº›åº”ç”¨åœºæ™¯åŒ…æ‹¬ä¿¡ç”¨å¡è¯ˆéª—ã€åŒ»ç–—è¯Šæ–­ã€æ‰§æ³•ã€åœ°çƒç§‘å­¦â€¦â€¦&lt;/p&gt;
&lt;p&gt;ç¦»ç¾¤ç‚¹çš„æ£€æµ‹ç®—æ³•è¾“å‡ºå¯ä»¥æ˜¯ä¸¤ç§ç±»å‹ä¹‹ä¸€ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¤§å¤šæ•°ç¦»ç¾¤ç‚¹æ£€æµ‹ç®—æ³•ï¼Œè¾“å‡ºä¸€ä¸ªå…³äºæ•°æ®ç‚¹çš„â€œç¦»ç¾¤æ€§â€å¾—åˆ†ã€‚è¿™ä¸ªå¾—åˆ†å¯ä»¥ç”¨äºåˆ†ææ•°æ®ç‚¹çš„ç¦»ç¾¤è¶‹åŠ¿ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒç§ç±»å‹çš„è¾“å‡ºæ˜¯è¡¨ç¤ºä¸€ä¸ªæ•°æ®ç‚¹æ˜¯å¦ç¦»ç¾¤çš„äºŒè¿›åˆ¶æ ‡ç­¾ã€‚ä¸€äº›ç®—æ³•å¯èƒ½ç›´æ¥è¿”å›äºŒè¿›åˆ¶æ ‡ç­¾ï¼Œä½†ç¦»ç¾¤å¾—åˆ†ä¹Ÿå¯è½¬æ¢æˆäºŒè¿›åˆ¶æ ‡ç­¾ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ—©æœŸå¯¹ç¦»ç¾¤ç‚¹ç ”ç©¶çš„ä¸»è¦ç›®çš„æ˜¯æ¶ˆé™¤ç¦»ç¾¤ç‚¹ï¼Œé‚£æ—¶ç¦»ç¾¤ç‚¹ä¸€èˆ¬è¢«è§†ä¸ºâ€œå™ªéŸ³â€ï¼Œä½†éšç€ç¦»ç¾¤ç‚¹åˆ†æçš„æµè¡Œï¼Œå‘ç°â€œå™ªå£°â€ä¸­å­˜åœ¨æœ‰è¶£çš„æ•°æ®ã€‚åœ¨çœŸå®çš„åº”ç”¨ä¸­ï¼Œæ•°æ®å¯èƒ½åµŒå…¥äº†å¤§é‡çš„å™ªéŸ³ï¼Œä½†å¤§éƒ¨åˆ†å™ªéŸ³å¯¹äºåˆ†ææ˜¯æ— è¶£çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨(a â€¦&lt;/p&gt;</summary><content type="html">&lt;h2&gt;å¼•è¨€&lt;/h2&gt;
&lt;p&gt;ç¦»ç¾¤ç‚¹æ˜¯ä¸€ä¸ªæˆ–ä¸€ç»„æ˜æ˜¾ä¸åŒäºå…¶ä»–æ•°æ®çš„æ•°æ®ç‚¹ã€‚HawkinsæŠŠç¦»ç¾¤ç‚¹å®šä¹‰ä¸ºâ€œç¦»ç¾¤ç‚¹æ˜¯åœ¨æ•°æ®é›†ä¸­åç¦»å¤§éƒ¨åˆ†æ•°æ®çš„æ•°æ®ï¼Œä½¿äººæ€€ç–‘è¿™äº›æ•°æ®çš„åç¦»å¹¶éç”±éšæœºå› ç´ äº§ç”Ÿï¼Œè€Œæ˜¯äº§ç”Ÿäºå®Œå…¨ä¸åŒçš„æœºåˆ¶ã€‚â€&lt;/p&gt;
&lt;p&gt;åœ¨å¤§å¤šæ•°åº”ç”¨ä¸­ï¼Œæ•°æ®ç”±ä¸€åˆ°å¤šä¸ªç¨‹åºäº§ç”Ÿï¼Œè¿™äº›æ•°æ®å¯ä»¥åæ˜ å‡ºç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€å’Œè¢«ç›‘æµ‹å®¢ä½“çš„ç›¸å…³æ•°å€¼ã€‚å½“æµ‹é‡ã€è¾“å…¥é”™è¯¯æˆ–ç³»ç»Ÿè¿è¡Œé”™è¯¯æ—¶ï¼Œæˆ–è€…å®¢ä½“å‡ºç°å¼‚å¸¸è¡Œä¸ºï¼Œç¦»ç¾¤ç‚¹å°±ä¼šäº§ç”Ÿã€‚å› æ­¤ï¼Œç¦»ç¾¤ç‚¹ç»å¸¸åŒ…å«å…³äºç³»ç»Ÿä¸å®ä½“å¼‚å¸¸ç‰¹å¾çš„æœ‰æ•ˆä¿¡æ¯ã€‚ç°æœ‰æ•°æ®æŒ–æ˜ç ”ç©¶å¤§å¤šé›†ä¸­äºå‘ç°é€‚ç”¨äºå¤§éƒ¨åˆ†æ•°æ®çš„å¸¸è§„æ¨¡å¼,åœ¨è®¸å¤šåº”ç”¨é¢†åŸŸä¸­ï¼Œç¦»ç¾¤ç‚¹é€šå¸¸ä½œä¸ºå™ªéŸ³è€Œå¿½ç•¥ï¼Œè®¸å¤šæ•°æ®æŒ–æ˜ç®—æ³•è¯•å›¾é™ä½æˆ–æ¶ˆé™¤ç¦»ç¾¤ç‚¹çš„å½±å“ã€‚è€Œåœ¨æœ‰äº›åº”ç”¨é¢†åŸŸè¯†åˆ«ç¦»ç¾¤ç‚¹æ˜¯è®¸å¤šå·¥ä½œçš„åŸºç¡€å’Œå‰æï¼Œç¦»ç¾¤ç‚¹ä¼šå¸¦ç»™æˆ‘ä»¬æ–°çš„è§†è§’ã€‚å¦‚åœ¨æ¬ºè¯ˆæ£€æµ‹ä¸­ï¼Œç¦»ç¾¤ç‚¹å¯èƒ½æ„å‘³æ¬ºè¯ˆè¡Œä¸ºçš„å‘ç”Ÿï¼Œåœ¨å…¥ä¾µæ£€æµ‹ä¸­ç¦»ç¾¤ç‚¹å¯èƒ½æ„å‘³å…¥ä¾µè¡Œä¸ºçš„å‘ç”Ÿã€‚å…¶ä»–çš„ä¸€äº›åº”ç”¨åœºæ™¯åŒ…æ‹¬ä¿¡ç”¨å¡è¯ˆéª—ã€åŒ»ç–—è¯Šæ–­ã€æ‰§æ³•ã€åœ°çƒç§‘å­¦â€¦â€¦&lt;/p&gt;
&lt;p&gt;ç¦»ç¾¤ç‚¹çš„æ£€æµ‹ç®—æ³•è¾“å‡ºå¯ä»¥æ˜¯ä¸¤ç§ç±»å‹ä¹‹ä¸€ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¤§å¤šæ•°ç¦»ç¾¤ç‚¹æ£€æµ‹ç®—æ³•ï¼Œè¾“å‡ºä¸€ä¸ªå…³äºæ•°æ®ç‚¹çš„â€œç¦»ç¾¤æ€§â€å¾—åˆ†ã€‚è¿™ä¸ªå¾—åˆ†å¯ä»¥ç”¨äºåˆ†ææ•°æ®ç‚¹çš„ç¦»ç¾¤è¶‹åŠ¿ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒç§ç±»å‹çš„è¾“å‡ºæ˜¯è¡¨ç¤ºä¸€ä¸ªæ•°æ®ç‚¹æ˜¯å¦ç¦»ç¾¤çš„äºŒè¿›åˆ¶æ ‡ç­¾ã€‚ä¸€äº›ç®—æ³•å¯èƒ½ç›´æ¥è¿”å›äºŒè¿›åˆ¶æ ‡ç­¾ï¼Œä½†ç¦»ç¾¤å¾—åˆ†ä¹Ÿå¯è½¬æ¢æˆäºŒè¿›åˆ¶æ ‡ç­¾ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ—©æœŸå¯¹ç¦»ç¾¤ç‚¹ç ”ç©¶çš„ä¸»è¦ç›®çš„æ˜¯æ¶ˆé™¤ç¦»ç¾¤ç‚¹ï¼Œé‚£æ—¶ç¦»ç¾¤ç‚¹ä¸€èˆ¬è¢«è§†ä¸ºâ€œå™ªéŸ³â€ï¼Œä½†éšç€ç¦»ç¾¤ç‚¹åˆ†æçš„æµè¡Œï¼Œå‘ç°â€œå™ªå£°â€ä¸­å­˜åœ¨æœ‰è¶£çš„æ•°æ®ã€‚åœ¨çœŸå®çš„åº”ç”¨ä¸­ï¼Œæ•°æ®å¯èƒ½åµŒå…¥äº†å¤§é‡çš„å™ªéŸ³ï¼Œä½†å¤§éƒ¨åˆ†å™ªéŸ³å¯¹äºåˆ†ææ˜¯æ— è¶£çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨(a)ä¸­ï¼ŒAç‚¹æ˜æ˜¾ä¸åŒäºå…¶ä½™èšé›†çš„ç‚¹ï¼Œæ˜¾ç„¶å¯ä»¥æŠŠAè§†ä¸ºç¦»ç¾¤ç‚¹ï¼Œ(b)ä¸­çš„Aç‚¹ä¹Ÿæ˜¯æ•°æ®ä¸­çš„ç¨€ç–ç‚¹ï¼Œä½†å¹¶ä¸å­¤ç«‹ã€‚å› æ­¤ï¼Œæœ¯è¯­â€œç¦»ç¾¤ç‚¹â€æŒ‡çš„æ˜¯ä¸€ä¸ªæ•°æ®ç‚¹ï¼Œè¿™å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå¼‚å¸¸æˆ–æ˜¯å™ªéŸ³ï¼Œè€Œä¸€ä¸ªâ€œå¼‚å¸¸â€æŒ‡çš„æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ„Ÿå…´è¶£çš„ç¦»ç¾¤ç‚¹ã€‚é€šå¸¸å™ªå£°å’Œå¼‚å¸¸ä¹‹é—´å¹¶ä¸å­˜åœ¨ä¸€ä¸ªæ˜æ˜¾çš„ç•Œé™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170102_141443" src="images/Screenshot_20170102_141443.png"&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡åœ¨å……åˆ†è°ƒç ”å›½å†…å¤–ç¦»ç¾¤ç‚¹æŒ–æ˜ç ”ç©¶æˆæœçš„åŸºç¡€ä¸Šï¼Œä»‹ç»äº†ç¦»ç¾¤ç‚¹æŒ–æ˜çš„ç ”ç©¶è¿›å±•ï¼Œå¹¶æ¦‚è¦åœ°æ€»ç»“å’Œæ¯”è¾ƒäº†å·²æœ‰çš„å„ç§ç¦»ç¾¤ç‚¹æŒ–æ˜æ–¹æ³•ï¼Œå±•æœ›äº†ç¦»ç¾¤ç‚¹æŒ–æ˜ç ”ç©¶çš„æœªæ¥å‘å±•æ–¹å‘å’Œé¢ä¸´çš„æŒ‘æˆ˜ã€‚ä½™ä¸‹å†…å®¹ç»„ç»‡å¦‚ä¸‹ï¼šç¬¬2èŠ‚è®¨è®ºå…¸å‹çš„ç¦»ç¾¤ç‚¹åˆ†ç±»ï¼›ç¬¬3èŠ‚ï¼›ç¬¬4èŠ‚ï¼›æœ€åç»™å‡ºç»“è®ºã€‚&lt;/p&gt;
&lt;h2&gt;ç¦»ç¾¤ç‚¹çš„è¡¨ç¤º&lt;/h2&gt;
&lt;p&gt;ç”±äºåº”ç”¨çš„ä¸åŒï¼Œæ•°æ®è¡¨ç¤ºä¹Ÿå„ä¸ç›¸åŒï¼Œå¯ä»¥æ˜¯äº’ä¸ç›¸å…³çš„é«˜ç»´æ•°æ®ï¼Œä¹Ÿå¯ä»¥æ˜¯æ—¶é—´åºåˆ—æ•°æ®ï¼Œæˆ–è€…æ˜¯ä»¥å›¾æˆ–ç½‘ç»œå½¢å¼å­˜åœ¨çš„æ•°æ®ï¼Œæ•°æ®æœ¬èº«ä¹Ÿå¯ä»¥æ˜¯æ•°å€¼å½¢å¼ã€ç¦»æ•£å½¢å¼ã€‚å‡ ä¹æ‰€æœ‰çš„ç¦»ç¾¤ç‚¹æ£€æµ‹ç®—æ³•éƒ½æ˜¯åŸºäºå·²æœ‰æ•°æ®å»ºç«‹ä¸€ä¸ªä»£è¡¨ä¸€èˆ¬æ¨¡å¼çš„æ¨¡å‹ï¼Œç„¶åè®¡ç®—ç»™å®šçš„æ•°æ®ç‚¹å’Œä¸€èˆ¬æ¨¡å¼çš„åå·®ï¼Œå¾—å‡ºè¿™ä¸ªæ•°æ®ç‚¹çš„ç¦»ç¾¤æƒ…å†µã€‚è€Œåå·®çš„è®¡ç®—ï¼Œä¸æ•°æ®æœ¬èº«çš„æ•°æ®è¡¨ç¤ºå¯†åˆ‡ç›¸å…³ã€‚åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œç¦»ç¾¤ç‚¹å°±æ˜¯å’Œå¤§å¤šæ•°ç‚¹è·ç¦»æ¯”è¾ƒå¤§çš„ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;æ¨¡å‹çš„é€‰æ‹©è‡³å…³é‡è¦ï¼Œä¸€æ—¦æ¨¡å‹é€‰æ‹©æœ‰è¯¯ï¼Œå°±å¯èƒ½å¯¼è‡´å¯¹æ•°æ®çš„ç†è§£å‡ºç°è¯¯è§£ã€‚ä»¥Zå€¼æµ‹è¯•ä¸ºä¾‹ï¼Œç»™å‡ºä¸€ç³»åˆ—ä¸€ç»´æ•°å€¼ &lt;span class="math"&gt;\(X_{1}, X_{2},...,X_{n}\)&lt;/span&gt; ï¼Œå®ƒä»¬çš„å¹³å‡å€¼ &lt;span class="math"&gt;\(\mu\)&lt;/span&gt; å®ƒä»¬çš„æ ‡å‡†å·® &lt;span class="math"&gt;\(\sigma\)&lt;/span&gt; ã€‚ä¸ &lt;span class="math"&gt;\(X_{i}\)&lt;/span&gt; ç›¸å…³çš„ Z å€¼çš„å®šä¹‰å¦‚ä¸‹æ‰€ç¤º&lt;/p&gt;
&lt;div class="math"&gt;$$
Z_{i} = \frac{X_{i}-\mu}{\sigma}
$$&lt;/div&gt;
&lt;p&gt;Z å€¼æµ‹è¯•è®¡ç®—äº†ä¸€ä¸ªæ•°å’Œå¹³å‡çš„åç¦»æƒ…å†µã€‚å½“æˆ‘ä»¬æŠŠ Z å€¼æµ‹è¯•åº”ç”¨åœ¨å›¾ (a)çš„ä¸€ä¸ªç»´åº¦ä¸Šï¼Œæˆ‘ä»¬å‘ç°Zå€¼æµ‹è¯•çš„ç»“æœæ˜¯ç¦»ç¾¤ç‚¹Açš„åå·®æœ€å°ï¼Œè¿™æ˜¾ç„¶æœ‰é—®é¢˜ï¼Œé”™è¯¯çš„æ¨¡å‹é€‰æ‹©å°†å¾—åˆ°æ— æ•ˆæˆ–é”™è¯¯çš„ç»“æœã€‚åœ¨å®è·µä¸­ï¼Œæ¨¡å‹çš„é€‰æ‹©é€šå¸¸æ˜¯ç”±å¯¹ç‰¹å®šåº”ç”¨ç¨‹åºçš„ç†è§£æ‰€å†³å®šçš„ã€‚åœ¨é€‰æ‹©æ¨¡å‹ä¹‹å‰ï¼Œéœ€è¦å¯¹æ•°æ®æœ‰è¶³å¤Ÿçš„äº†è§£ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢å°†åˆ—ä¸¾ä¸€äº›åŸºæœ¬çš„æ¨¡å‹ï¼Œåˆ†åˆ«ä¸ºæå€¼åˆ†æã€ç»Ÿè®¡æ¦‚ç‡åˆ†æã€çº¿æ€§æ¨¡å‹ã€åŸºäºé‚»è¿‘çš„æ¨¡å‹ã€ä¿¡æ¯è®ºæ¨¡å‹ä¸é«˜ç»´ç¦»ç¾¤ç‚¹æŒ–æ˜ã€‚&lt;/p&gt;
&lt;h3&gt;æå€¼åˆ†æ&lt;/h3&gt;
&lt;p&gt;æå€¼åˆ†ææ˜¯ä¸€ç»´æ•°æ®åˆ†æä¸­æœ€åŸºæœ¬çš„ç¦»ç¾¤ç‚¹æ£€æµ‹å½¢å¼ã€‚è§„å®šå€¼è¿‡å¤§æˆ–è¿‡å°çš„ç‚¹ä¸ºç¦»ç¾¤ç‚¹ã€‚æå€¼åˆ†æç¬¦åˆäººä»¬å¯¹ç¦»ç¾¤ç‚¹çš„ä¼ ç»Ÿè®¤çŸ¥ï¼Œåœ¨ä¸€ä¸ªä¸€ç»´æ•°æ®é›†{1, 2, 2,  50, 98, 98, 99}ä¸­ï¼Œ1å’Œ99ä¼šè¢«è®¤ä¸ºæ˜¯ç¦»ç¾¤ç‚¹ã€‚ä¸ºäº†è§£å†³å†²çªï¼Œæé™å€¼æ¨¡å‹åŒæ—¶ä¹Ÿä½¿ç”¨æ¦‚ç‡æ¨¡å‹é‡åŒ–ç”Ÿæˆæ¦‚ç‡ä¸ºæé™å€¼ã€‚è™½ç„¶æé™åˆ†ææ˜¯åŸºäºä¸€ç»´æ•°æ®æå‡ºçš„ï¼Œä½†ä¹Ÿå¯ä»¥åœ¨å¤šç»´æ•°æ®ä¸Šä½¿ç”¨ã€‚åœ¨å›¾ (b)ä¸­ï¼ŒBç‚¹å¯ä»¥è¢«è®¤ä¸ºæ˜¯æé™å€¼ï¼Œå› ä¸ºå®ƒåœ¨å¤šç»´æ•°æ®é›†çš„å¤–å›´åŒºåŸŸï¼Œä½†aä¸bä¸­çš„Aç‚¹å°±ä¸èƒ½è®¤ä¸ºæ˜¯æé™å€¼ï¼Œè™½ç„¶å®ƒæ˜¯ç¦»ç¾¤ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;æå€¼åˆ†æåœ¨ç¦»ç¾¤ç‚¹åˆ†æä¸­æ‰®æ¼”è¿™é‡è¦çš„è§’è‰²ï¼Œåœ¨å¤§å¤šæ•°ç¦»ç¾¤ç‚¹æ£€æµ‹ç®—æ³•çš„æœ€åä¸€æ­¥å¾—åˆ°å¹¿æ³›ä½¿ç”¨ã€‚å¤§å¤šæ•°ç¦»ç¾¤ç‚¹æ£€æµ‹ç®—æ³•ç”¨æ•°å€¼è¡¡é‡ç¦»ç¾¤ç¨‹åº¦ï¼Œä¸€äº›ç¦»ç¾¤ç‚¹æ£€æµ‹ç®—æ³•ä¼šäº§å‡ºä¸€ç³»åˆ—ç¦»ç¾¤å¾—åˆ†ï¼Œä½¿ç”¨æé™åˆ†ææ–¹æ³•å°±å¯ä»¥ç»Ÿä¸€æˆä¸€ä¸ªå•ä¸€çš„å€¼ï¼Œæˆ–è€…äº§ç”Ÿä¸€ä¸ªäºŒè¿›åˆ¶æ ‡ç­¾ã€‚&lt;/p&gt;
&lt;h3&gt;ç»Ÿè®¡æ¦‚ç‡åˆ†æ&lt;/h3&gt;
&lt;p&gt;è¿™ç±»æ–¹æ³•å¤§éƒ¨åˆ†æ˜¯ä»é’ˆå¯¹ä¸åŒåˆ†å¸ƒçš„ç¦»ç¾¤ç‚¹æ£€éªŒæ–¹æ³•å‘å±•èµ·æ¥çš„ï¼Œé€šå¸¸ç”¨æˆ·ä½¿ç”¨æ¦‚ç‡åˆ†å¸ƒæ¥æ‹Ÿåˆæ•°æ®é›†ï¼Œæˆ–è€…é€šè¿‡å­¦ä¹ æ¥è·å¾—æ¨¡å‹çš„å‚æ•°ï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨Expectation-Maximization (EM)ç®—æ³•è®¡ç®—å‡ºåˆ†å¸ƒçš„å‚æ•°ï¼Œå…³é”®åœ¨äºé€‰æ‹©å‡ºä¸€ä¸ªæœ€è´´è¿‘æ•°æ®çš„åˆ†å¸ƒã€‚å‡å®šæ‰€ç»™å®šçš„æ•°æ®é›†å­˜åœ¨ä¸€ä¸ªåˆ†å¸ƒæˆ–æ¦‚ç‡æ¨¡å‹(ä¾‹å¦‚ï¼Œæ­£æ€åˆ†å¸ƒæˆ–æ³Šæ¾åˆ†å¸ƒ)ï¼Œç„¶åå°†ä¸æ¨¡å‹ä¸ä¸€è‡´(å³åˆ†å¸ƒä¸ç¬¦åˆ)çš„æ•°æ®æ ‡è¯†ä¸ºç¦»ç¾¤æ•°æ®ï¼Œåœ¨æ—©æœŸä¹Ÿå¯ä»¥ä½¿ç”¨æé™å€¼åˆ†æé€‰å‡ºæ¦‚ç‡æ¨¡å‹ä¸­çš„ç¦»ç¾¤ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ç¦»ç¾¤ç‚¹æ£€æµ‹çš„ç»Ÿè®¡å­¦æ–¹æ³•å…·æœ‰åšå®çš„åŸºç¡€ï¼Œå»ºç«‹åœ¨æ ‡å‡†çš„ç»Ÿè®¡å­¦æŠ€æœ¯(å¦‚åˆ†å¸ƒå‚æ•°çš„ä¼°è®¡)ä¹‹ä¸Šï¼Œå½“å­˜åœ¨å……åˆ†çš„æ•°æ®å’Œæ‰€ç”¨çš„æ£€éªŒç±»å‹çš„çŸ¥è¯†æ—¶ï¼Œè¿™äº›æ£€éªŒå¯èƒ½éå¸¸æœ‰æ•ˆã€‚åŒæ—¶ï¼Œå„ç§ä¸åŒçš„æ•°æ®ç±»å‹å‡å¯ä»¥ç»Ÿè®¡æ¦‚ç‡è¿›è¡Œå»ºæ¨¡ã€‚è€Œç»Ÿè®¡æ¦‚ç‡åˆ†æçš„ç¼ºç‚¹å°±åœ¨äºå®ƒè¯•å›¾æŠŠæ‰€æœ‰æ•°æ®æ‹Ÿåˆåˆ°ä¸€ä¸ªç‰¹å®šçš„åˆ†å¸ƒï¼Œéšç€æ¨¡å‹å‚æ•°çš„å¢åŠ ï¼Œå®¹æ˜“äº§ç”Ÿè¿‡æ‹Ÿåˆç°è±¡ã€‚åŸºäºåˆ†å¸ƒçš„æ–¹æ³•æ˜¯å‡è®¾æ•°æ®ç¬¦åˆæŸç§åˆ†å¸ƒè§„å¾‹ï¼Œå› è€Œä¸é€‚åˆåˆ†å¸ƒæœªçŸ¥çš„æƒ…å½¢ã€‚åŒæ—¶ï¼Œå¯¹äºé«˜ç»´æ•°æ®ï¼Œå¾ˆéš¾ä¼°è®¡çœŸå®çš„åˆ†å¸ƒã€‚&lt;/p&gt;
&lt;h3&gt;çº¿æ€§æ¨¡å‹&lt;/h3&gt;
&lt;p&gt;çº¿æ€§æ¨¡å‹ä½¿ç”¨çº¿æ€§å…³ç³»å°†æ•°æ®å»ºæ¨¡åˆ°ä½ç»´åµŒå…¥å­ç©ºé—´ï¼Œåœ¨å›¾(a)ä¸­ï¼ŒäºŒç»´ç©ºé—´ä¸Šçš„ç‚¹å¯ä»¥çœ‹ä½œæ²¿ä¸€æ¡æ–œçº¿åˆ†å¸ƒã€‚&lt;img alt="Screenshot_20170102_184751" src="images/Screenshot_20170102_184751.png"&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å›¾ä¸­ï¼Œä½¿ç”¨å›å½’åˆ†ææŠŠäºŒç»´ç©ºé—´å¯¹é½åˆ°ä¸€ç»´çš„çº¿ä¸Š
&lt;/p&gt;
&lt;div class="math"&gt;$$
y_{i} = a \cdot x_{i} + b + \epsilon_{i}     \   \   \     \    \forall_{i} \in  \{1...N\}
$$&lt;/div&gt;
&lt;p&gt;
å…¬å¼ä¸­ &lt;span class="math"&gt;\(\epsilon_{i}\)&lt;/span&gt; ä»£è¡¨ä½™æ•°ï¼Œç³»æ•° a, b éœ€è¦ä»æ•°æ®ä¸­å­¦ä¹ å¾—åˆ°ï¼Œå¯ä»¥ä½¿ç”¨æœ€å°äºŒä¹˜æ³•æ‰¾å‡ºã€‚è·å¾—çš„ä½™æ•°å¯ä»¥ç»“åˆæå€¼åˆ†æè®¡ç®—å‡ºç¦»ç¾¤ç‚¹ã€‚çº¿æ€§æ¨¡å‹å¤„ç†çš„è¿‡ç¨‹ä¸ Principal component analysis (PCA) ç›¸ä¼¼ï¼ŒPCA æä¾›äº†ä¸€ç§é™ä½æ•°æ®ç»´åº¦çš„æœ‰æ•ˆåŠæ³•ï¼Œå¦‚æœåˆ†æè€…åœ¨åŸæ•°æ®ä¸­é™¤æ‰æœ€å°çš„ç‰¹å¾å€¼æ‰€å¯¹åº”çš„æˆåˆ†ï¼Œé‚£ä¹ˆæ‰€å¾—çš„ä½ç»´åº¦æ•°æ®å¿…å®šæ˜¯æœ€ä¼˜åŒ–çš„ï¼ˆä¹Ÿå³ï¼Œè¿™æ ·é™ä½ç»´åº¦å¿…å®šæ˜¯å¤±å»è®¯æ¯æœ€å°‘çš„æ–¹æ³•ï¼‰ã€‚å› æ­¤ï¼ŒPCAå¯ä»¥ç”¨äºå™ªå£°ç§»é™¤ã€‚&lt;/p&gt;
&lt;p&gt;çº¿æ€§æ¨¡å‹çš„ç¼ºç‚¹åœ¨äºå½“æ•°æ®ç»´åº¦å¾ˆé«˜æ—¶ï¼Œ ä½¿ç”¨é™ç»´æˆ–å›å½’æ¨¡å‹ä¼šå¢åŠ å¯¹æ•°æ®åŸæœ‰å±æ€§çš„ç†è§£éš¾åº¦ã€‚&lt;/p&gt;
&lt;h3&gt;åŸºäºé‚»è¿‘çš„æ¨¡å‹&lt;/h3&gt;
&lt;p&gt;åŸºäºé‚»è¿‘çš„æ¨¡å‹å°±æ˜¯è¯„ä¼°ç‚¹ä¸å…¶ä»–ç‚¹çš„å­¤ç«‹æƒ…å†µçš„æ¨¡å‹ï¼Œä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;èšç±»åˆ†æ&lt;/li&gt;
&lt;li&gt;åŸºäºå¯†åº¦çš„åˆ†æ&lt;/li&gt;
&lt;li&gt;æœ€è¿‘é‚»åˆ†æ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨èšç±»åˆ†æå’ŒåŸºäºå¯†åº¦çš„åˆ†æä¸­ï¼Œå¯†åº¦å¤§çš„ç‚¹èšåˆä½œä¸ºå¸¸è§„æ•°æ®ç‚¹ï¼Œè€Œå…¶ä½™çš„æ•°æ®ç‚¹æˆä¸ºç¦»ç¾¤ç‚¹ã€‚ä½†ä¸¤è€…çš„ä¸åŒåœ¨äºèšç±»ç®—æ³•åˆ†å‰²ç‚¹ï¼Œè€ŒåŸºäºå¯†åº¦çš„ç®—æ³•åˆ†å‰²åŒºåŸŸã€‚èšç±»åˆ†æä¸­ç°‡çš„å®šä¹‰é€šå¸¸æ˜¯ç¦»ç¾¤ç‚¹çš„è¡¥ï¼Œå› æ­¤å¯åŒæ—¶å‘ç°ç°‡å’Œç¦»ç¾¤ç‚¹ã€‚åŸºäºå¯†åº¦çš„ç¦»ç¾¤ç‚¹æ£€æµ‹ç»™å‡ºäº†å¯¹è±¡ç¦»ç¾¤ç¨‹åº¦çš„å®šé‡åº¦é‡ï¼Œå¯¹ä¸åŒå¯†åº¦åŒºåŸŸä¸­çš„æ•°æ®ä¹Ÿèƒ½å¤Ÿå¾ˆå¥½åœ°å¤„ç†ï¼Œè§£å†³äº†å±€éƒ¨ç¦»ç¾¤ç‚¹çš„ç¦»ç¾¤ç¨‹åº¦çš„åº¦é‡å’ŒæŒ–æ˜é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ€è¿‘é‚»ç®—æ³•ä¸­ï¼Œæœ‰ä¸¤ç§ä¸åŒçš„ç­–ç•¥ï¼šç¬¬ä¸€ç§ç­–ç•¥æ˜¯é‡‡ç”¨ç»™å®šé‚»åŸŸåŠå¾„ï¼Œä¾æ®ç‚¹çš„é‚»åŸŸä¸­åŒ…å«çš„å¯¹è±¡å¤šå°‘æ¥åˆ¤å®šç¦»ç¾¤ç‚¹å¦‚æœä¸€ä¸ªç‚¹çš„é‚»åŸŸå†…åŒ…å«çš„å¯¹è±¡å°‘äºæ•´ä¸ªæ•°æ®é›†çš„ä¸€å®šæ¯”ä¾‹åˆ™æ ‡è¯†å®ƒä¸ºç¦»ç¾¤ç‚¹ï¼Œä¹Ÿå°±æ˜¯å°†æ²¡æœ‰è¶³å¤Ÿé‚»å±…çš„å¯¹è±¡çœ‹æˆæ˜¯åŸºäºè·ç¦»çš„ç¦»ç¾¤ç‚¹ã€‚ç¬¬äºŒç§åˆ©ç”¨kæœ€è¿‘é‚»è·ç¦»çš„å¤§å°æ¥åˆ¤å®šç¦»ç¾¤ä½¿ç”¨k-æœ€è¿‘é‚»çš„è·ç¦»åº¦é‡ä¸€ä¸ªå¯¹è±¡æ˜¯å¦è¿œç¦»å¤§éƒ¨åˆ†ç‚¹ï¼Œä¸€ä¸ªå¯¹è±¡çš„ç¦»ç¾¤ç¨‹åº¦ç”±åˆ°å®ƒçš„k-æœ€è¿‘é‚»çš„è·ç¦»ç»™å®š ã€‚è¿™ç§æ–¹æ³•å¯¹kçš„å–å€¼æ¯”è¾ƒæ•æ„Ÿã€‚kå¤ªå°(ä¾‹å¦‚1)ï¼Œåˆ™å°‘é‡çš„é‚»è¿‘ç¦»ç¾¤ç‚¹å¯èƒ½å¯¼è‡´è¾ƒä½çš„ç¦»ç¾¤ç¨‹åº¦ã€‚kå¤ªå¤§ï¼Œåˆ™ç‚¹æ•°å°‘äºkçš„ç°‡ä¸­æ‰€æœ‰çš„å¯¹è±¡å¯èƒ½éƒ½æˆäº†ç¦»ç¾¤ç‚¹ã€‚&lt;/p&gt;
&lt;h3&gt;ä¿¡æ¯è®ºæ¨¡å‹&lt;/h3&gt;
&lt;p&gt;ä¿¡æ¯è®ºæ¨¡å‹æä¾›äº†ä¸€ç§æ•°æ®æ‘˜è¦çš„æ–¹æ³•ï¼Œåœ¨å…¶ä¸­ï¼Œç¦»ç¾¤ç‚¹è¢«å®šä¹‰ä¸ºå¢åŠ äº†æè¿°æ•°æ®çš„è¯­è¨€çš„æœ€å°é•¿åº¦ï¼Œä»¥ä¸‹é¢çš„ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸ºä¾‹&lt;/p&gt;
&lt;div class="math"&gt;$$
ABABABABABABABABABABABABABABABABABABABAB \\
ABABABCBABABABABABABABABABABABABABABABAB
$$&lt;/div&gt;
&lt;p&gt;ç¬¬äºŒä¸ªå­—ç¬¦ä¸²å’Œç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ç›¸åŒï¼Œå”¯ä¸€çš„ä¸åŒç‚¹åœ¨äºå‡ºç°äº†ä¸€ä¸ªå•ç‹¬çš„å­—ç¬¦Cï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å¯ä»¥è¢«ç®€å•æè¿°ä¸ºâ€œABé‡å¤äº†20æ¬¡â€ï¼Œä½†ç¬¬äºŒä¸ªå­—ç¬¦ä¸²å°±ä¸èƒ½è¢«è¿™ä¹ˆç®€æ˜çš„æè¿°äº†ï¼Œå› ä¸ºå®ƒå‡ºç°äº†å…¶ä»–çš„å­—ç¬¦Cã€‚å­—ç¬¦Cå¢åŠ äº†æè¿°æ•°æ®è¯­è¨€çš„æœ€å°é•¿åº¦ï¼Œå› æ­¤å¯ä»¥æŠŠCä½œä¸ºç¦»ç¾¤ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ä¿¡æ¯è®ºæ–¹æ³•æŒ–æ˜ç¦»ç¾¤ç‚¹çš„åŸºæœ¬æ–¹æ³•ä¸ºæ„é€ ä¸€æœ¬å¯ä»¥ä»£è¡¨æ•°æ®çš„å­—å…¸ï¼Œå½“ä¸€ä¸ªæ•°æ®ç‚¹è¢«ç§»é™¤åå‘ç°å‰©ä½™æ•°æ®çš„æè¿°å‡å°‘æœ€å¤šï¼Œé‚£è¿™ä¸ªç‚¹å¯ä»¥è¢«è§†ä¸ºç¦»ç¾¤ç‚¹ã€‚&lt;/p&gt;
&lt;h2&gt;å…¸å‹çš„ç¦»ç¾¤ç‚¹åˆ†ææ–¹æ³•&lt;/h2&gt;
&lt;p&gt;ä¸€èˆ¬ï¼Œæ— ç›‘ç£æ–¹æ³•ç”¨äºå™ªå£°ç§»é™¤æˆ–å¼‚å¸¸æ£€æµ‹ï¼Œæœ‰ç›‘ç£æ–¹æ³•ç”¨äºç‰¹å®šåœºæ™¯çš„å¼‚å¸¸æ£€æµ‹&lt;/p&gt;
&lt;h2&gt;ç¦»ç¾¤ç‚¹åˆ†æç°çŠ¶&lt;/h2&gt;
&lt;p&gt;å½“å‰ç¦»ç¾¤ç‚¹ç ”ç©¶çš„é‡ç‚¹æ˜¯é«˜ç»´å¤§æ•°æ®ï¼Œæ—¶åºæ•°æ®â€¦â€¦&lt;/p&gt;
&lt;h3&gt;é«˜ç»´æ•°æ®ä¸­çš„ç¦»ç¾¤ç‚¹æŒ–æ˜&lt;/h3&gt;
&lt;p&gt;é«˜ç»´ç©ºé—´ä¸­çš„ç¦»ç¾¤ç‚¹æŒ–æ˜æ˜¯ç¦»ç¾¤ç‚¹æŒ–æ˜çš„ä¸€å¤§æŒ‘æˆ˜ï¼Œä»å¯†åº¦çš„è§’åº¦è€ƒè™‘ï¼Œåœ¨é«˜ç»´ç©ºé—´ï¼Œæ•°æ®å˜å¾—ç¨€ç–ï¼ŒçœŸæ­£çš„ç¦»ç¾¤ç‚¹è¢«æ·¹æ²¡åœ¨å¤§é‡çš„å™ªéŸ³ä¹‹ä¸­ã€‚å½“æ•°æ®ç»´æ•°å¢åŠ æ—¶ï¼Œå¸¸è§„çš„ç¦»ç¾¤ç‚¹æ£€æµ‹ç®—æ³•çš„æ€§èƒ½ä¹Ÿä¼šè¿…é€Ÿä¸‹é™ã€‚ç”±äºé«˜ç»´ç©ºé—´ä¸­æ•°æ®çš„ç¨€ç–æ€§ï¼Œæ•°æ®ç‚¹ä¹‹é—´å‡ ä¹æ˜¯ç­‰è·ç¦»çš„ï¼Œæ¯ä¸ªç‚¹åœ¨å¯†åº¦æˆ–è·ç¦»çš„æ„ä¹‰ä¸Šéƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªç¦»ç¾¤ç‚¹ï¼Œå¯¹é«˜ç»´æ•°æ®èšç±»å‡ ä¹ä¸å¯èƒ½ï¼Œé€šå¸¸å®šä¹‰çš„ç¦»ç¾¤ç‚¹çš„æ¦‚å¿µä¹Ÿå¤±å»æ„ä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£å†³é«˜ç»´æ•°æ®ç¦»ç¾¤ç‚¹æŒ–æ˜é—®é¢˜ï¼Œä¸€ç§é‡è¦çš„æ–¹æ³•æ˜¯é™ç»´åˆ°ä½ç»´å­ç©ºé—´è¿›è¡Œç¦»ç¾¤ç‚¹æŒ–æ˜ã€‚ç¦»ç¾¤ç‚¹é€šå¸¸éšè—åœ¨ä½ç»´å­ç©ºé—´çš„å¼‚å¸¸å±€éƒ¨è¡Œä¸ºä¸­ï¼Œå› æ­¤ï¼Œéœ€è¦å¯»æ‰¾åˆé€‚çš„å­ç©ºé—´ã€‚é™ä½ç»´åº¦äº§ç”Ÿå­ç©ºé—´çš„æŠ€æœ¯ä¸»è¦åŒ…æ‹¬æŠ•å½±å˜æ¢å’Œå±æ€§æå–ç­‰æ–¹æ³•ã€‚æŠ•å½±å˜æ¢æ˜¯å°†æ•°æ®é›†ä»åŸ &lt;span class="math"&gt;\(\delta\)&lt;/span&gt; ç»´æŠ•å½±åˆ° &lt;span class="math"&gt;\(d\)&lt;/span&gt; ç»´ç©ºé—´,å…¶ä¸­ &lt;span class="math"&gt;\(d\ll \delta\)&lt;/span&gt; ï¼Œå¹¶ä¸”æ¯ä¸ªæ–°ç»´æ˜¯åŸå§‹ç»´çš„çº¿æ€§ç»„åˆ,ç„¶ååœ¨dç»´ç©ºé—´ä¸Šåˆ©ç”¨ä¼ ç»Ÿçš„æŒ–æ˜ç®—æ³•è¿›è¡ŒæŒ–æ˜ã€‚å¦‚æœé«˜ç»´æ•°æ®å‘ä½ç»´æŠ•å½±ï¼Œç¦»ç¾¤ç‚¹ä¿¡æ¯ä¼šä¸¢å¤±ã€‚åœ¨ä¸‹å›¾ä¸­ï¼Œ(a)(b)æ˜¯é«˜ç»´ç©ºé—´çš„ä¸¤ä¸ªä¸åŒä½ç»´æŠ•å½±ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œ(a)ä¸­ç¦»ç¾¤ç‚¹Aåˆ°(b)ä¸­å°±ä¸å†æˆä¸ºç¦»ç¾¤ç‚¹ã€‚åŒæ—¶ï¼Œé«˜ç»´å‘ä½ç»´çš„æŠ•å½±æ•°ç›®å’Œç»´æ•°æ˜¯æŒ‡æ•°ç›¸å…³çš„ï¼Œè®¡ç®—å¤æ‚åº¦éå¸¸é«˜ã€‚æ‰€ä»¥è¯´ï¼Œæ— è®ºæ˜¯ç›´æ¥åœ¨é«˜ç»´è¿›è¡Œç¦»ç¾¤ç‚¹æŒ–æ˜è¿˜æ˜¯æŠ•å½±åˆ°ä½ç»´è¿›è¡Œç¦»ç¾¤ç‚¹æŒ–æ˜ï¼Œéƒ½å°†å˜å¾—ååˆ†å›°éš¾ã€‚ç”±äºä¸åŒçš„å­ç©ºé—´åŒ…å«ä¸åŒçš„ç¦»ç¾¤ç‚¹ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ä¸€ç§é›†æˆçš„æ–¹æ³•ï¼ŒåŒæ—¶è¿›è¡Œæ•°æ®ç‰¹å¾é€‰å–å’Œå­ç©ºé—´æ¢ç´¢ï¼Œè¿™å°†å¤§å¤§é™ä½è®¡ç®—å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170102_214113" src="images/Screenshot_20170102_214113.png"&gt;&lt;/p&gt;
&lt;p&gt;å¦ä¸€ç§å‡å°‘ç»´åº¦çš„æ–¹æ³•æ˜¯ç‰¹å¾é€‰å–æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•ä¸ç”¨å˜æ¢,è€Œæ˜¯ä»ç»´åº¦ä¸­å¯å‘å¼åœ°é€‰å–ä¸€éƒ¨åˆ†ç»´,åˆ é™¤ä¸ç›¸å…³æˆ–å†—ä½™çš„å±æ€§(ç»´),ç›®æ ‡æ˜¯æ‰¾å‡ºæœ€å°å±æ€§é›†,ä½¿å¾—æ•°æ®ç±»çš„æ¦‚ç‡åˆ†å¸ƒå°½å¯èƒ½æ¥è¿‘ä½¿ç”¨æ‰€æœ‰å±æ€§å¾—åˆ°çš„åŸåˆ†å¸ƒã€‚è¿™ç§æ–¹æ³•é¿å…äº†æŒ–æ˜ç»“æœéš¾ä»¥è§£é‡Šé—®é¢˜,å¹¶ä¸”ç”±äºå±æ€§æ•°ç›®çš„å‡å°‘,ä½¿å¾—æ¨¡å¼æ›´æ˜“äºç†è§£ã€‚&lt;/p&gt;
&lt;h3&gt;æ—¶åºæ•°æ®ä¸­çš„ç¦»ç¾¤ç‚¹æŒ–æ˜&lt;/h3&gt;
&lt;p&gt;æ—¶åºæ•°æ®åŒ…å«ä¸€ç³»åˆ—æŒ‰æ—¶é—´è¿ç»­ç”Ÿæˆçš„å€¼ã€‚å› æ­¤ï¼Œæ—¶åºæ•°æ®åœ¨ç›¸é‚»çš„ä¸¤ä¸ªæ—¶é—´ç‚¹ä¸Šä¸€èˆ¬ä¸ä¼šå‡ºç°å¾ˆå¤§çš„å·®åˆ«ï¼Œæ€»ä½“å‘ˆç°å‡ºè¿ç»­å…‰æ»‘è¶‹åŠ¿ã€‚æ—¶åºæ•°æ®ä¸­çš„ç¦»ç¾¤ç‚¹å¯èƒ½å°±æ˜¯ä¸€äº›çªç„¶å‡ºç°å·¨å¤§æ”¹å˜çš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘ä»¥ä¸‹å¦‚å›¾çš„æ—¶åºæ•°æ®ï¼Œæ˜æ˜¾æœ‰ä¸¤ä¸ªçªç„¶çš„è·³å˜ï¼Œä¸€ä¸ªæ˜¯ä»3ä¸€ä¸‹å­å˜åˆ°87ï¼Œå¦ä¸€ä¸ªæ˜¯86åˆ°3ï¼Œç„¶ååˆå›åˆ°84ï¼Œè¿™ä¸¤å¤„å³å¯è§†ä¸ºç¦»ç¾¤ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170102_221320" src="images/Screenshot_20170102_221320.png"&gt;&lt;/p&gt;
&lt;p&gt;ä¼ ç»Ÿçš„æ—¶é—´åºåˆ—ç¦»ç¾¤æ¨¡å¼æŒ–æ˜ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹æ³•ï¼šä¸€ç§æ˜¯å°†æ—¶é—´åºåˆ—åˆ†æˆç­‰é•¿çš„å­åºåˆ—,å¹¶å°†å­åºåˆ—æ˜ å°„ä¸ºdç»´ç©ºé—´ä¸­çš„ç‚¹,ç„¶åé‡‡ç”¨åŸºäºè·ç¦»çš„æŒ–æ˜ç®—æ³•å‘ç°ç¦»ç¾¤ç‚¹ã€‚è¿™ç§æ–¹æ³•çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯åºåˆ—ä¸­çš„ç‚¹ä¸€èˆ¬è¾ƒå¤šï¼Œè·ç¦»çš„è®¡ç®—å’Œæ£€æµ‹çš„æ—¶é—´æ¶ˆè€—æ˜¯ç›¸å½“å¯è§‚çš„ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯ä»æ—¶é—´åºåˆ—ä¸­æŠ½å–ç‰¹å¾,é€šè¿‡è®¡ç®—ç‰¹å¾åºåˆ—é—´çš„è·ç¦»æ¥å‘ç°å¼‚å¸¸ã€‚&lt;/p&gt;
&lt;h2&gt;ç»“æŸè¯­&lt;/h2&gt;
&lt;p&gt;ç¦»ç¾¤ç‚¹æŒ–æ˜å¯ä»¥åº”ç”¨åœ¨è®¸å¤šé¢†åŸŸï¼Œæ¯”å¦‚å…´è¶£å‘ç°ï¼Œå¼‚å¸¸æ£€æµ‹ã€‚æœ¬æ–‡åœ¨å……åˆ†è°ƒç ”å›½å†…å¤–ç¦»ç¾¤ç‚¹æŒ–æ˜ç ”ç©¶æˆæœçš„åŸºç¡€ä¸Šï¼Œä»‹ç»äº†ç¦»ç¾¤ç‚¹æŒ–æ˜çš„ç ”ç©¶è¿›å±•ï¼Œå¹¶æ¦‚è¦åœ°æ€»ç»“å’Œæ¯”è¾ƒäº†å·²æœ‰çš„å„ç§ç¦»ç¾¤ç‚¹æŒ–æ˜æ–¹æ³•ï¼Œå±•æœ›äº†ç¦»ç¾¤ç‚¹æŒ–æ˜ç ”ç©¶çš„æœªæ¥å‘å±•æ–¹å‘å’Œé¢ä¸´çš„æŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;h2&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;è–›å®‰è£, å§šæ—, é æ—¶å…‰, é™ˆä¼Ÿé¹¤, é©¬æ±‰è¾¾. ç¦»ç¾¤ç‚¹æŒ–æ˜æ–¹æ³•ç»¼è¿°. è®¡ç®—æœºç§‘å­¦. 2008;35(11):13-8.&lt;/li&gt;
&lt;li&gt;Aggarwal CC, Yu PS. Outlier detection for high dimensional data. InACM Sigmod Record 2001 May 1 (Vol. 30, No. 2, pp. 37-46). &lt;/li&gt;
&lt;li&gt;Han Jiaweiã€‚Micheline K.Data mining:concepts and techniques.3th edition.San Francisco..Morgan Kaufmann Publishers,2012&lt;/li&gt;
&lt;li&gt;é­è—œ, å®«å­¦åº†, é’±å«å®, å‘¨å‚²è‹±. é«˜ç»´ç©ºé—´ä¸­çš„ç¦»ç¾¤ç‚¹å‘ç°. è½¯ä»¶å­¦æŠ¥. 2002;13(2):280-90.&lt;/li&gt;
&lt;li&gt;Aggarwal CC, Yu PS. Outlier detection for high dimensional data. InACM Sigmod Record 2001 May 1 (Vol. 30, No. 2, pp. 37-46). &lt;/li&gt;
&lt;li&gt;WU, Shu, WANG, Shengrui. Information-theoretic outlier detection for large-scale categorical data.Â &lt;em&gt;IEEE transactions on knowledge and data engineering&lt;/em&gt;, 2013, 25.3: 589-602.&lt;/li&gt;
&lt;li&gt;å¼ å‡€, å­™å¿—æŒ¥, å®‹ä½™åº†, å€ªå·ä¼Ÿ, &amp;amp; æ™ç‡•å. (2011). åŸºäºä¿¡æ¯è®ºçš„é«˜ç»´æµ·é‡æ•°æ®ç¦»ç¾¤ç‚¹æŒ–æ˜.Â &lt;em&gt;è®¡ç®—æœºç§‘å­¦&lt;/em&gt;,Â &lt;em&gt;38&lt;/em&gt;(7), 148-151. &lt;/li&gt;
&lt;/ol&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="big data"></category><category term="data mining"></category><category term="Outlier"></category><category term="å¼‚å¸¸æ£€æµ‹"></category><category term="æ—¶åºæ•°æ®"></category></entry><entry><title>åŸºäºSPARKçš„åˆ†å¸ƒå¼ç½‘é¡µè¿‘ä¼¼åº¦æ£€æµ‹</title><link href="https://blog.chih.me/simjoin-on-spark.html" rel="alternate"></link><published>2017-07-09T00:00:00+08:00</published><updated>2017-07-09T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2017-07-09:/simjoin-on-spark.html</id><summary type="html">&lt;h2&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;éšç€Webä¸Šæ•°é‡çš„æ€¥å‰§å¢é•¿ï¼Œè¿‘ä¼¼é•œåƒç½‘é¡µçš„æ•°é‡ä¹Ÿåœ¨ä¸æ–­å¢åŠ ã€‚è¿‘ä¼¼é•œåƒç½‘é¡µçš„å­˜åœ¨ï¼Œä¸¥é‡å½±å“äº†æœç´¢å¼•æ“çš„æ£€ç´¢ç»“æœã€‚å¦‚æœæˆ‘ä»¬èƒ½å°†æœé›†åˆ°çš„ç½‘é¡µä¸­çš„è¿‘ä¼¼é•œåƒç½‘é¡µå»æ‰ï¼Œå¯ä»¥æé«˜æœé›†ç³»ç»Ÿå’Œç´¢å¼•ç³»ç»Ÿæ•ˆç‡ï¼Œç”¨æˆ·æŸ¥è¯¢æ—¶ä¹Ÿä¸ä¼šå‡ºç°å¤§é‡å†…å®¹é‡å¤çš„ç½‘é¡µã€‚å»é™¤é•œåƒç½‘é¡µå³éœ€è¦ç½‘é¡µè¿‘ä¼¼åº¦æ£€æµ‹ç®—æ³•ã€‚å®éªŒåŸºäºç›¸ä¼¼æ€§è¿æ¥å®ç°äº†åŸºäºSPARKçš„åˆ†å¸ƒå¼ç½‘é¡µè¿‘ä¼¼åº¦æ£€æµ‹ï¼Œå¯¹5000ä¸ªç½‘é¡µè¿›è¡Œäº†ç›¸ä¼¼åº¦æ£€æµ‹ï¼Œè¯•å›¾æ‰¾å‡ºæ‰€æœ‰ç›¸ä¼¼çš„ç½‘é¡µã€‚å®éªŒä½¿ç”¨çš„ç½‘é¡µæ¥æºä¸äººæ‰æ‹›è˜ç½‘ç«™çš„ç”µå­ç®€å†ï¼Œå…±æœ‰5000ä»½ï¼Œç”±äºæˆ‘ä»¬åªå…³å¿ƒå…¶ä¸­çš„ç®€å†å†…å®¹ï¼Œå› æ­¤éœ€è¦å»é™¤ç®€å†å†…å®¹å¤–çš„HTMLæ ‡ç­¾ï¼Œç½‘é¡µæ ·å¼ã€ä»£ç ã€‚åœ¨å»é™¤äº†æ— å…³å†…å®¹åï¼Œå³å¯è¿›è¡Œè¿‘ä¼¼æ£€æµ‹ï¼Œå¤§æ•°æ®ç¯å¢ƒä¸‹ï¼Œæ•°æ®é‡å·¨å¤§ï¼Œè¿ç”¨ä¼ ç»Ÿçš„æ–¹å¼è¿›è¡Œç›¸ä¼¼æ€§è¿æ¥æ•ˆç‡æä½ï¼Œå®éªŒé€‰æ‹©äº†ç›¸ä¼¼æ€§è¿æ¥æŸ¥è¯¢ä½œä¸ºåº•å±‚çš„ç®—æ³•å®ç°ï¼Œä½œä¸ºä¸€ç§åˆ†å¸ƒå¼ç®—æ³•ï¼Œå®éªŒé€‰æ‹©äº†Sparkä½œä¸ºåˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸ä¼¼æ€§è¿æ¥æŸ¥è¯¢ï¼Œå³æŸ¥æ‰¾ç›¸ä¼¼çš„æ•°æ®å¯¹è±¡å¯¹ï¼Œå…·æœ‰å¹¿æ³›çš„åº”ç”¨é¢†åŸŸï¼Œä¾‹å¦‚ç›¸ä¼¼ç½‘é¡µæ£€ã€å®ä½“è§£æã€æ•°æ®æ¸…æ´—å’Œç›¸ä¼¼å›¾åƒæ£€ç´¢ç­‰ã€‚ åœ¨ç›¸ä¼¼ç½‘é¡µæ£€æµ‹ä¸­ï¼Œä½¿ç”¨ç›¸ä¼¼æ€§è¿æ¥ç­‰æŠ€æœ¯è¯†åˆ«ç›¸ä¼¼çš„ç½‘é¡µï¼Œä¸ä½†å¯ä»¥å¸®åŠ©ç½‘é¡µæœç´¢å¼•æ“æ‰§è¡Œèšç„¦çˆ¬è¡Œï¼Œæé«˜æœç´¢ç»“æœçš„è´¨é‡å’Œå¤šæ ·æ€§ï¼Œè¿˜å¯ä»¥è¯†åˆ«åƒåœ¾é‚®ä»¶ã€‚åœ¨å®ä½“è§£æä¸­ï¼Œä½¿ç”¨ç›¸ä¼¼æ€§è¿æ¥æŠ€æœ¯ï¼Œå¯ä»¥æ‰¾åˆ°ä¼ä¸šæ•°æ®åº“é‡Œç›¸ä¼¼çš„é¡¾å®¢ï¼ŒåŒ¹é…äº§å“æŠ¥ä»·ç­‰ã€‚åœ¨æ•°æ®æ¸…æ´—ä¸­ï¼Œä½¿ç”¨ç›¸ä¼¼æ€§è¿æ¥æŠ€æœ¯ï¼Œå¯ä»¥ä¸ºä¸åŒæ•° æ®æºé›†æˆæä¾›ä¸€è‡´ã€å‡†ç¡®çš„æ•°æ®ã€‚åœ¨ç›¸ä¼¼å›¾åƒæ£€ç´¢ ä¸­ï¼Œä½¿ç”¨ç›¸ä¼¼æ€§è¿æ¥æŠ€æœ¯æ£€ç´¢å‡ºç›¸ä¼¼çš„å›¾åƒï¼Œå¯ä»¥åˆ†æå›¾åƒçš„æ¥æº â€¦&lt;/p&gt;</summary><content type="html">&lt;h2&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;éšç€Webä¸Šæ•°é‡çš„æ€¥å‰§å¢é•¿ï¼Œè¿‘ä¼¼é•œåƒç½‘é¡µçš„æ•°é‡ä¹Ÿåœ¨ä¸æ–­å¢åŠ ã€‚è¿‘ä¼¼é•œåƒç½‘é¡µçš„å­˜åœ¨ï¼Œä¸¥é‡å½±å“äº†æœç´¢å¼•æ“çš„æ£€ç´¢ç»“æœã€‚å¦‚æœæˆ‘ä»¬èƒ½å°†æœé›†åˆ°çš„ç½‘é¡µä¸­çš„è¿‘ä¼¼é•œåƒç½‘é¡µå»æ‰ï¼Œå¯ä»¥æé«˜æœé›†ç³»ç»Ÿå’Œç´¢å¼•ç³»ç»Ÿæ•ˆç‡ï¼Œç”¨æˆ·æŸ¥è¯¢æ—¶ä¹Ÿä¸ä¼šå‡ºç°å¤§é‡å†…å®¹é‡å¤çš„ç½‘é¡µã€‚å»é™¤é•œåƒç½‘é¡µå³éœ€è¦ç½‘é¡µè¿‘ä¼¼åº¦æ£€æµ‹ç®—æ³•ã€‚å®éªŒåŸºäºç›¸ä¼¼æ€§è¿æ¥å®ç°äº†åŸºäºSPARKçš„åˆ†å¸ƒå¼ç½‘é¡µè¿‘ä¼¼åº¦æ£€æµ‹ï¼Œå¯¹5000ä¸ªç½‘é¡µè¿›è¡Œäº†ç›¸ä¼¼åº¦æ£€æµ‹ï¼Œè¯•å›¾æ‰¾å‡ºæ‰€æœ‰ç›¸ä¼¼çš„ç½‘é¡µã€‚å®éªŒä½¿ç”¨çš„ç½‘é¡µæ¥æºä¸äººæ‰æ‹›è˜ç½‘ç«™çš„ç”µå­ç®€å†ï¼Œå…±æœ‰5000ä»½ï¼Œç”±äºæˆ‘ä»¬åªå…³å¿ƒå…¶ä¸­çš„ç®€å†å†…å®¹ï¼Œå› æ­¤éœ€è¦å»é™¤ç®€å†å†…å®¹å¤–çš„HTMLæ ‡ç­¾ï¼Œç½‘é¡µæ ·å¼ã€ä»£ç ã€‚åœ¨å»é™¤äº†æ— å…³å†…å®¹åï¼Œå³å¯è¿›è¡Œè¿‘ä¼¼æ£€æµ‹ï¼Œå¤§æ•°æ®ç¯å¢ƒä¸‹ï¼Œæ•°æ®é‡å·¨å¤§ï¼Œè¿ç”¨ä¼ ç»Ÿçš„æ–¹å¼è¿›è¡Œç›¸ä¼¼æ€§è¿æ¥æ•ˆç‡æä½ï¼Œå®éªŒé€‰æ‹©äº†ç›¸ä¼¼æ€§è¿æ¥æŸ¥è¯¢ä½œä¸ºåº•å±‚çš„ç®—æ³•å®ç°ï¼Œä½œä¸ºä¸€ç§åˆ†å¸ƒå¼ç®—æ³•ï¼Œå®éªŒé€‰æ‹©äº†Sparkä½œä¸ºåˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸ä¼¼æ€§è¿æ¥æŸ¥è¯¢ï¼Œå³æŸ¥æ‰¾ç›¸ä¼¼çš„æ•°æ®å¯¹è±¡å¯¹ï¼Œå…·æœ‰å¹¿æ³›çš„åº”ç”¨é¢†åŸŸï¼Œä¾‹å¦‚ç›¸ä¼¼ç½‘é¡µæ£€ã€å®ä½“è§£æã€æ•°æ®æ¸…æ´—å’Œç›¸ä¼¼å›¾åƒæ£€ç´¢ç­‰ã€‚ åœ¨ç›¸ä¼¼ç½‘é¡µæ£€æµ‹ä¸­ï¼Œä½¿ç”¨ç›¸ä¼¼æ€§è¿æ¥ç­‰æŠ€æœ¯è¯†åˆ«ç›¸ä¼¼çš„ç½‘é¡µï¼Œä¸ä½†å¯ä»¥å¸®åŠ©ç½‘é¡µæœç´¢å¼•æ“æ‰§è¡Œèšç„¦çˆ¬è¡Œï¼Œæé«˜æœç´¢ç»“æœçš„è´¨é‡å’Œå¤šæ ·æ€§ï¼Œè¿˜å¯ä»¥è¯†åˆ«åƒåœ¾é‚®ä»¶ã€‚åœ¨å®ä½“è§£æä¸­ï¼Œä½¿ç”¨ç›¸ä¼¼æ€§è¿æ¥æŠ€æœ¯ï¼Œå¯ä»¥æ‰¾åˆ°ä¼ä¸šæ•°æ®åº“é‡Œç›¸ä¼¼çš„é¡¾å®¢ï¼ŒåŒ¹é…äº§å“æŠ¥ä»·ç­‰ã€‚åœ¨æ•°æ®æ¸…æ´—ä¸­ï¼Œä½¿ç”¨ç›¸ä¼¼æ€§è¿æ¥æŠ€æœ¯ï¼Œå¯ä»¥ä¸ºä¸åŒæ•° æ®æºé›†æˆæä¾›ä¸€è‡´ã€å‡†ç¡®çš„æ•°æ®ã€‚åœ¨ç›¸ä¼¼å›¾åƒæ£€ç´¢ ä¸­ï¼Œä½¿ç”¨ç›¸ä¼¼æ€§è¿æ¥æŠ€æœ¯æ£€ç´¢å‡ºç›¸ä¼¼çš„å›¾åƒï¼Œå¯ä»¥åˆ†æå›¾åƒçš„æ¥æºï¼ŒæŸ¥æ‰¾é«˜æ¸…å›¾åƒç­‰ï¼Œå½“å‰æ¯”è¾ƒå¸¸ç”¨çš„æœ‰å­—ç¬¦ä¸²ã€é›†åˆå’Œå‘é‡çš„ç›¸ä¼¼æ€§è¿æ¥ç®—æ³•ã€‚&lt;/p&gt;
&lt;h2&gt;é€‰ç”¨å¹³å°æè¿°&lt;/h2&gt;
&lt;p&gt;å®éªŒè¿ç”¨çš„æ˜¯sparkå¹³å°ï¼Œé€‰æ‹©çš„ç¼–ç¨‹è¯­è¨€æ˜¯scalaä¸­ï¼Œæ“ä½œç³»ç»Ÿæ˜¯ubuntuã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;sparkï¼š2.1.0&lt;/li&gt;
&lt;li&gt;Scalaï¼š2.10.6&lt;/li&gt;
&lt;li&gt;Ubuntu 16.04.2 LTS&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;æ•°æ®é›†æè¿°&lt;/h2&gt;
&lt;p&gt;åŸå§‹æ•°æ®é›†ä¸º5000ä¸ªå·¦å³çš„ç®€å†ç½‘é¡µï¼Œ å¤§è‡´æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170611_195353" src="images/Screenshot_20170611_195353.png" width="70%"&gt;&lt;/p&gt;
&lt;p&gt;ç»è¿‡åˆ†è¯ï¼Œå»é™¤é‡å¤è¯ï¼ŒHTMLæ ‡ç­¾ï¼Œåœç”¨è¯åï¼Œè¾“å‡ºå¦‚ä¸‹ï¼Œä½œä¸ºSparkæ–‡æ¡£è¿‘ä¼¼åº¦æ£€æµ‹çš„è¾“å…¥æºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170611_195748" src="images/Screenshot_20170611_195748.png" width="80%"&gt;&lt;/p&gt;
&lt;h2&gt;è®¾è®¡é€»è¾‘&lt;/h2&gt;
&lt;h3&gt;æ•°æ®æ¸…æ´—ä¸ä¸­æ–‡åˆ†è¯&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#! /bin/python&lt;/span&gt;

&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pyquery&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;PyQuery&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;jieba&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;

&lt;span class="n"&gt;STOP_WORDS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;frozenset&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;a&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;an&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;and&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;are&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;as&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;at&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;be&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;by&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s1"&gt;&amp;#39;for&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;from&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;have&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;if&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;in&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;is&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;it&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;may&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s1"&gt;&amp;#39;not&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;of&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;on&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;or&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tbd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;that&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;the&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;this&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s1"&gt;&amp;#39;to&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;us&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;we&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;when&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;will&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;with&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;yet&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s1"&gt;&amp;#39;you&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;your&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;çš„&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;äº†&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;å’Œ&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;


&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dirs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;walk&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;webResume&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;web_file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;PyQuery&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;web_file&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;style&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;script&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;text&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;seg_list&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;jieba&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cut&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;results&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;seg_list&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;STOP_WORDS&lt;/span&gt;
        &lt;span class="n"&gt;write_file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;./jiebafiles/&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;.txt&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;w&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;write_file&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;results&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éå†ç›®å½•ä¸‹çš„æ‰€æœ‰htmlæ–‡ä»¶ï¼Œå»é™¤htmlæ–‡ä»¶ä¸­çš„æ‰€æœ‰æ ‡ç­¾ã€æ ·å¼ã€ä»£ç ã€‚ä½¿ç”¨ä¸­æ–‡åˆ†è¯å¯¹è¿‡æ»¤åçš„HTMLæ–‡ä»¶è¿›è¡Œåˆ†è¯ï¼ŒåŒæ—¶è¿‡æ»¤æ‰é‡å¤çš„è¯ã€åœç”¨è¯ï¼Œç•™ä¸‹è¿™ä»½ç®€å†ç½‘é¡µçš„å…³é”®è¯ï¼Œå†™å…¥å¦ä¸€ä»½æ–‡ä»¶ï¼Œä½œä¸ºè¿‘ä¼¼åº¦æ£€æµ‹çš„è¾“å…¥ã€‚&lt;/p&gt;
&lt;h3&gt;è¿‘ä¼¼åº¦æ£€æµ‹&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.spark.SparkContext&lt;/span&gt;
&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.spark.SparkConf&lt;/span&gt;


&lt;span class="k"&gt;object&lt;/span&gt; &lt;span class="nc"&gt;SimJoin&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;Array&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="kt"&gt;String&lt;/span&gt;&lt;span class="o"&gt;])&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;conf&lt;/span&gt; &lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nc"&gt;SparkConf&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="n"&gt;setAppName&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SimJion&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="n"&gt;setMaster&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;master&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;var&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt; &lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nc"&gt;SparkContext&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;conf&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;var&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;wholeTextFiles&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
      &lt;span class="s"&gt;&amp;quot;/home/chih/BD/spark-2.1.1-bin-hadoop2.7/jiebafiles/*.txt&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;var&lt;/span&gt; &lt;span class="n"&gt;pairs&lt;/span&gt; &lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;flatMap&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;rid&lt;/span&gt; &lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_1&lt;/span&gt; &lt;span class="c1"&gt;// æ–‡ä»¶å&lt;/span&gt;
      &lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt; &lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_2&lt;/span&gt; &lt;span class="c1"&gt;// æ–‡ä»¶å†…å®¹&lt;/span&gt;
      &lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;tokens&lt;/span&gt; &lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;// åˆ†å‰²&lt;/span&gt;
        &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isEmpty&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;// ç§»é™¤ç©ºtoken&lt;/span&gt;
      &lt;span class="k"&gt;var&lt;/span&gt; &lt;span class="n"&gt;map&lt;/span&gt; &lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tokens&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;groupBy&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;identity&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="n"&gt;mapValues&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;_&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
      &lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="o"&gt;({&lt;/span&gt; &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rid&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tokens&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;})&lt;/span&gt;
    &lt;span class="o"&gt;})&lt;/span&gt;
    &lt;span class="k"&gt;var&lt;/span&gt; &lt;span class="n"&gt;groups&lt;/span&gt; &lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pairs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;groupByKey&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="n"&gt;flatMap&lt;/span&gt;&lt;span class="o"&gt;({&lt;/span&gt; &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;u&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;=&amp;gt;&lt;/span&gt;
      &lt;span class="n"&gt;u&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;toList&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;combinations&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
        &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;(((&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_2&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="n"&gt;_1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="n"&gt;_2&lt;/span&gt;&lt;span class="o"&gt;)),&lt;/span&gt; 
                   &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nc"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_3&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="n"&gt;_3&lt;/span&gt;&lt;span class="o"&gt;))))&lt;/span&gt;
    &lt;span class="o"&gt;})&lt;/span&gt;
    &lt;span class="k"&gt;var&lt;/span&gt; &lt;span class="n"&gt;grouped&lt;/span&gt; &lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="n"&gt;groups&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reduceByKey&lt;/span&gt;&lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_2&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_2&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
    &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_2&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;min_t&lt;/span&gt; &lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;0.4&lt;/span&gt;
    &lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;max_t&lt;/span&gt; &lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;0.99&lt;/span&gt;
    &lt;span class="k"&gt;var&lt;/span&gt; &lt;span class="n"&gt;results&lt;/span&gt; &lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="n"&gt;grouped&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;toDouble&lt;/span&gt; 
                                    &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_2&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_2&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_2&lt;/span&gt;&lt;span class="o"&gt;)))&lt;/span&gt;
      &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_3&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="n"&gt;min_t&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_3&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;max_t&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;results&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;take&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="n"&gt;foreach&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stop&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä»ç›®å½•ä¸­è¯»å–æ‰€æœ‰å·²ç»ç»è¿‡åˆ†è¯çš„ç®€ä»‹æ–‡æ¡£ï¼Œç”Ÿæˆæ–‡ä»¶åã€æ–‡ä»¶å†…å®¹çš„å¯¹ï¼Œä¾›åç»­å¤„ç†ã€‚å»ºç«‹å€’æ’ç´¢å¼•ï¼Œå°†è®°å½•çš„RIDæ’å…¥åˆ°å…¶é¡¹ç›®çš„å€’æ’ç´¢å¼•ä¸­çš„å¯¹åº”Itemä¸­ã€‚ç”Ÿæˆå€™é€‰é›†ï¼Œé€šè¿‡å€’æ’ç´¢å¼•çš„itemä¸¤ä¸¤é…å¯¹ç”Ÿæˆå€™é€‰å¯¹ï¼Œå¹¶è®°å½•ç›¸åŒå€™é€‰å¯¹çš„æ•°é‡ï¼Œä»è€Œæœ€ç»ˆç”Ÿæˆæœ€ç»ˆçš„å€™é€‰é›†ã€‚
ä»å€™é€‰é›†ä¸­æ‰¾å‡ºç¬¦åˆè¦æ±‚çš„ç»“æœï¼Œé€šè¿‡Jaccard ç³»æ•°é˜ˆå€¼è®¡ç®—å‡ºå¯¹åº”çš„ç›¸ä¼¼åº¦é˜ˆå€¼ï¼Œä»è€Œåœ¨å€™é€‰é›†ä¸­æ‰¾å‡ºç›¸åº”çš„ç»“æœã€‚&lt;/p&gt;
&lt;h2&gt;è¿è¡Œéƒ¨ç½²æè¿°&lt;/h2&gt;
&lt;p&gt;Spark å®˜æ–¹æä¾›äº†ä¸‰ç§é›†ç¾¤éƒ¨ç½²æ–¹æ¡ˆï¼š Standalone, Mesos, YARNã€‚åœ¨è¯•éªŒç¯å¢ƒä¸‹ï¼ŒStandalone æ¨¡å¼å°±è¶³å¤Ÿäº†ï¼Œå› æ­¤æœ¬å®éªŒé€‰ç”¨Standalone æ¨¡å¼ã€‚å¦‚æœå¦‚æœå·²ç»æœ‰ Yarn æˆ–è€… Mesos ç¯å¢ƒï¼Œä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿åœ°è¿ç§»åˆ°æ–°çš„èµ„æºè°ƒåº¦æ¡†æ¶ä¸Šçš„ã€‚&lt;/p&gt;
&lt;h3&gt;æ³¨æ„&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†é¿å…æƒé™é—®é¢˜å½±å“å®éªŒï¼Œæœ¬ä¾‹ä¸­çš„æ¼”ç¤ºå‡ä¸º root æƒé™ï¼Œå½“ç„¶åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œéœ€è¦ä½¿ç”¨å•ç‹¬çš„ç”¨æˆ·å¯åŠ¨è¿è¡ŒSparkã€‚æ³¨æ„ï¼Œé™¤éç‰¹åˆ«è¯´æ˜ï¼Œæ‰€æœ‰çš„æ“ä½œéœ€è¦åœ¨æ¯å°æœºå™¨ä¸Šéƒ½æ“ä½œä¸€éï¼Œä½ å¯ä»¥ä½¿ç”¨Xshellï¼Œansibleç®€åŒ–æ“ä½œã€‚&lt;/p&gt;
&lt;h3&gt;ç¯å¢ƒå‡†å¤‡&lt;/h3&gt;
&lt;h4&gt;å®‰è£…ç³»ç»Ÿ&lt;/h4&gt;
&lt;p&gt;æˆ‘ä½¿ç”¨VirtualBoxè™šæ‹Ÿæœºè½¯ä»¶åˆ›å»ºä¸‰å°UbuntuæœåŠ¡å™¨ï¼Œå‡ä½¿ç”¨çº¯å‡€å®‰è£…ï¼Œé›†ç¾¤å‡†å¤‡ä¸º1ä¸ªmasterï¼Œ2ä¸ªslaveã€‚æ¯å°çš„å‡é…ç½®ä¸¤å¼ ç½‘å¡ï¼Œå…¶ä¸­ä¸€å¼ natç½‘ç»œï¼Œç”¨äºè¿æ¥å¤–ç½‘ï¼Œæ›´æ–°å®‰è£…è½¯ä»¶åŒ…ç”¨ï¼Œå¦ä¸€å¼ ä½¿ç”¨host-onlyæ¨¡å¼ï¼Œç”¨äºå®¿ä¸»æœºå’Œè™šæ‹Ÿæœºã€ è™šæ‹Ÿæœºç›´æ¥é€šè®¯ä½¿ç”¨ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170611_190618" src="images/Screenshot_20170611_190618.png" width="80%"&gt;&lt;/p&gt;
&lt;h4&gt;é…ç½®hosts&lt;/h4&gt;
&lt;p&gt;Host-Onlyç½‘å¡çš„IPåœ°å€æ˜¯é¡ºåºåˆ†é…çš„ï¼Œåœ¨è¿™é‡Œï¼Œä¸‰å°è™šæ‹ŸæœºHost-Onlyç½‘å¡çš„IPåœ°å€åˆ†åˆ«ä¸º 192.168.56.101ã€ 192.168.56.102ã€ 192.168.56.103 ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ¯å°ä¸»æœºä¸Šä¿®æ”¹hostæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹ä¸‰è¡Œã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;vim /etc/hosts

&lt;span class="m"&gt;192&lt;/span&gt;.168.56.101    master
&lt;span class="m"&gt;192&lt;/span&gt;.168.56.102    slave1
&lt;span class="m"&gt;192&lt;/span&gt;.168.56.103    slave2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é…ç½®ä¹‹åç›¸äº’pingä¸€ä¸‹çœ‹æ˜¯å¦ç”Ÿæ•ˆã€‚&lt;/p&gt;
&lt;h4&gt;é…ç½®SSH å…å¯†ç ç™»å½•&lt;/h4&gt;
&lt;p&gt;å®‰è£…Openssh server&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt install openssh-server
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨æ‰€æœ‰æœºå™¨ä¸Šéƒ½ç”Ÿæˆç§é’¥å’Œå…¬é’¥&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ssh-keygen -t rsa   &lt;span class="c1"&gt;#ä¸€è·¯å›è½¦&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éœ€è¦è®©æœºå™¨é—´éƒ½èƒ½ç›¸äº’è®¿é—®ï¼Œå°±æŠŠæ¯ä¸ªæœºå­ä¸Šçš„id_rsa.pubå‘ç»™masterèŠ‚ç‚¹ï¼Œä¼ è¾“å…¬é’¥å¯ä»¥ç”¨scpæ¥ä¼ è¾“ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;scp ~/.ssh/id_rsa.pub spark@master:~/.ssh/id_rsa.pub.slave1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨masterä¸Šï¼Œå°†æ‰€æœ‰å…¬é’¥åŠ åˆ°ç”¨äºè®¤è¯çš„å…¬é’¥æ–‡ä»¶authorized_keysä¸­&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cat ~/.ssh/id_rsa.pub* &amp;gt;&amp;gt; ~/.ssh/authorized_keys
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å°†å…¬é’¥æ–‡ä»¶authorized_keysåˆ†å‘ç»™æ¯å°slave&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;scp ~/.ssh/authorized_keys spark@slave1:~/.ssh/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨æ¯å°æœºå­ä¸ŠéªŒè¯SSHæ— å¯†ç é€šä¿¡&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ssh master
ssh slave1
ssh slave2
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;å®‰è£…JDK&lt;/h4&gt;
&lt;p&gt;ç›´æ¥é€šè¿‡åŒ…ç®¡ç†å®‰è£…openJDK 8.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt install openjdk-8-jdk
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é…ç½®ç¯å¢ƒå˜é‡å¹¶ä½¿ä¹‹ç”Ÿæ•ˆï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;## set environment variable&lt;/span&gt;
&lt;span class="s2"&gt;export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;   &amp;gt;&amp;gt; /etc/profile.d/spark.sh

    &lt;span class="nb"&gt;source&lt;/span&gt; /etc/profile.d/spark.sh &lt;span class="c1"&gt;#ä½¿ä¹‹ç”Ÿæ•ˆ&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éªŒè¯ Java æ˜¯å¦å®‰è£…æˆåŠŸ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;java -version         &lt;span class="c1"&gt;#å¦‚æœæ‰“å°å‡ºç‰ˆæœ¬ä¿¡æ¯ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸ&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;å®‰è£…Spark&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¸‹è½½å¹¶å®‰è£…Sparkï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;wget &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;mirror&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;/apache/spark/spark-2.1.0/ &lt;span class="se"&gt;\&lt;/span&gt;
    spark-&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;spark_pkgver&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;-bin-hadoop&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;hadoop_pkgver&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;.tgz

tar -xzvf spark-&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;spark_pkgver&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;-bin-hadoop&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;hadoop_pkgver&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;.tgz
mv spark-&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;spark_pkgver&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;-bin-hadoop&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;hadoop_pkgver&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; /usr/local/spark
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;é…ç½® Spark&lt;/h3&gt;
&lt;p&gt;è¿›å…¥é…ç½®ç›®å½• &lt;code&gt;/usr/local/spark/conf&lt;/code&gt; å‡†å¤‡ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨&lt;code&gt;slaves&lt;/code&gt;ä¸­é…ç½®slaveèŠ‚ç‚¹çš„ipæˆ–è€…hostï¼Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;vim ./slaves

spark-slave1
spark-slave2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é…ç½®&lt;code&gt;spark-env.sh&lt;/code&gt; &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cp /usr/local/spark/conf/spark-env.sh.template /usr/local/spark/conf/spark-env.sh
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;SPARK_MASTER_HOST=master&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /usr/local/spark/conf/spark-env.sh
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;SPARK_LOCAL_IP={ä¿®æ”¹ä¸ºæ¯å°æœºå™¨å¯¹åº”çš„åç§°}&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /usr/local/spark/conf/spark-env.sh
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;å¯åŠ¨Spark&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo -s
su -
sbin/start-all.sh
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚æœæ²¡æœ‰é—®é¢˜ï¼Œè¿›å…¥Sparkçš„Webç®¡ç†é¡µé¢ï¼š &lt;a href="http://master:8080/"&gt;http://master:8080&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170611_193731" src="images/Screenshot_20170611_193731.png" width="80%"&gt;&lt;/p&gt;
&lt;h3&gt;è„šæœ¬å®‰è£…Spark&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†æ–¹ä¾¿éƒ¨ç½²Sparkï¼Œæˆ‘ç®€å•å†™äº†ä¸€ä¸ªShellè„šæœ¬ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å‡ æ­¥æ­å»ºä¸€ä¸ª3èŠ‚ç‚¹çš„Sparké›†ç¾¤ã€‚è„šæœ¬åœ°å€ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/chih7/spark-install/"&gt;https://github.com/chih7/spark-install/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è„šæœ¬åªåœ¨Ubuntu 16.04ä¸‹è¿›è¡Œäº†æµ‹è¯•ï¼Œä½†å…¶ä»–ç‰ˆæœ¬çš„Ubuntuå’Œdebianåº”è¯¥ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆä½¿ç”¨VirtualBoxå®‰è£…ä¸€å°UbuntuæœåŠ¡å™¨ï¼Œåœ¨é‡Œé¢æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo -s
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;su -
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git clone https://github.com/chih7/spark-install.git
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ./spark_install
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;./install-spark.sh
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;reboot
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é‡å¯å®Œæˆåï¼Œ&lt;/p&gt;
&lt;p&gt;å…‹éš†è¿™ä¸ªè™šæ‹Ÿæœºåˆ°ä¸¤å°è™šæ‹Ÿæœºï¼Œè®°å¾—ä¿®æ”¹å…‹éš†æœºçš„é…ç½®æ–‡ä»¶&lt;code&gt;/usr/local/spark/conf/spark-env.sh&lt;/code&gt;ä¸­çš„&lt;code&gt;SPARK_LOCAL_IP&lt;/code&gt;ï¼Œä¹‹åå°±å¯ä»¥å¯åŠ¨Sparké›†ç¾¤äº†ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo -s
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;su -
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;vim  /usr/local/spark/conf/spark-env.sh &lt;span class="c1"&gt;# change  SPARK_LOCAL_IP=spark-xxxx&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/usr/local/spark/sbin/start-all.sh
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;å®éªŒç»“æœæè¿°&lt;/h2&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170611_122340" src="images/Screenshot_20170611_122340.png" width="80%"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170611_182331" src="images/Screenshot_20170611_182331.png" width="80%"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170611_182331" src="images/Screenshot_20170611_195236.png" width="80%"&gt;&lt;/p&gt;
&lt;p&gt;è¿è¡Œä»£ç åï¼Œå¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†ä¸€ä¸ªDAGå›¾ï¼Œå³ä¸ºSparkçš„è®¡ç®—è·¯å¾„ï¼Œå…¶ä¸­æœ‰ä¸‰ä¸ªstageã€‚æœ€åè¾“å‡ºäº†è¶…å‡ºä¸€å®šé˜ˆå€¼çš„æ‰€æœ‰ç›¸ä¼¼çš„æ–‡æ¡£å¯¹ï¼ŒåŒæ—¶ç»™å‡ºäº†ç›¸ä¼¼åº¦ç³»æ•°ã€‚&lt;/p&gt;
&lt;h2&gt;å‡ºç°çš„é—®é¢˜&lt;/h2&gt;
&lt;p&gt;åœ¨è¿è¡Œä¸­å‡ºç°&lt;code&gt;java.io.IOException: No space left on device&lt;/code&gt;é”™è¯¯ï¼Œç»è¿‡Googleæœç´¢ï¼Œå‘ç°Sparké»˜è®¤ä½¿ç”¨ &lt;code&gt;/tmp&lt;/code&gt;ç›®å½•å­˜å‚¨ä¸­é—´ç»“æœï¼Œè€Œ&lt;code&gt;/tmp&lt;/code&gt;ç›®å½•ä¸ºtmpfsç›®å½•ï¼Œå‡ºäºå†…å­˜æ–‡ä»¶ç³»ç»Ÿï¼Œé»˜è®¤å¤§å°ä»…ä¸ºå†…å­˜å¤§å°çš„ä¸€åŠã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦è‡ªå®šä¹‰&lt;code&gt;SPARK_LOCAL_DIRS&lt;/code&gt;ç¯å¢ƒå˜é‡åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ç›®å½•ä¸‹ï¼Œæˆ‘è¿™é‡ŒæŠŠå®ƒæ”¹åˆ°äº†Sparkçš„å®‰è£…ç›®å½•ã€‚&lt;/p&gt;</content><category term="linux"></category><category term="Spark"></category><category term="scala"></category><category term="SimJion"></category><category term="ç›¸ä¼¼åº¦æ£€æµ‹"></category></entry><entry><title>ä½¿ç”¨ iptablesã€ipset çš„å…¨å±€æ™ºèƒ½ä»£ç†</title><link href="https://blog.chih.me/global-proxy-within-ipset-and-iptables.html" rel="alternate"></link><published>2017-07-07T00:00:00+08:00</published><updated>2017-07-07T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2017-07-07:/global-proxy-within-ipset-and-iptables.html</id><summary type="html">&lt;p&gt;é¦–å…ˆï¼Œæˆ‘è¿™é‡Œçš„å…¨å±€æ™ºèƒ½ä»£ç†å®ç°çš„åŠŸèƒ½ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åŸºäºiptablesçš„å…¨å±€ä»£ç†ï¼Œåœ¨Linuxä¸‹å¯ä»¥å®ç°åªéœ€è®¾ç½®ä¸€æ¬¡ï¼Œæ‰€æœ‰çš„è½¯ä»¶(æ— è®ºæ˜¯GUIè¿˜æ˜¯CLI)éƒ½å¯ä»¥å…è®¾ç½®è‡ªåŠ¨ä½¿ç”¨è¿™ä¸ªä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;åŸºäºipsetï¼ŒåŠ å…¥æ‰€æœ‰çš„å›½å†…IPé¡¹ï¼Œå¯¹æ‰€æœ‰tcpæµé‡è¿›è¡Œåˆ¤æ–­ï¼Œé¿å…å¯¹å›½å†…çš„æœåŠ¡è¿›è¡Œä»£ç†ï¼Œä¸€æ–¹é¢å¯ä»¥èŠ‚çœæœåŠ¡å™¨æµé‡ï¼Œå¦ä¸€æ–¹é¢å¯ä»¥äº«å—å›½å†…ipçš„ä¼˜åŠ¿ï¼Œæ¯”å¦‚å›½å†…çš„ç‰ˆæƒè§†é¢‘ã€éŸ³ä¹ï¼Œæœ€åï¼Œé¿å…è¢«å›½å†…ä¸€äº›å’Œæ”¿åºœæœ‰åˆä½œçš„ITä¼ä¸šå‘ç°ä½ ä½¿ç”¨äº†ä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;iptablesæŠŠéœ€è¦ä»£ç†çš„tcpæµé‡äº¤ç»™shadowsocks-libevä¸­çš„ss-redirï¼Œè®©å®ƒä¸ä»£ç†æœåŠ¡å™¨é€šè®¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;è®©æˆ‘ä»¬å¼€å§‹å§ï¼Œåœ¨æœ€å¼€å§‹ï¼Œé¦–å…ˆè¦è¯´æ˜çš„æ˜¯ï¼šè¿™ä»½æ•™ç¨‹åªé€‚ç”¨äºæƒ³è¦è®©ä½ çš„Linuxè®¾å¤‡ä½¿ç”¨ä»£ç†çš„ç”¨æˆ·ï¼ŒåŒæ—¶ï¼Œä¸‹æ–‡çš„æ‰€æœ‰å†…å®¹å‡è®¾ä½ è¿è¡Œçš„æ˜¯Arch Linuxã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;è®¾ç½® iptables&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆï¼Œåœ¨&lt;code&gt;/etc/iptables&lt;/code&gt;ç›®å½•ä¸‹åˆ›å»ºä¸€ä»½æ–°çš„è§„åˆ™ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Transparent SOCKS proxy&lt;/span&gt;

&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;nat&lt;/span&gt;
&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;PREROUTING&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;OUTPUT&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;POSTROUTING â€¦&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;é¦–å…ˆï¼Œæˆ‘è¿™é‡Œçš„å…¨å±€æ™ºèƒ½ä»£ç†å®ç°çš„åŠŸèƒ½ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åŸºäºiptablesçš„å…¨å±€ä»£ç†ï¼Œåœ¨Linuxä¸‹å¯ä»¥å®ç°åªéœ€è®¾ç½®ä¸€æ¬¡ï¼Œæ‰€æœ‰çš„è½¯ä»¶(æ— è®ºæ˜¯GUIè¿˜æ˜¯CLI)éƒ½å¯ä»¥å…è®¾ç½®è‡ªåŠ¨ä½¿ç”¨è¿™ä¸ªä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;åŸºäºipsetï¼ŒåŠ å…¥æ‰€æœ‰çš„å›½å†…IPé¡¹ï¼Œå¯¹æ‰€æœ‰tcpæµé‡è¿›è¡Œåˆ¤æ–­ï¼Œé¿å…å¯¹å›½å†…çš„æœåŠ¡è¿›è¡Œä»£ç†ï¼Œä¸€æ–¹é¢å¯ä»¥èŠ‚çœæœåŠ¡å™¨æµé‡ï¼Œå¦ä¸€æ–¹é¢å¯ä»¥äº«å—å›½å†…ipçš„ä¼˜åŠ¿ï¼Œæ¯”å¦‚å›½å†…çš„ç‰ˆæƒè§†é¢‘ã€éŸ³ä¹ï¼Œæœ€åï¼Œé¿å…è¢«å›½å†…ä¸€äº›å’Œæ”¿åºœæœ‰åˆä½œçš„ITä¼ä¸šå‘ç°ä½ ä½¿ç”¨äº†ä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;iptablesæŠŠéœ€è¦ä»£ç†çš„tcpæµé‡äº¤ç»™shadowsocks-libevä¸­çš„ss-redirï¼Œè®©å®ƒä¸ä»£ç†æœåŠ¡å™¨é€šè®¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;è®©æˆ‘ä»¬å¼€å§‹å§ï¼Œåœ¨æœ€å¼€å§‹ï¼Œé¦–å…ˆè¦è¯´æ˜çš„æ˜¯ï¼šè¿™ä»½æ•™ç¨‹åªé€‚ç”¨äºæƒ³è¦è®©ä½ çš„Linuxè®¾å¤‡ä½¿ç”¨ä»£ç†çš„ç”¨æˆ·ï¼ŒåŒæ—¶ï¼Œä¸‹æ–‡çš„æ‰€æœ‰å†…å®¹å‡è®¾ä½ è¿è¡Œçš„æ˜¯Arch Linuxã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;è®¾ç½® iptables&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆï¼Œåœ¨&lt;code&gt;/etc/iptables&lt;/code&gt;ç›®å½•ä¸‹åˆ›å»ºä¸€ä»½æ–°çš„è§„åˆ™ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Transparent SOCKS proxy&lt;/span&gt;

&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;nat&lt;/span&gt;
&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;PREROUTING&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;OUTPUT&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;POSTROUTING&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;REDSOCKS&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# Redirect all output through redsocks&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;OUTPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;REDSOCKS&lt;/span&gt;

&lt;span class="c1"&gt;# Whitelist LANs and some other reserved addresses.&lt;/span&gt;
&lt;span class="c1"&gt;# https://en.wikipedia.org/wiki/Reserved_IP_addresses#Reserved_IPv4_addresses&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;REDSOCKS&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;RETURN&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;REDSOCKS&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mf"&gt;10.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;RETURN&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;REDSOCKS&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mf"&gt;127.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;RETURN&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;REDSOCKS&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mf"&gt;169.254&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;RETURN&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;REDSOCKS&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mf"&gt;172.16&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;RETURN&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;REDSOCKS&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mf"&gt;192.168&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;RETURN&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;REDSOCKS&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mf"&gt;224.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;RETURN&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;REDSOCKS&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mf"&gt;240.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;RETURN&lt;/span&gt;

&lt;span class="c1"&gt;# whitelist China ip.&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;REDSOCKS&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;match&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt; &lt;span class="n"&gt;china&lt;/span&gt; &lt;span class="n"&gt;dst&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;RETURN&lt;/span&gt;
&lt;span class="c1"&gt;# import shadowsocks server ip&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;REDSOCKS&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="n"&gt;xxx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xxx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xxx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xxx&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;RETURN&lt;/span&gt;
&lt;span class="c1"&gt;# shadowsocks server port&lt;/span&gt;
&lt;span class="c1"&gt;#-A REDSOCKS -p tcp --dport xxxx -j RETURN&lt;/span&gt;

&lt;span class="c1"&gt;# Redirect everything else to redsocks port&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;REDSOCKS&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;REDIRECT&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ports&lt;/span&gt; &lt;span class="mi"&gt;1081&lt;/span&gt;

&lt;span class="n"&gt;COMMIT&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™ä»½é…ç½®æ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½æ˜¯ï¼ŒæŠŠæ‰€æœ‰çš„tcpæµé‡(ä¸åŒ…æ‹¬ä¸€äº›ä¿ç•™çš„ipæ®µï¼ŒåŒ…æ‹¬å±€åŸŸç½‘ç½‘æ®µï¼›ä½¿ç”¨ipsetå­˜å‚¨çš„æ‰€æœ‰ä¸­å›½ipæ®µï¼Œå…³äºipsetåæ–‡è®²ï¼›ä»£ç†æœåŠ¡å™¨è‡ªå·±çš„ipæˆ–ç«¯å£ï¼Œè¿™æ˜¯ä¸ºäº†é¿å…ä»£ç†è‡ªå·±ä¸è¦å†è¢«é‡å®šå‘ï¼Œç«¯å£æˆ–ipé€‰æ‹©ä¸€ä¸ªå°±è¡Œ)&lt;/p&gt;
&lt;p&gt;ç„¶åæŠŠè¿™ä»½è§„åˆ™è½¯é“¾æ¥åˆ°&lt;code&gt;/etc/iptables/iptables.rules&lt;/code&gt;ï¼Œå¯åŠ¨iptableså¹¶è®¾ç½®å¼€æœºå¯åŠ¨ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo systemctl start iptables.service
sudo systemctl enable iptables.service
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;é…ç½®ipset&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ipsetæ˜¯ Linux é˜²ç«å¢™iptablesçš„ä¸€ä¸ªä¼´éšå·¥å…·ã€‚å®ƒå…è®¸ä½ å»ºç«‹è§„åˆ™æ¥è½»æ¾æ„‰å¿«åœ°å±è”½ä¸€ç»„IPåœ°å€ã€‚
ipsetå¯ä»¥æŠŠå¤§é‡ipæˆ–ipæ®µå­˜å‚¨åœ¨ä¸€ä¸ªsetä¸­ï¼Œå®é™…ä¸Šè¿™ä¸ªsetæ˜¯ä¸€ä¸ªé«˜æ•ˆçš„æŸ¥è¯¢ç»“æ„ï¼Œæœç´¢çš„é€»è¾‘ä¾ç„¶åœ¨iptablesæœ¬èº«ï¼Œiptablesä¼šåˆ¤æ–­IPåœ°å€æˆ–è€…å“ªä¸ªåˆ«çš„ä»€ä¹ˆå­—æ®µåœ¨ä¸åœ¨è¿™ä¸ªsetä¸­ï¼Œåˆ¤æ–­çš„è¿‡ç¨‹ä½¿ç”¨äºŒå‰æ ‘ï¼Œå“ˆå¸Œç­‰ç®—æ³•å› æ­¤éå¸¸é«˜æ•ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¾æ¬¡æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Destroy ipset if it already exists
sudo systemctl stop iptables.service 
sudo ipset destroy china

# Create the ipset list
sudo ipset -N china hash:net

# remove any old list that might exist from previous runs of this script
rm cn.zone

# Pull the latest IP set for China
wget -P . http://www.ipdeny.com/ipblocks/data/countries/cn.zone

# Add each IP address from the downloaded list into the ipset &amp;#39;china&amp;#39;
# for i in $(cat ./cn.zone ); do ipset -A china $i; done
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ‰§è¡Œå®Œæˆåï¼Œæ‰€æœ‰ä¸­å›½ipå·²ç»é€šè¿‡ipsetä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¯ä»¥è¢«iptableè°ƒç”¨ï¼Œå‚è§ä¸Šæ–‡ä¸­çš„iptablesè§„åˆ™&lt;code&gt;-A REDSOCKS -p tcp -m set --match-set china dst -j RETURN&lt;/code&gt;ï¼Œä¸€æ—¦é‡åˆ°tcpåŒ…ï¼Œå…¶ç›®æ ‡åœ°å€ä¸ºåä¸ºchinaçš„ipsetä¸­çš„ipï¼Œå°±ç›´æ¥æ”¾è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰åˆ›å»ºçš„ipseå­˜åœ¨äºå†…å­˜ä¸­ï¼Œé‡å¯åå°†ä¼šæ¶ˆå¤±ã€‚è¦ä½¿ipsetæŒä¹…åŒ–ï¼Œè¦è¿™æ ·åšï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ipset save &amp;gt; /etc/ipset.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åŒæ—¶æŠŠipsetè®¾ç½®ä¸ºå¼€æœºå¯åŠ¨ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo systemctl enable ipset.service
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;é…ç½® ss-redir&lt;/h2&gt;
&lt;p&gt;åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ä¸€ä¸ªæœªä½¿ç”¨çš„ç«¯å£ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯1081ï¼Œåœ¨iptablesçš„è§„åˆ™ä¸­ä¸ä¹‹å¯¹åº”&lt;code&gt;-A REDSOCKS -p tcp -j REDIRECT --to-ports 1081&lt;/code&gt;ï¼Œç„¶åå¯åŠ¨ss-redirï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo systemctl start shadowsocks-libev-redir@config
sudo systemctl enable shadowsocks-libev-redir@config
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æ ·ï¼Œå°±å…¨éƒ¨å®Œæˆäº†ã€‚&lt;/p&gt;</content><category term="Arch Linux"></category><category term="Linux"></category><category term="ipset"></category><category term="iptables"></category><category term="shadowsocks"></category><category term="ä»£ç†"></category></entry><entry><title>æŠ“å–ç½‘é¡µä¸­æ‰€æœ‰PDFé“¾æ¥å¹¶ä¸‹è½½çš„Pythonè„šæœ¬</title><link href="https://blog.chih.me/vldb-downloader.html" rel="alternate"></link><published>2017-07-05T00:00:00+08:00</published><updated>2017-07-05T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2017-07-05:/vldb-downloader.html</id><summary type="html">&lt;h2&gt;è¯´ç‚¹ä»€ä¹ˆ&lt;/h2&gt;
&lt;p&gt;æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå·¥å…·è„šæœ¬ï¼Œä»£ç éƒ½åœ¨ä¸‹é¢ï¼Œå¯èƒ½æ”¹ä¸€ä¸‹åå¯ä»¥é€‚ç”¨äºå…¶ä»–åœ°æ–¹ã€‚&lt;/p&gt;
&lt;h2&gt;ä»£ç &lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/usr/bin/env python3&lt;/span&gt;
&lt;span class="c1"&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;Created on Thu Jul  6 11:04:53 2017&lt;/span&gt;

&lt;span class="sd"&gt;@author: chih&lt;/span&gt;
&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;bs4&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;BeautifulSoup&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;requests&lt;/span&gt;

&lt;span class="n"&gt;BASE_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://www.vldb.org/pvldb/vol10.html&amp;#39;&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;VldbCrawler&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;base_url&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;BASE_URL&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;base_url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base_url&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;fetch_download_link&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self â€¦&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;h2&gt;è¯´ç‚¹ä»€ä¹ˆ&lt;/h2&gt;
&lt;p&gt;æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå·¥å…·è„šæœ¬ï¼Œä»£ç éƒ½åœ¨ä¸‹é¢ï¼Œå¯èƒ½æ”¹ä¸€ä¸‹åå¯ä»¥é€‚ç”¨äºå…¶ä»–åœ°æ–¹ã€‚&lt;/p&gt;
&lt;h2&gt;ä»£ç &lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/usr/bin/env python3&lt;/span&gt;
&lt;span class="c1"&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;Created on Thu Jul  6 11:04:53 2017&lt;/span&gt;

&lt;span class="sd"&gt;@author: chih&lt;/span&gt;
&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;bs4&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;BeautifulSoup&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;requests&lt;/span&gt;

&lt;span class="n"&gt;BASE_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://www.vldb.org/pvldb/vol10.html&amp;#39;&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;VldbCrawler&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;base_url&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;BASE_URL&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;base_url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base_url&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;fetch_download_link&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;page&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BASE_URL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;BeautifulSoup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;page&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;lxml&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;findAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;a&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;pdf_map&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;attrs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;href&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]},&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;pdf_map&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;.pdf&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;pdf_map&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;www.vldb.org&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;pdf_map&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
                &lt;span class="n"&gt;pdf_r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pdf_map&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
                &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;.pdf&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;wb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;pdf_file&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="n"&gt;pdf_file&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pdf_r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetch_download_link&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;


&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;vc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;VldbCrawler&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;vc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="linux"></category><category term="python"></category><category term="crawler"></category></entry><entry><title>Spark SQL ç¬”è®°</title><link href="https://blog.chih.me/spark-sql-ppt.html" rel="alternate"></link><published>2017-06-25T00:00:00+08:00</published><updated>2017-06-25T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2017-06-25:/spark-sql-ppt.html</id><summary type="html">&lt;h2&gt;Spark SQL Overview&lt;/h2&gt;
&lt;p&gt;ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark SQLæ˜¯Apache Sparkä¸­çš„ä¸€ä¸ªæ–°æ¨¡å—&lt;/li&gt;
&lt;li&gt;å°†å…³ç³»å¤„ç†ï¼ˆtables with rows/columnsï¼‰ä¸Sparkçš„åŠŸèƒ½ç¼–ç¨‹APIç›¸é›†æˆ&lt;/li&gt;
&lt;li&gt;é€šè¿‡ SQL æ“ä½œ RDDsï¼Œ åŒæ—¶æä¾›å¤šç§è¯­è¨€ç»‘å®š&lt;/li&gt;
&lt;li&gt;æ•°æ®æºé›†æˆï¼šHive, Parquet, JSON,and more&lt;/li&gt;
&lt;li&gt;æä¾› JDBC/ODBC æ¥å£ä¾›å¤–éƒ¨ç¨‹åºè°ƒç”¨ï¼ˆå•†ä¸šæ™ºèƒ½ã€olapåˆ†æï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›®æ ‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å†™æ›´å°‘çš„ä»£ç &lt;/li&gt;
&lt;li&gt;è¯»æ›´å°‘çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;è·å¾—æ›´é«˜çš„æ€§èƒ½&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;Spark SQL in Spark&lt;/h2&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170522_193655" src="images/Screenshot_20170522_193655.png" width="80%"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark SQL was first released in Spark 1.0 (May, 2014)&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;Relationship â€¦&lt;/h2&gt;</summary><content type="html">&lt;h2&gt;Spark SQL Overview&lt;/h2&gt;
&lt;p&gt;ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark SQLæ˜¯Apache Sparkä¸­çš„ä¸€ä¸ªæ–°æ¨¡å—&lt;/li&gt;
&lt;li&gt;å°†å…³ç³»å¤„ç†ï¼ˆtables with rows/columnsï¼‰ä¸Sparkçš„åŠŸèƒ½ç¼–ç¨‹APIç›¸é›†æˆ&lt;/li&gt;
&lt;li&gt;é€šè¿‡ SQL æ“ä½œ RDDsï¼Œ åŒæ—¶æä¾›å¤šç§è¯­è¨€ç»‘å®š&lt;/li&gt;
&lt;li&gt;æ•°æ®æºé›†æˆï¼šHive, Parquet, JSON,and more&lt;/li&gt;
&lt;li&gt;æä¾› JDBC/ODBC æ¥å£ä¾›å¤–éƒ¨ç¨‹åºè°ƒç”¨ï¼ˆå•†ä¸šæ™ºèƒ½ã€olapåˆ†æï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›®æ ‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å†™æ›´å°‘çš„ä»£ç &lt;/li&gt;
&lt;li&gt;è¯»æ›´å°‘çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;è·å¾—æ›´é«˜çš„æ€§èƒ½&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;Spark SQL in Spark&lt;/h2&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170522_193655" src="images/Screenshot_20170522_193655.png" width="80%"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spark SQL was first released in Spark 1.0 (May, 2014)&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;Relationship to Shark&lt;/h2&gt;
&lt;p&gt;Sparkä¸Šçš„ç¬¬ä¸€ä¸ªå…³ç³»æ•°æ®åº“æ˜¯Sharkï¼Œå®ƒä¿®æ”¹äº†Apache Hiveç³»ç»Ÿï¼Œä½¿ä¹‹èƒ½åœ¨Sparkä¸Šè¿è¡Œï¼Œå¹¶é€šè¿‡Sparkå¼•æ“å®ç°äº†ä¼ ç»Ÿçš„RDBMSä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶Sharkè¡¨ç°å‡ºè‰¯å¥½çš„è¡¨ç°å’Œä¸Sparkè®¡åˆ’èåˆçš„è‰¯å¥½æœºä¼šï¼Œä½†å®ƒæœ‰ä¸‰ä¸ªé‡è¦æŒ‘æˆ˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Sharkåªèƒ½ç”¨äºæŸ¥è¯¢å­˜å‚¨åœ¨Hiveç›®å½•ä¸­çš„å¤–éƒ¨æ•°æ®&lt;/li&gt;
&lt;li&gt;Sparkç¨‹åºè°ƒç”¨Sharkçš„å”¯ä¸€æ–¹æ³•æ˜¯ç»„åˆä¸€ä¸ªSQLå­—ç¬¦ä¸²&lt;/li&gt;
&lt;li&gt;Hiveä¼˜åŒ–å™¨æ˜¯é’ˆå¯¹MapReduceé‡èº«å®šåˆ¶çš„ï¼Œéš¾ä»¥æ‰©å±•ï¼Œéš¾ä»¥æ„å»ºæ–°åŠŸèƒ½&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;Relationship to Shark&lt;/h2&gt;
&lt;p&gt;å€Ÿé‰´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;hive æ•°æ®æºçš„åŠ è½½&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨åˆ—å­˜å‚¨å®ç°å†…å­˜ä¸­çš„â€œç¼“å­˜â€&lt;/li&gt;
&lt;li&gt;UDFs&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ–°å¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ”¯æŒSparkç¨‹åºï¼ˆæœ¬åœ°RDDï¼‰ï¼Œæ–°çš„å¤–éƒ¨æ•°æ®æºçš„å…³ç³»å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;é«˜çº§åˆ†æç®—æ³•ï¼ˆå¦‚å›¾å½¢å¤„ç†å’Œæœºå™¨å­¦ä¹ ï¼‰æ‰©å±•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;Programming Interface&lt;/h2&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170523_103741" src="images/Screenshot_20170523_103741.png" width="80%"&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;DataFrame&lt;/h2&gt;
&lt;p&gt;Spark SQL APIä¸­çš„ä¸»è¦æŠ½è±¡æ–¹æ³•æ˜¯DataFrame&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å–ä»£äº†ä»¥å‰çš„ï¼ˆSpark &amp;lt; 1.3ï¼‰SchemaRDDã€‚&lt;/li&gt;
&lt;li&gt;ç±»ä¼¼ä¸Rå’Œpandasä¸­çš„DataFrameï¼ŒDataFrameç­‰ä»·äºå…³ç³»æ•°æ®åº“ä¸­çš„è¡¨ï¼Œæ¯ä¸€åˆ—éƒ½æœ‰å‘½åã€‚ä½†Spark SQLä¸­çš„DataFrameåŸºäºRDDï¼Œæ˜¯åˆ†å¸ƒå¼çš„ã€‚RDDå¯ä»¥è½¬æ¢ä¸ºDataFrameã€‚&lt;/li&gt;
&lt;li&gt;DataFrame æ”¯æŒå¤šç§æ•°æ®ç±»å‹ä¸æ‰€æœ‰å¸¸è§çš„å…³ç³»è¿ç®—ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;Spark DataFramesæ˜¯æ‡’æƒ°çš„ï¼Œæ¯ä¸ªDataFrameå¯¹è±¡éƒ½ä»£è¡¨ä¸€ä¸ªç”¨äºè®¡ç®—æ•°æ®é›†çš„é€»è¾‘è®¡åˆ’ï¼Œä½†æ˜¯ç›´åˆ°ç”¨æˆ·è°ƒç”¨ç‰¹å®šçš„â€œè¾“å‡ºæ“ä½œâ€ï¼ˆå¦‚ä¿å­˜ï¼‰æ‰ä¼šæ‰§è¡Œä»»ä½•æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;DataFramesæä¾›ä¸å…³ç³»æŸ¥è¯¢è¯­è¨€ï¼ˆå¦‚SQLå’ŒPigï¼‰ç›¸åŒçš„æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;Getting Started: Spark SQL&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;## Import Spark SQL&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pyspark.sql&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;HiveContext&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Row&lt;/span&gt;
&lt;span class="c1"&gt;## Or if you can&amp;#39;t include the hive requirements&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pyspark.sql&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;SQLContext&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Row&lt;/span&gt;

&lt;span class="n"&gt;hiveCtx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;HiveContext&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;sqlCtx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;SQLContext&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;As of Spark 2.0, HiveContext and SQLContext are replaced by SparkSession. However, we are keeping the class here for backward compatibility.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2&gt;Getting Started: Spark SQL&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pyspark.sql&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;HiveContext&lt;/span&gt;
&lt;span class="n"&gt;hiveCtx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;HiveContext&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;rows&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;hiveCtx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;SELECT key, value FROM mytable&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;keys&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rows&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;input&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;hiveCtx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jsonFile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;inputFile&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;happyPeopleRDD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parallelize&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;Row&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;holden&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;favouriteBeverage&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;coffee&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;
&lt;span class="n"&gt;happyPeopleSchemaRDD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;hiveCtx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;inferSchema&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;happyPeopleRDD&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;happyPeopleSchemaRDD&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;registerTempTable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;happy_people&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;hr&gt;
&lt;h2&gt;Catalyst Optimizer&lt;/h2&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170523_111752" src="images/Screenshot_20170523_111752.png" width="90%"&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Performance&lt;/h2&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170522_195943" src="images/Screenshot_20170522_195943.png" width="90%"&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Performance&lt;/h2&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170522_200157" src="images/Screenshot_20170522_200157.png" width="60%"&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;ARMBRUST M, GHODSI A, ZAHARIA M. Spark SQL: Relational Data Processing in Spark[C]//ACM Press, 2015: 1383â€“1394.&lt;/li&gt;
&lt;li&gt;Sparkå¿«é€Ÿå¤§æ•°æ®åˆ†æ[M]. äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾, 2015.&lt;/li&gt;
&lt;li&gt;https://pandas.pydata.org/pandas-docs/stable/dsintro.html&lt;/li&gt;
&lt;/ol&gt;</content><category term="spark"></category><category term="big data"></category><category term="SQL"></category><category term="SQL on Hadoopï¼Œhadoop"></category></entry><entry><title>Spark SQL</title><link href="https://blog.chih.me/spark-sql.html" rel="alternate"></link><published>2017-06-24T00:00:00+08:00</published><updated>2017-06-24T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2017-06-24:/spark-sql.html</id><summary type="html">&lt;h2&gt;Spark ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;Hadoop ä¼´éšç€å¤§æ•°æ®çš„å…´èµ·å·²æœ‰åå¹´æ—¶é—´ï¼Œè¢«è®¤ä¸ºæ˜¯å¤§æ•°æ®å¤„ç†çš„é¦–é€‰è§£å†³æ–¹æ¡ˆï¼Œ å®ƒåˆ†åˆ«æä¾›HDFSå’ŒMapReduceè§£å†³äº†å¤§æ•°æ®ï¼ˆæ— æ³•åœ¨å•å°æœºå™¨ä¸Šå­˜å‚¨ä¸å¤„ç†çš„æ•°æ®ï¼‰çš„å¯é å­˜å‚¨å’Œå¤„ç†ï¼Œä½†å¯¹äºä¸€äº›åœºæ™¯ï¼Œ MapReduceå¹¶ä¸æ˜¯ååˆ†é«˜æ•ˆï¼Œå…¶ä¸€ï¼ŒMapReduceçš„æŠ½è±¡å±‚æ¬¡ä½ï¼Œä»…æä¾›äº†mapå’Œreduceä¸¤ä¸ªæ“ä½œï¼Œå¯¹äºåº”ç”¨éœ€è¦ç¼–å†™å¤§é‡ä»£ç ï¼›å…¶äºŒï¼Œä¸€ä¸ªjobåªåŒ…æ‹¬äº†mapå’Œreduceä¸¤ä¸ªé˜¶æ®µï¼Œæƒ³è¦å®Œæˆå¤æ‚çš„å·¥ä½œï¼Œå°±å¿…é¡»ä¸²è”ä¸€ç³»åˆ—MapReduceä½œä¸šï¼Œä½†æ¯ä¸€æ­¥çš„è¾“å‡ºæ•°æ®å¿…é¡»å­˜å‚¨åˆ°HDFSï¼Œå¯¼è‡´ioæ“ä½œç¹é‡ï¼Œæ—¶å»¶è¾ƒé«˜ï¼Œåªé€‚åˆæ‰¹å¤„ç†ï¼Œä¸é€‚åˆå®æ—¶å¤„ç†å’Œè¿­ä»£è®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;Apache Sparkæ˜¯ä¸€ä¸ªæ–°å…´çš„å¤§æ•°æ®å¤„ç†å¼•æ“ï¼Œå®ƒå…è®¸å¼€å‘è€…ä½¿ç”¨æœ‰å‘æ— ç¯å›¾ (DAG) å¼€å‘å¤æ‚çš„æ•°æ®æ“ä½œï¼Œå†…éƒ¨ä½¿ç”¨ä¸€ä¸ªé›†ç¾¤ä¸Šçš„åˆ†å¸ƒå¼å†…å­˜æŠ½è±¡ (RDD) ï¼Œç®€åŒ–äº†å¯¹åˆ†å¸ƒå¼æ•°æ®çš„ç¼–ç¨‹å¤æ‚æ€§ã€‚RDD æä¾›äº†ä¸¤ç±»æ“ä½œï¼Œè½¬æ¢å’ŒåŠ¨ä½œï¼Œè½¬æ¢åœ¨åŸæœ‰ RDD ä¸Šé€šè¿‡ä¸€äº›æ“ä½œå®šä¹‰äº†ä¸€ä¸ªæ–°çš„ RDD ï¼ŒåŒ…æ‹¬map, flatMap, filter, union, sample, join, groupByKey, cogroup, ReduceByKey, cros, sortByKey, mapValuesç­‰ â€¦&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Spark ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;Hadoop ä¼´éšç€å¤§æ•°æ®çš„å…´èµ·å·²æœ‰åå¹´æ—¶é—´ï¼Œè¢«è®¤ä¸ºæ˜¯å¤§æ•°æ®å¤„ç†çš„é¦–é€‰è§£å†³æ–¹æ¡ˆï¼Œ å®ƒåˆ†åˆ«æä¾›HDFSå’ŒMapReduceè§£å†³äº†å¤§æ•°æ®ï¼ˆæ— æ³•åœ¨å•å°æœºå™¨ä¸Šå­˜å‚¨ä¸å¤„ç†çš„æ•°æ®ï¼‰çš„å¯é å­˜å‚¨å’Œå¤„ç†ï¼Œä½†å¯¹äºä¸€äº›åœºæ™¯ï¼Œ MapReduceå¹¶ä¸æ˜¯ååˆ†é«˜æ•ˆï¼Œå…¶ä¸€ï¼ŒMapReduceçš„æŠ½è±¡å±‚æ¬¡ä½ï¼Œä»…æä¾›äº†mapå’Œreduceä¸¤ä¸ªæ“ä½œï¼Œå¯¹äºåº”ç”¨éœ€è¦ç¼–å†™å¤§é‡ä»£ç ï¼›å…¶äºŒï¼Œä¸€ä¸ªjobåªåŒ…æ‹¬äº†mapå’Œreduceä¸¤ä¸ªé˜¶æ®µï¼Œæƒ³è¦å®Œæˆå¤æ‚çš„å·¥ä½œï¼Œå°±å¿…é¡»ä¸²è”ä¸€ç³»åˆ—MapReduceä½œä¸šï¼Œä½†æ¯ä¸€æ­¥çš„è¾“å‡ºæ•°æ®å¿…é¡»å­˜å‚¨åˆ°HDFSï¼Œå¯¼è‡´ioæ“ä½œç¹é‡ï¼Œæ—¶å»¶è¾ƒé«˜ï¼Œåªé€‚åˆæ‰¹å¤„ç†ï¼Œä¸é€‚åˆå®æ—¶å¤„ç†å’Œè¿­ä»£è®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;Apache Sparkæ˜¯ä¸€ä¸ªæ–°å…´çš„å¤§æ•°æ®å¤„ç†å¼•æ“ï¼Œå®ƒå…è®¸å¼€å‘è€…ä½¿ç”¨æœ‰å‘æ— ç¯å›¾ (DAG) å¼€å‘å¤æ‚çš„æ•°æ®æ“ä½œï¼Œå†…éƒ¨ä½¿ç”¨ä¸€ä¸ªé›†ç¾¤ä¸Šçš„åˆ†å¸ƒå¼å†…å­˜æŠ½è±¡ (RDD) ï¼Œç®€åŒ–äº†å¯¹åˆ†å¸ƒå¼æ•°æ®çš„ç¼–ç¨‹å¤æ‚æ€§ã€‚RDD æä¾›äº†ä¸¤ç±»æ“ä½œï¼Œè½¬æ¢å’ŒåŠ¨ä½œï¼Œè½¬æ¢åœ¨åŸæœ‰ RDD ä¸Šé€šè¿‡ä¸€äº›æ“ä½œå®šä¹‰äº†ä¸€ä¸ªæ–°çš„ RDD ï¼ŒåŒ…æ‹¬map, flatMap, filter, union, sample, join, groupByKey, cogroup, ReduceByKey, cros, sortByKey, mapValuesç­‰ï¼ŒåŠ¨ä½œæ˜¯è¿”å›ä¸€ä¸ªç»“æœï¼ŒåŒ…æ‹¬collect, reduce, count, save, lookupKeyã€‚åœ¨è¿™é‡Œï¼Œæ‰€æœ‰çš„è½¬æ¢æ“ä½œéƒ½æ˜¯æƒ°æ€§æ±‚å€¼çš„ï¼Œåªæœ‰æ‰§è¡Œåˆ°åŠ¨ä½œæ“ä½œæ‰ä¼šçœŸæ­£è¿›è¡Œæ•°æ®å¤„ç†ã€‚å³ï¼ŒRDDçš„è½¬æ¢æ“ä½œä¼šç”Ÿæˆæ–°çš„RDDï¼Œæ–°çš„RDDçš„æ•°æ®ä¾èµ–äºåŸæ¥çš„RDDçš„æ•°æ®ï¼Œæ¯ä¸ªRDDåˆåŒ…å«å¤šä¸ªåˆ†åŒºã€‚é‚£ä¹ˆä¸€æ®µç¨‹åºå®é™…ä¸Šå°±æ„é€ äº†ä¸€ä¸ªç”±ç›¸äº’ä¾èµ–çš„å¤šä¸ªRDDç»„æˆçš„ DAGï¼Œ å¹¶é€šè¿‡åœ¨RDDä¸Šæ‰§è¡ŒåŠ¨ä½œå°†è¿™ä¸ªæœ‰å‘æ— ç¯å›¾ä½œä¸ºä¸€ä¸ªJobæäº¤ç»™Sparkæ‰§è¡Œã€‚é€šè¿‡RDDçš„æƒ°æ€§è®¡ç®—ï¼Œå‡å°‘äº†æ•°æ®çš„ä¼ è¾“å’Œå†™ç£ç›˜æ“ä½œï¼Œåœ¨æŸäº›æƒ…æ™¯ä¸‹ï¼Œå¯ä»¥å°†sparkçš„é€Ÿåº¦æé«˜åˆ°Hadoopçš„100å€ã€‚åŒæ—¶ï¼ŒRDDæ˜¯å®¹é”™çš„ï¼Œç³»ç»Ÿå¯ä»¥ä½¿ç”¨RDDçš„è°±ç³»å›¾æ¢å¤ä¸¢å¤±çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;Spark  æ”¯æŒ Hadoop çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ HDFSï¼Œä¹Ÿå¯ä»¥å°† Spark éƒ¨ç½²åˆ° Hadoop çš„èµ„æºè°ƒåº¦æ¡†æ¶ Yarn ä¹‹ä¸Šï¼Œ å› æ­¤ï¼Œå¯ä»¥å°†Spark çœ‹ä½œ Hadoop MapReduce çš„ä¸€ä¸ªæ›¿ä»£å“ã€‚Sparkå’ŒHadoopçš„å·®åˆ«ä¸ä»…ä»…åœ¨å¢å¼ºäº†MapReduceä¸Šï¼ŒSparkè¿˜æä¾›é«˜çº§çš„(Scalaï¼ŒJavaå’ŒPython)APIä»¥æå‡å¼€å‘è€…çš„ç”Ÿäº§åŠ›ï¼Œæ­¤å¤–ï¼ŒSparkæ¡†æ¶ä¸ºæ‰¹å¤„ç†ï¼ˆSpark Coreï¼‰ï¼Œäº¤äº’å¼ï¼ˆSpark SQLï¼‰ï¼Œæµå¼ï¼ˆSpark Streamingï¼‰ï¼Œæœºå™¨å­¦ä¹ ï¼ˆMLlibï¼‰ï¼Œå›¾è®¡ç®—ï¼ˆGraphXï¼‰æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ•°æ®å¤„ç†å¹³å°ï¼Œè¿™ç›¸å¯¹äºä½¿ç”¨Hadoopæœ‰å¾ˆå¤§ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170522_193655" src="images/Screenshot_20170522_193655.png" width="80%"&gt;&lt;/p&gt;
&lt;h2&gt;Spark SQL&lt;/h2&gt;
&lt;p&gt;å¯¹å¤§æ•°æ®çš„å¤„ç†æ–¹å¼æ—©æœŸæœ‰MapReduceï¼Œåœ¨Sparkå‡ºç°åå¤šäº†å¯¹RDDçš„è½¬æ¢å’ŒåŠ¨ä½œAPIï¼Œå¯¹è¿™äº›å¼ºå¤§ä½†ä½çº§çš„ç¼–ç¨‹æ¥å£è¿›è¡Œç¼–ç¨‹æ˜¯ååˆ†ç¹é‡çš„ï¼Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨ä¼˜åŒ–ä»¥å®ç°é«˜æ€§èƒ½å’Œæ•°æ®åˆ†å¸ƒå‡è¡¡ã€‚å› æ­¤ï¼Œç›®å‰å¤šä¸ªç³»ç»Ÿæ—¨åœ¨å‘å¤§æ•°æ®æä¾›å…³ç³»æ¥å£(SQL)æ¥æä¾›æ›´é«˜æ•ˆçš„ç”¨æˆ·ä½“éªŒï¼Œè¯¸å¦‚Pigï¼ŒHiveï¼ŒDremelå’ŒSharkä¹‹ç±»çš„ç³»ç»Ÿéƒ½åˆ©ç”¨å£°æ˜å¼æŸ¥è¯¢æ¥æä¾›æ›´ä¸°å¯Œçš„è‡ªåŠ¨ä¼˜åŒ–ã€‚ç‰¹åˆ«æ˜¯ï¼ŒSQLç”±äºå…¶ç®€å•çš„ç‰¹ç‚¹ï¼Œè¢«å¹¿æ³›ä½¿ç”¨ï¼ŒåŒæ—¶ï¼Œä¼ ç»Ÿæ•°æ®åº“æœ‰ç€å‡ åå¹´çš„SQLä¼˜åŒ–ç»éªŒï¼Œå¦‚æœSQLä¼˜åŒ–ç­–ç•¥åˆå…¥å¤§æ•°æ®å¤„ç†ä¸­ï¼Œè¿™å°†å¤§å¤§ç®€åŒ–å¤§æ•°æ®çš„å¤„ç†è¿‡ç¨‹ï¼Œé™ä½å¯¹ç”¨æˆ·çš„è¦æ±‚ï¼Œä¹Ÿå¯ä»¥è‡ªåŠ¨æé«˜å¤„ç†æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;Spark SQLçš„å‰èº«æ˜¯Sharkï¼ŒShark åŸºæœ¬ä¸Šå°±æ˜¯æŠŠHiveç§»æ¤åˆ°äº†Sparkï¼Œä½¿ç”¨Sparkä½œä¸ºæ‰§è¡Œå¼•æ“åï¼ŒSharkç¡®å®æ¯”Hiveçš„æ‰§è¡Œæ•ˆç‡æœ‰äº†æå¤§æå‡ï¼Œä½†ç”±äºHiveçš„ä¼˜åŒ–å™¨æ˜¯é’ˆå¯¹MapReduceé‡èº«å®šåˆ¶çš„ï¼Œéš¾ä»¥æ‰©å±•ï¼Œéš¾ä»¥æ„å»ºæ–°åŠŸèƒ½ï¼Œä¾‹å¦‚æœºå™¨å­¦ä¹ çš„æ•°æ®ç±»å‹æˆ–æ”¯æŒé™¤Hiveå¤–çš„æ–°æ•°æ®æºã€‚å› æ­¤åœ¨2014å¹´6æœˆ1æ—¥Sharké¡¹ç›®å’ŒSpark SQLé¡¹ç›®çš„ä¸»æŒäººReynold Xinå®£å¸ƒï¼šåœæ­¢å¯¹Sharkçš„å¼€å‘ï¼Œå›¢é˜Ÿå°†æ‰€æœ‰èµ„æºæ”¾Spark SQLé¡¹ç›®ä¸Šã€‚Spark SQLæ˜¯Apache Sparkä¸­çš„ä¸€ä¸ªæ–°æ¨¡å—ï¼Œå®ƒå°†å…³ç³»å¤„ç†ä¸Sparkçš„åŠŸèƒ½ç¼–ç¨‹APIç›¸é›†æˆã€‚åŸºäºSharkä¸Šçš„ç»éªŒï¼ŒSpark SQLå…è®¸Sparkç¨‹åºå‘˜åˆ©ç”¨å…³ç³»å¤„ç†ï¼ˆä¾‹å¦‚å£°æ˜å¼æŸ¥è¯¢å’Œä¼˜åŒ–å­˜å‚¨ï¼‰çš„ä¼˜åŠ¿ï¼Œå¹¶å…è®¸SQLç”¨æˆ·åœ¨Sparkä¸­è°ƒç”¨å¤æ‚çš„åˆ†æåº“ï¼ˆä¾‹å¦‚æœºå™¨å­¦ä¹ ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;SparkSQLä½“ç³»ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ•´ä½“ç”±ä¸Šåˆ°ä¸‹åˆ†ä¸ºä¸‰å±‚ï¼šç¼–ç¨‹æ¨¡å‹å±‚ã€æ‰§è¡Œä»»åŠ¡ä¼˜åŒ–å±‚ä»¥åŠä»»åŠ¡æ‰§è¡Œå¼•æ“å±‚ï¼Œå…¶ä¸­SparkSQLç¼–ç¨‹æ¨¡å‹å¯ä»¥åˆ†ä¸ºSQLå’ŒDataFrameä¸¤ç§ï¼›æ‰§è¡Œè®¡åˆ’ä¼˜åŒ–åˆç§°ä¸ºCatalystï¼Œè¯¥æ¨¡å—è´Ÿè´£å°†SQLè¯­å¥è§£ææˆASTï¼ˆé€»è¾‘æ‰§è¡Œè®¡åˆ’ï¼‰ï¼Œå¹¶å¯¹åŸå§‹é€»è¾‘æ‰§è¡Œè®¡åˆ’è¿›è¡Œä¼˜åŒ–ï¼Œæœ€ç»ˆè¾“å‡ºä¼˜åŒ–åçš„ç‰©ç†æ‰§è¡Œè®¡åˆ’ï¼›ä»»åŠ¡æ‰§è¡Œå¼•æ“å°±æ˜¯Sparkå†…æ ¸ï¼Œè´Ÿè´£æ ¹æ®ç‰©ç†æ‰§è¡Œè®¡åˆ’ç”ŸæˆDAGï¼Œåœ¨ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿçš„ç®¡ç†ä¸‹åˆ†è§£ä¸ºä»»åŠ¡é›†å¹¶åˆ†å‘åˆ°é›†ç¾¤èŠ‚ç‚¹ä¸ŠåŠ è½½æ•°æ®è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170523_103741" src="images/Screenshot_20170523_103741.png" width="80%"&gt;&lt;/p&gt;
&lt;h2&gt;DataFrame&lt;/h2&gt;
&lt;p&gt;Spark SQL API ä¸­çš„ä¸»è¦æŠ½è±¡æ–¹æ³•æ˜¯ DataFrameï¼ŒDataFrameç±»ä¼¼äºR å’Œ Python pandas ä¸­çš„ DataFrame , ä¸å…³ç³»å‹æ•°æ®åº“ä¸­çš„æ•°æ®åº“è¡¨ç±»ä¼¼ï¼Œæ¯ä¸€åˆ—éƒ½æœ‰å‘½åã€‚ä½† Spark SQL ä¸­çš„ DataFrame åŸºäºRDDï¼Œæ˜¯åˆ†å¸ƒå¼çš„ã€‚åœ¨Spark 1.3ä¹‹å‰ï¼Œ å®ƒè¢«ç§°ä¸ºSchemaRDDã€‚RDD å¯ä»¥è½¬æ¢ä¸º DataFrameï¼Œä½†ä¸RDDä¸åŒï¼ŒDataFramesè·Ÿè¸ªå…¶æ¨¡å¼å¹¶æ”¯æŒå„ç§å…³ç³»æ“ä½œä»¥å¾—åˆ°æ›´ä¼˜åŒ–çš„æ‰§è¡Œã€‚å³ï¼ŒRDDæ˜¯ä¸çŸ¥é“å†…éƒ¨æ•°æ®çš„ç»“æ„çš„ï¼Œè€Œä½¿ç”¨DataFrameå¯ä»¥è®©æ¡†æ¶äº†è§£RDDå†…éƒ¨çš„æ•°æ®ç»“æ„ï¼Œä¾¿äºå¼•æ“è¿›è¡Œä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥æ ¹æ®ä¸‹å›¾å¯¹æ¯”RDDä¸DataFrameæ•°æ®ç»“æ„çš„å·®åˆ«ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt="12" src="images/12.png"&gt;&lt;/p&gt;
&lt;p&gt;ä»å›¾ä¸Šçœ‹ï¼ŒDataFrameç›¸æ¯”RDDå¤šäº†ä¸€ä¸ªè¡¨å¤´ï¼ŒåŒæ—¶æ¯åˆ—çš„æ•°æ®ç±»å‹ä¹Ÿè¢«è§„å®šäº†ã€‚DataFrameå°†ä¸€è¡Œåˆ‡åˆ†äº†å¤šä¸ªåˆ—ï¼Œæ¯ä¸ªåˆ—éƒ½æœ‰ä¸€å®šçš„æ•°æ®æ ¼å¼ï¼Œæ•°æ®ç²’åº¦ç›¸æ¯”æ›´ç»†ï¼Œå› æ­¤å°±èƒ½æ”¯æŒæ›´å¤šæ›´ç»†ç²’åº¦çš„ç®—å­ï¼Œæ¯”å¦‚selectç®—å­ã€groupbyç®—å­ã€whereç®—å­ã€‚ç”±äºæ¯åˆ—çš„æ•°æ®ç±»å‹è¢«è§„å®šäº†ï¼Œæ•°æ®é¡¹çš„è½¬æ¢ä¹Ÿéƒ½å°†æ˜¯ç±»å‹å®‰å…¨çš„ï¼Œè¿™å¯¹äºè¾ƒä¸ºå¤æ‚çš„æ•°æ®è®¡ç®—ç¨‹åºçš„è°ƒè¯•æ˜¯ååˆ†æœ‰åˆ©çš„ï¼Œå¾ˆå¤šæ•°æ®ç±»å‹ä¸åŒ¹é…çš„é—®é¢˜éƒ½å¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µå°±è¢«æ£€æŸ¥å‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;DataFrameså¯ä»¥ä»ç³»ç»Ÿç›®å½•ä¸­çš„è¡¨ï¼ˆåŸºäºå¤–éƒ¨æ•°æ®æºï¼‰æ„å»ºï¼Œä¹Ÿå…è®¸ç¨‹åºé€šè¿‡JDBC / ODBCè®¿é—®æ•°æ®é›†ã€‚ä¸€æ—¦DataFrameæ„å»ºå®Œæˆï¼Œå®ƒä»¬å¯ä»¥ç”¨å„ç§å…³ç³»è¿ç®—ç¬¦æ¥å¤„ç†ï¼Œä¾‹å¦‚whereå’ŒgroupByï¼Œå®ƒä»¬ç±»ä¼¼äºä¸Rå’ŒPythonä¸­çš„æ•°æ®å¸§åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰è¡¨è¾¾å¼ã€‚ä¸RDDç±»ä¼¼ï¼ŒSpark DataFramesæ˜¯æ‡’æƒ°çš„ï¼Œå› ä¸ºæ¯ä¸ªDataFrameå¯¹è±¡éƒ½ä»£è¡¨ä¸€ä¸ªç”¨äºè®¡ç®—æ•°æ®é›†çš„é€»è¾‘è®¡åˆ’ï¼Œä½†æ˜¯ç›´åˆ°ç”¨æˆ·è°ƒç”¨ç‰¹å®šçš„â€œè¾“å‡ºæ“ä½œâ€ï¼ˆå¦‚ä¿å­˜ï¼‰æ‰ä¼šæ‰§è¡Œä»»ä½•æ‰§è¡Œã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨ç±»ä¼¼äºRæ•°æ®å¸§å’ŒPython Pandasçš„åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰æ¥å¯¹DataFramesæ‰§è¡Œå…³ç³»æ“ä½œã€‚DataFramesæ”¯æŒæ‰€æœ‰å¸¸è§çš„å…³ç³»è¿ç®—ç¬¦ï¼ŒåŒ…æ‹¬æŠ•å½±ï¼ˆé€‰æ‹©ï¼‰ï¼Œè¿‡æ»¤å™¨ï¼ˆwhereï¼‰ï¼Œè¿æ¥å’Œèšåˆï¼ˆgroupByï¼‰ã€‚&lt;/p&gt;
&lt;h2&gt;Catalyst ä¼˜åŒ–å™¨&lt;/h2&gt;
&lt;p&gt;Scalaçš„ä¸€äº›ç‰¹æ€§ä½¿å¾—å®ƒéå¸¸é€‚åˆå¼€å‘ä¼˜åŒ–ç¼–è¯‘å™¨ï¼Œä¸ºäº†å®ç°Spark SQLï¼ŒSparkå¼€å‘è€…åŸºäºScalaä¸­çš„åŠŸèƒ½ç¼–ç¨‹ç»“æ„è®¾è®¡äº†ä¸€ä¸ªæ–°çš„å¯æ‰©å±•ä¼˜åŒ–å™¨Catalystã€‚Catalystçš„æ ¸å¿ƒåŒ…å«ä¸€ä¸ªç”¨äºè¡¨ç¤ºæ ‘å¹¶åº”ç”¨è§„åˆ™æ¥æ“çºµæ ‘çš„é€šç”¨åº“ï¼Œåœ¨æ­¤ä¹‹ä¸Šï¼Œæ„å»ºäº†ä¸“ç”¨äºå…³ç³»æŸ¥è¯¢å¤„ç†ï¼ˆä¾‹å¦‚è¡¨è¾¾å¼ï¼Œé€»è¾‘æŸ¥è¯¢è®¡åˆ’ï¼‰æ‰§è¡Œä¸åŒé˜¶æ®µçš„è§„åˆ™ï¼šåˆ†æï¼Œé€»è¾‘ä¼˜åŒ–ï¼Œç‰©ç†è§„åˆ’å’Œä»£ç ç”Ÿæˆã€‚Catalystæ˜¯å¯æ‰©å±•çš„ï¼Œå…¶ç›®çš„åœ¨äºèƒ½å¤Ÿè½»æ¾åœ°å‘Spark SQLæ·»åŠ æ–°çš„ä¼˜åŒ–æŠ€æœ¯å’ŒåŠŸèƒ½ï¼Œç‰¹åˆ«æ˜¯ä¸ºäº†è§£å†³æˆ‘ä»¬ç‰¹åˆ«ä½¿ç”¨â€œå¤§æ•°æ®â€ï¼ˆä¾‹å¦‚ï¼ŒåŠç»“æ„åŒ–æ•°æ®å’Œé«˜çº§åˆ†æï¼‰æ‰€é‡åˆ°çš„å„ç§é—®é¢˜ï¼ŒåŒæ—¶ï¼Œä½¿å¤–éƒ¨å¼€å‘äººå‘˜èƒ½å¤Ÿæ‰©å±•ä¼˜åŒ–å™¨ï¼Œä¾‹å¦‚ï¼Œé€šè¿‡æ·»åŠ å¯å°†è¿‡æ»¤æˆ–èšåˆæ¨é€åˆ°å¤–éƒ¨å­˜å‚¨ç³»ç»Ÿçš„æ•°æ®æºç‰¹å®šè§„åˆ™ï¼Œæˆ–æ”¯æŒæ–°çš„æ•°æ®ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;SQLä¼˜åŒ–å™¨æ ¸å¿ƒæ‰§è¡Œç­–ç•¥ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªå¤§çš„æ–¹å‘ï¼šåŸºäºè§„åˆ™ä¼˜åŒ–ï¼ˆRBOï¼‰ä»¥åŠåŸºäºä»£ä»·ä¼˜åŒ–(CBO)ï¼ŒCatalystæ”¯æŒåŸºäºè§„åˆ™å’ŒåŸºäºæˆæœ¬çš„ä¼˜åŒ–ï¼Œé€šè¿‡ä½¿ç”¨è§„åˆ™ç”Ÿæˆå¤šä¸ªè®¡åˆ’ï¼Œç„¶åè®¡ç®—å…¶æˆæœ¬æ¥æ‰§è¡ŒåŸºäºä»£ä»·çš„ä¼˜åŒ–ã€‚Catalystçš„å¤§è‡´æµç¨‹ä¸ºï¼šSQLè¯­å¥é¦–å…ˆé€šè¿‡Parseræ¨¡å—è¢«è§£æä¸ºè¯­æ³•æ ‘ï¼Œæ­¤æ£µæ ‘ç§°ä¸ºUnresolved Logical Planï¼›Unresolved Logical Plané€šè¿‡Analyzeræ¨¡å—å€ŸåŠ©äºæ•°æ®å…ƒæ•°æ®è§£æä¸ºLogical Planï¼›æ­¤æ—¶å†é€šè¿‡å„ç§åŸºäºè§„åˆ™çš„ä¼˜åŒ–ç­–ç•¥è¿›è¡Œæ·±å…¥ä¼˜åŒ–ï¼Œå¾—åˆ°Optimized Logical Planï¼›ä¼˜åŒ–åçš„é€»è¾‘æ‰§è¡Œè®¡åˆ’ä¾ç„¶æ˜¯é€»è¾‘çš„ï¼Œå¹¶ä¸èƒ½è¢«Sparkç³»ç»Ÿç†è§£ï¼Œæ­¤æ—¶éœ€è¦å°†æ­¤é€»è¾‘æ‰§è¡Œè®¡åˆ’è½¬æ¢ä¸ºPhysical Planã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170523_111752" src="images/Screenshot_20170523_111752.png" width="90%"&gt;&lt;/p&gt;
&lt;h3&gt;åˆ†æ&lt;/h3&gt;
&lt;p&gt;Spark SQLä»SQLè§£æå™¨è¿”å›çš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰æˆ–ä½¿ç”¨APIæ„é€ çš„DataFrameå¯¹è±¡ä¸­è®¡ç®—å‡ºçš„å…³ç³»å¼€å§‹ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå…³ç³»å¯èƒ½åŒ…å«æœªè§£æçš„å±æ€§å¼•ç”¨æˆ–å…³ç³»ï¼šä¾‹å¦‚ï¼Œåœ¨SQLæŸ¥è¯¢&lt;code&gt;SELECT col FROM sales&lt;/code&gt;ä¸­ï¼Œcolçš„ç±»å‹ï¼Œæˆ–è€…æ˜¯å¦æ˜¯æœ‰æ•ˆçš„åˆ—åç§°ï¼Œç›´åˆ°æˆ‘ä»¬æŸ¥æ‰¾æ‰ä¼šçŸ¥é“ã€‚å¦‚æœæˆ‘ä»¬ä¸çŸ¥é“å®ƒçš„ç±»å‹æˆ–è€…æ²¡æœ‰å°†å®ƒä¸è¾“å…¥è¡¨ï¼ˆæˆ–è€…åˆ«åï¼‰åŒ¹é…ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§ç§°ä¸ºæœªè§£æã€‚Spark SQLéå†æ•´ä¸ªè¯­æ³•æ ‘ï¼Œä½¿ç”¨Catalystè§„åˆ™å’ŒCatalogå¯¹è±¡æ¥è·Ÿè¸ªæ‰€æœ‰æ•°æ®æºä¸­çš„è¡¨ä»¥è§£æè¿™äº›å±æ€§ã€‚å®ƒé¦–å…ˆæ„å»ºä¸€ä¸ªå…·æœ‰æœªç»‘å®šå±æ€§å’Œæ•°æ®ç±»å‹çš„â€œæœªè§£å†³çš„é€»è¾‘è®¡åˆ’â€æ ‘ï¼Œç„¶ååº”ç”¨æ‰§è¡Œä»¥ä¸‹æ“ä½œçš„è§„åˆ™ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä»ç›®å½•ä¸­æŒ‰åç§°æŸ¥æ‰¾å…³ç³»ã€‚&lt;/li&gt;
&lt;li&gt;å°†å‘½åå±æ€§ï¼ˆä¾‹å¦‚colï¼‰æ˜ å°„åˆ°ç»™å®šè¿ç®—ç¬¦çš„å­èŠ‚ç‚¹çš„è¾“å…¥ã€‚&lt;/li&gt;
&lt;li&gt;ç¡®å®šå“ªäº›å±æ€§å¼•ç”¨ç›¸åŒçš„å€¼ä»¥ç»™å®ƒä»¬ä¸€ä¸ªå”¯ä¸€çš„IDï¼ˆç¨åå¯ä»¥ä¼˜åŒ–ï¼Œå¦‚col = colï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;é€»è¾‘ä¼˜åŒ–&lt;/h3&gt;
&lt;p&gt;é€»è¾‘ä¼˜åŒ–é˜¶æ®µå°†åŸºäºè§„åˆ™çš„ä¼˜åŒ–åº”ç”¨äºé€»è¾‘è®¡åˆ’ã€‚åŸºäºè§„åˆ™çš„ä¼˜åŒ–ç­–ç•¥å®é™…ä¸Šå°±æ˜¯å¯¹è¯­æ³•æ ‘è¿›è¡Œä¸€æ¬¡éå†ï¼Œæ¨¡å¼åŒ¹é…èƒ½å¤Ÿæ»¡è¶³ç‰¹å®šè§„åˆ™çš„èŠ‚ç‚¹ï¼Œå†è¿›è¡Œç›¸åº”çš„ç­‰ä»·è½¬æ¢ã€‚å› æ­¤ï¼ŒåŸºäºè§„åˆ™ä¼˜åŒ–è¯´åˆ°åº•å°±æ˜¯ä¸€æ£µæ ‘ç­‰ä»·åœ°è½¬æ¢ä¸ºå¦ä¸€æ£µæ ‘ã€‚SQLä¸­ç»å…¸çš„ä¼˜åŒ–è§„åˆ™æœ‰å¾ˆå¤šï¼Œä¸‰ç§æ¯”è¾ƒå¸¸è§çš„è§„åˆ™æœ‰ï¼šè°“è¯ä¸‹æ¨ï¼ˆPredicate Pushdownï¼‰ã€å¸¸é‡ç´¯åŠ ï¼ˆConstant Foldingï¼‰å’Œåˆ—å€¼è£å‰ªï¼ˆColumn Pruning&lt;/p&gt;
&lt;h3&gt;ç‰©ç†è§„åˆ’&lt;/h3&gt;
&lt;p&gt;åœ¨ç‰©ç†è§„åˆ’é˜¶æ®µï¼ŒSpark SQLé‡‡ç”¨é€»è¾‘è®¡åˆ’ï¼Œå¹¶ä½¿ç”¨ä¸Sparkæ‰§è¡Œå¼•æ“åŒ¹é…çš„ç‰©ç†è¿ç®—ç¬¦ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªç‰©ç†è®¡åˆ’ã€‚ç„¶åä½¿ç”¨æˆæœ¬æ¨¡å‹é€‰æ‹©ä¸€ä¸ªè®¡åˆ’ã€‚ç›®å‰ï¼ŒSparkSQLæ²¡æœ‰å¾ˆå¥½çš„æ”¯æŒåŸºäºä»£ä»·ä¼˜åŒ–ï¼ŒåŸºäºæˆæœ¬çš„ä¼˜åŒ–ä»…ç”¨äºé€‰æ‹©è¿æ¥ç®—æ³•ã€‚ç‰©ç†è®¡åˆ’å‘˜è¿˜å¯ä»¥æ‰§è¡ŒåŸºäºè§„åˆ™çš„ç‰©ç†ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;h3&gt;ä»£ç ç”Ÿæˆ&lt;/h3&gt;
&lt;p&gt;æŸ¥è¯¢ä¼˜åŒ–çš„æœ€åé˜¶æ®µåŒ…æ‹¬ç”ŸæˆJavaå­—èŠ‚ç ä»¥åœ¨æ¯å°æœºå™¨ä¸Šè¿è¡Œã€‚å› ä¸ºSpark SQLé€šå¸¸åœ¨å†…å­˜æ•°æ®é›†ä¸­è¿è¡Œï¼Œå› ä¸ºå¤„ç†æ˜¯CPUé™åˆ¶çš„ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›æ”¯æŒä»£ç ç”Ÿæˆä»¥åŠ å¿«æ‰§è¡Œé€Ÿåº¦ã€‚å°½ç®¡å¦‚æ­¤ï¼Œä»£ç ç”Ÿæˆå¼•æ“é€šå¸¸å¾ˆéš¾æ„å»ºï¼Œå®é™…ä¸Šä¸æ„å»ºç¼–è¯‘å™¨ç›¸å½“ã€‚Catalystä¾é Scalaè¯­è¨€çš„ä¸€ä¸ªç‰¹æ®ŠåŠŸèƒ½ï¼Œquasiquotes ï¼Œä½¿ä»£ç ç”Ÿæˆæ›´ç®€å•ã€‚Quasiquoteså…è®¸ä»¥Scalaè¯­è¨€ç¼–ç¨‹æ„å»ºæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œç„¶åå¯ä»¥åœ¨è¿è¡Œæ—¶å°†å…¶æä¾›ç»™Scalaç¼–è¯‘å™¨ä»¥ç”Ÿæˆå­—èŠ‚ç ã€‚æˆ‘ä»¬ä½¿ç”¨Catalystå°†è¡¨ç¤ºSQLä¸­çš„è¡¨è¾¾å¼çš„æ ‘è½¬æ¢ä¸ºç”¨äºScalaä»£ç çš„ASTï¼Œä»¥è¯„ä¼°è¯¥è¡¨è¾¾å¼ï¼Œç„¶åç¼–è¯‘å¹¶è¿è¡Œç”Ÿæˆçš„ä»£ç ã€‚&lt;/p&gt;</content><category term="spark"></category><category term="big data"></category><category term="SQL"></category><category term="SQL on Hadoop"></category><category term="Spark SQL"></category><category term="hadoop"></category></entry><entry><title>Shark</title><link href="https://blog.chih.me/shark-ppt.html" rel="alternate"></link><published>2017-06-23T00:00:00+08:00</published><updated>2017-06-23T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2017-06-23:/shark-ppt.html</id><summary type="html">&lt;h2&gt;Shark Overview&lt;/h2&gt;
&lt;p&gt;ä¸€ä¸ªç‹¬ç«‹ï¼Œå¿«é€Ÿï¼Œç±»MapReduceçš„SQLå¼•æ“&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŸºäºå†…å­˜å­˜å‚¨æ•°æ®ï¼Œé€‚åˆäº¤äº’å¼æŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;ä¼˜ç§€çš„æŸ¥è¯¢ä¼˜åŒ–&lt;/li&gt;
&lt;li&gt;æ¯”Hadoopå¿«40å€ä»¥ä¸Š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®Œå…¨å…¼å®¹Hadoopå­˜å‚¨æ¥å£&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥è¯»å–æˆ–å†™å…¥ä»»ä½•æ”¯æŒHadoopçš„ç³»ç»Ÿ&lt;/li&gt;
&lt;li&gt;åŒ…æ‹¬HDFSï¼ŒHbaseï¼ŒSequenceFiles&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;Shark Overview&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Sharkå³Hive on Sparkï¼Œæœ¬è´¨ä¸Šæ˜¯é€šè¿‡Hiveçš„HQLè§£æï¼ŒæŠŠHQLç¿»è¯‘æˆSparkä¸Šçš„RDDæ“ä½œï¼Œç„¶åé€šè¿‡Hiveçš„metadataè·å–æ•°æ®åº“é‡Œçš„è¡¨ä¿¡æ¯ï¼Œå®é™…HDFSä¸Šçš„æ•°æ®å’Œæ–‡ä»¶ï¼Œä¼šç”±Sharkè·å–å¹¶æ”¾åˆ°Sparkä¸Šè¿ç®—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sharkå»ºç«‹åœ¨Hiveçš„ä»£ç åŸºç¡€ä¸Šï¼Œå¹¶é€šè¿‡å°†Hiveçš„éƒ¨åˆ†ç‰©ç†æ‰§è¡Œè®¡åˆ’äº¤æ¢å‡ºæ¥ï¼ˆby swapping out the physical execution engine part of Hiveï¼‰ã€‚è¿™ä¸ªæ–¹æ³•ä½¿å¾—Sharkçš„ç”¨æˆ·å¯ä»¥åŠ é€ŸHiveçš„æŸ¥è¯¢&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sharkåœ¨HQLæ–¹é¢é‡ç”¨äº†Hiveä¸­HQLçš„è§£æã€é€»è¾‘æ‰§è¡Œè®¡åˆ’ç¿»è¯‘ã€æ‰§è¡Œè®¡åˆ’ä¼˜åŒ–ç­‰é€»è¾‘ï¼Œå®Œå…¨å…¼å®¹å·²æœ‰çš„Hiveæ•°æ®ï¼Œmetastores å’Œ æŸ¥è¯¢( HiveQLï¼ŒUDFs )&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;Project History&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Spark project â€¦&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;h2&gt;Shark Overview&lt;/h2&gt;
&lt;p&gt;ä¸€ä¸ªç‹¬ç«‹ï¼Œå¿«é€Ÿï¼Œç±»MapReduceçš„SQLå¼•æ“&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŸºäºå†…å­˜å­˜å‚¨æ•°æ®ï¼Œé€‚åˆäº¤äº’å¼æŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;ä¼˜ç§€çš„æŸ¥è¯¢ä¼˜åŒ–&lt;/li&gt;
&lt;li&gt;æ¯”Hadoopå¿«40å€ä»¥ä¸Š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®Œå…¨å…¼å®¹Hadoopå­˜å‚¨æ¥å£&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥è¯»å–æˆ–å†™å…¥ä»»ä½•æ”¯æŒHadoopçš„ç³»ç»Ÿ&lt;/li&gt;
&lt;li&gt;åŒ…æ‹¬HDFSï¼ŒHbaseï¼ŒSequenceFiles&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;Shark Overview&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Sharkå³Hive on Sparkï¼Œæœ¬è´¨ä¸Šæ˜¯é€šè¿‡Hiveçš„HQLè§£æï¼ŒæŠŠHQLç¿»è¯‘æˆSparkä¸Šçš„RDDæ“ä½œï¼Œç„¶åé€šè¿‡Hiveçš„metadataè·å–æ•°æ®åº“é‡Œçš„è¡¨ä¿¡æ¯ï¼Œå®é™…HDFSä¸Šçš„æ•°æ®å’Œæ–‡ä»¶ï¼Œä¼šç”±Sharkè·å–å¹¶æ”¾åˆ°Sparkä¸Šè¿ç®—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sharkå»ºç«‹åœ¨Hiveçš„ä»£ç åŸºç¡€ä¸Šï¼Œå¹¶é€šè¿‡å°†Hiveçš„éƒ¨åˆ†ç‰©ç†æ‰§è¡Œè®¡åˆ’äº¤æ¢å‡ºæ¥ï¼ˆby swapping out the physical execution engine part of Hiveï¼‰ã€‚è¿™ä¸ªæ–¹æ³•ä½¿å¾—Sharkçš„ç”¨æˆ·å¯ä»¥åŠ é€ŸHiveçš„æŸ¥è¯¢&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sharkåœ¨HQLæ–¹é¢é‡ç”¨äº†Hiveä¸­HQLçš„è§£æã€é€»è¾‘æ‰§è¡Œè®¡åˆ’ç¿»è¯‘ã€æ‰§è¡Œè®¡åˆ’ä¼˜åŒ–ç­‰é€»è¾‘ï¼Œå®Œå…¨å…¼å®¹å·²æœ‰çš„Hiveæ•°æ®ï¼Œmetastores å’Œ æŸ¥è¯¢( HiveQLï¼ŒUDFs )&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;Project History&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Spark project started in 2009, open sourced 2010&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sharké¡¹ç›®å¼€å§‹æ—¶ï¼ŒHiveï¼ˆMapReduceï¼‰æ˜¯Hadoopä¸ŠSQLçš„å”¯ä¸€é€‰æ‹©ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Shark started summer 2011, alpha April 2012&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Shark has been subsumed by Spark SQL 2014&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;åŠ¨æœº&lt;/h2&gt;
&lt;p&gt;æ•°æ®ä»“åº“&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éš¾ä»¥æ¨ªå‘æ‰©å±•&lt;/li&gt;
&lt;li&gt;éœ€è¦æœ‰é”™è¯¯æ¢å¤ï¼Œä»»åŠ¡è¿ç§»çš„æœºåˆ¶&lt;/li&gt;
&lt;li&gt;ä¼ ç»Ÿçš„OLAPæ“ä½œæ— æ³•åº”å¯¹æ—¥ç›Šå¤æ‚ï¼Œå¤šæ ·çš„æ•°æ®ï¼Œéœ€è¦åµŒå…¥æœºå™¨å­¦ä¹ ç®—æ³•ç­‰ç°ä»£æ•°æ®åˆ†æç®—æ³•&lt;/li&gt;
&lt;li&gt;å¤„ç†æ—¶é—´é•¿ï¼Œæ— æ³•åšåˆ°å³æ—¶äº¤äº’&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€äº›è§£å†³é€”å¾„&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tenzingï¼Œ  HadoopDB (åŸºäºMapReduceï¼Œ ç»†ç²’åº¦)&lt;/li&gt;
&lt;li&gt;Google F1ï¼Œ  Impala (ç²—ç²’åº¦)&lt;/li&gt;
&lt;li&gt;Apache Hive&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;Hive Architecture&lt;/h2&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170702_210019" src="images/Screenshot_20170702_210019.png" width="80%"&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Shark Architecture&lt;/h2&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170702_210127" src="images/Screenshot_20170702_210127.png" width="80%"&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;ä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ªæ–°çš„ç¼–ç¨‹æ¨¡å‹&lt;/h2&gt;
&lt;p&gt;MapReduce ç¼–ç¨‹æ¨¡å‹è¢«æå‡ºåè¢«å¹¿æ³›ä½¿ç”¨ï¼Œç®€åŒ–äº†å¤§æ•°æ®çš„ç¼–ç¨‹&lt;/p&gt;
&lt;p&gt;ä½†å®ƒåœ¨ä¸€äº›ç‰¹æ®Šåœºæ™¯ä¸‹è¡¨ç°ä¸ä½³ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®¸å¤šå¤æ‚åˆ†æçš„å‡½æ•°æ˜¯è¿­ä»£çš„ï¼Œæ¯”å¦‚è¯´æœºå™¨å­¦ä¹ å’Œå›¾ç®—æ³•ã€‚&lt;/li&gt;
&lt;li&gt;å®æ—¶æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„åœºæ™¯ï¼Œè¦æ±‚å’Œç”¨æˆ·äº¤äº’ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å³ä½¿ä¼ ç»Ÿ SQL ä»“åº“çš„å·¥ä½œè´Ÿè½½ä¹Ÿè¡¨ç°å‡ºå¾ˆå¼ºçš„æ—¶é—´å’Œç©ºé—´å±€éƒ¨æ€§ï¼Œè¿™æ˜¯å› ä¸ºæœ€è¿‘çš„äº‹å®è¡¨æ•°æ®å’Œå°ç»´åº¦è¡¨æ•°æ®ç»å¸¸é¢‘ç¹åœ°è¢«è¯»å–ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Sharké€Ÿåº¦å¿«çš„åŸå› &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Sparkå¹³å°æä¾›çš„åŸºäºå†…å­˜è¿­ä»£è®¡ç®—(RDD)&lt;/li&gt;
&lt;li&gt;partial DAG executionï¼šåœ¨ä¸€ä¸ªDAG ä»»åŠ¡è¿è¡Œäº†å‰å‡ ä¸ªé˜¶æ®µä¹‹åï¼ŒSpark å¯ä»¥åŸºäºè§‚æµ‹åˆ°çš„ç»Ÿè®¡æ•°æ®ï¼Œé€‰æ‹©ä¸€ä¸ªæ›´å¥½çš„è¿æ¥ç­–ç•¥æˆ–è€…æ›´åˆé€‚çš„å¹¶å‘åº¦ï¼Œä»è€Œèƒ½å¤Ÿé‡æ–°ä¼˜åŒ–æ­£åœ¨è¿è¡Œçš„æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;li&gt;åŸºäºåˆ—çš„å­˜å‚¨å’Œå‹ç¼©ï¼šæŠŠHQLè¡¨æ•°æ®æŒ‰åˆ—å­˜ï¼Œæ¯åˆ—æ˜¯ä¸€ä¸ªarrayï¼Œå­˜åœ¨JVMä¸Šï¼Œé¿å…äº†åºåˆ—åŒ–å’Œååºåˆ—å¸¦æ¥çš„ä½æ•ˆï¼ŒåŒæ—¶ï¼Œä¹Ÿé¿å…äº†JVM GCä½æ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170702_210324" src="images/Screenshot_20170702_210324.png" width="60%"&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Sharké€Ÿåº¦å¿«çš„åŸå› &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ä¼ ç»Ÿçš„MapReduceç³»ç»Ÿï¼Œå°±æ¯”å¦‚Hadoopï¼Œæ˜¯ä¸ºäº†è¿è¡Œé•¿è¾¾æ•°å°æ—¶çš„æ‰¹é‡ä½œä¸šè€Œè®¾è®¡çš„ï¼Œè€Œç»„æˆä½œä¸šçš„æ¯ä¸ªä»»åŠ¡å…¶è¿è¡Œæ—¶é—´åˆ™æœ‰æ•°åˆ†é’Ÿä¹‹ä¹…ï¼Œä»–ä»¬ä¼šåœ¨ç‹¬ç«‹çš„ç³»ç»Ÿè¿›ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œåœ¨æŸäº›æç«¯æƒ…å†µä¸‹æäº¤ä¸€ä¸ªä»»åŠ¡çš„å»¶è¿Ÿéå¸¸ä¹‹é«˜ã€‚&lt;/li&gt;
&lt;li&gt;Sparké‡‡ç”¨äº†äº‹ä»¶é©±åŠ¨çš„RPCç±»åº“æ¥å¯åŠ¨ä»»åŠ¡ï¼Œé€šè¿‡å¤ç”¨å·¥ä½œè¿›ç¨‹æ¥é¿å…ç³»ç»Ÿè¿›ç¨‹å¼€é”€ã€‚å®ƒèƒ½å¤Ÿåœ¨ä¸€ç§’é’Ÿå†…å¯åŠ¨ä¸Šåƒä¸ªä»»åŠ¡ï¼Œä»»åŠ¡ä¹‹é—´çš„å»¶æ—¶å°äº5æ¯«ç§’ï¼Œä»è€Œä½¿å¾—50-100æ¯«ç§’çš„ä»»åŠ¡ï¼Œ500æ¯«ç§’çš„ä½œä¸šå˜å¾—å¯èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;äºšç§’çº§çš„ä»»åŠ¡ä½¿å¾—å¼•æ“èƒ½å¤Ÿæ›´å¥½åœ°åœ¨å·¥ä½œèŠ‚ç‚¹ä¹‹é—´å¹³è¡¡ä»»åŠ¡çš„åˆ†é…ï¼Œç”šè‡³åœ¨æŸäº›èŠ‚ç‚¹é‡åˆ°äº†ä¸å¯é¢„çŸ¥çš„å»¶è¿Ÿ(ç½‘ç»œå»¶è¿Ÿæˆ–æ˜¯JVMåƒåœ¾å›æ”¶)çš„æƒ…å†µä¸‹é¢ä¹Ÿèƒ½è¾ƒå¥½åœ°å¹³è¡¡ã€‚åŒæ—¶å¯¹äºæ•°æ®å€¾æ–œä¹Ÿæœ‰å·¨å¤§çš„å¸®åŠ©ï¼Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;ä¸ºä»€ä¹ˆä¹‹å‰çš„MapReduceç³»ç»Ÿæ¯”è¾ƒæ…¢&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å®¹é”™æ‰€å¼•å…¥çš„æ˜‚è´µæ•°æ®å®ä½“åŒ–(data materialization)å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;å­±å¼±çš„æ•°æ®å¸ƒå±€(data layout)ï¼Œæ¯”å¦‚ç¼ºå°‘ç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œç­–ç•¥çš„å¼€é”€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢é’ˆå¯¹è¿™ä¸‰ç‚¹è¯´æ˜Sharkçš„ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;ä¸­é—´ç»“æœè¾“å‡º&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨MapReduceä»»åŠ¡å†…éƒ¨ï¼Œä¸ºäº†é˜²æ­¢Reduceä»»åŠ¡çš„å¤±è´¥ï¼ŒMapé€šå¸¸ä¼šæŠŠç»“æœå­˜å‚¨åœ¨ç£ç›˜ä¸Š(materialize)ã€‚&lt;/li&gt;
&lt;li&gt;é€šå¸¸ä¸€äº›æŸ¥è¯¢åœ¨ç¿»è¯‘åˆ°MapReduceä»»åŠ¡çš„æ—¶å€™ï¼Œå¾€å¾€ä¼šäº§ç”Ÿå¤šä¸ªstageï¼Œè€Œè¿™äº›ä¸²è”çš„stageåˆ™åˆä¾èµ–äºåº•å±‚æ–‡ä»¶ç³»ç»Ÿ(å¦‚HDFS)æ¥å­˜å‚¨æ¯ä¸€ä¸ªstageçš„è¾“å‡ºç»“æœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170702_193250" src="images/Screenshot_20170702_193250.png"&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170702_193305" src="images/Screenshot_20170702_193305.png"&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;ä¸­é—´ç»“æœè¾“å‡º&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Mapçš„è¾“å‡ºç»“æœå­˜å‚¨åœ¨ç£ç›˜ä¸Šæ˜¯ä¸ºäº†ç¡®ä¿èƒ½å¤Ÿæœ‰è¶³å¤Ÿçš„ç©ºé—´æ¥å­˜å‚¨è¿™äº›å¤§æ•°æ®æ‰¹é‡ä»»åŠ¡çš„è¾“å‡ºã€‚è€ŒMapçš„è¾“å‡ºå¹¶ä¸ä¼šå¤åˆ¶åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šå»ï¼Œå› æ­¤å¦‚æœæ‰§è¡ŒMapä»»åŠ¡çš„èŠ‚ç‚¹å¤±æ•ˆçš„è¯ä»ä¼šé€ æˆæ•°æ®ä¸¢å¤±ã€‚ç”±æ­¤å¯ä»¥æ¨å‡ºï¼Œå¦‚æœå°†è¿™éƒ¨åˆ†è¾“å‡ºæ•°æ®ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œä¸æ˜¯å…¨éƒ¨è¾“å‡ºåˆ°ç£ç›˜ä¸Šé¢ä¹Ÿæ˜¯åˆç†çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sharkå†…éƒ¨çš„Sparkå¼•æ“æ‰©å±•äº†MapReduceçš„æ‰§è¡Œæ¨¡å‹ï¼Œå°†MapReduceçš„æ‰§è¡Œæ¨¡å‹æ³›åŒ–æˆæ›´ä¸ºé€šç”¨çš„æ‰§è¡Œè®¡åˆ’å›¾(task DAG)ï¼Œå¯ä»¥å°†å¤šstageçš„ä»»åŠ¡ä¸²è”æ‰§è¡Œè€Œæ— éœ€å°†stageä¸­é—´ç»“æœè¾“å‡ºåˆ°HDFSä¸­å»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2&gt;åˆ—å¼å†…å­˜å­˜å‚¨&lt;/h2&gt;
&lt;p&gt;å†…å­˜ä¸­æ•°æ®è¡¨ç¤ºçš„3ç§æ–¹æ³•:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å†…å­˜ä¸­ç›´æ¥ç¼“å­˜ç£ç›˜ä¸Šåºåˆ—åŒ–åçš„æ•°æ®. åœ¨æŸ¥è¯¢æ—¶æ ¹æ®éœ€æ±‚è¿›è¡Œååºåˆ—åŒ–, ååºåˆ—åŒ–æ˜¯ç“¶é¢ˆ.&lt;/li&gt;
&lt;li&gt;å°†æ•°æ®åˆ†åŒºä½œä¸º JVM å¯¹è±¡é›†åˆå­˜å‚¨, å¯ä»¥é¿å…ååºåˆ—åŒ–, ä½†å ç”¨ç©ºé—´è¾ƒå¤§. å¤§é‡çš„ JVM å¯¹è±¡åŒæ—¶ä¼šå¯¼è‡´ JVM çš„åƒåœ¾æ”¶é›†è€—æ—¶ä¸¥é‡.&lt;/li&gt;
&lt;li&gt;åˆ—ç¤ºå†…å­˜å­˜å‚¨, æ¯ä¸€åˆ—ä»…åˆ›å»ºä¸€ä¸ª JVM å¯¹è±¡, å¯ä»¥å¸¦æ¥å¿«é€Ÿè®¿é—®, åƒåœ¾æ”¶é›†å’Œç´§å‡‘çš„æ•°æ®è¡¨ç¤ºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2&gt;æ•°æ®æ ¼å¼å’Œå¸ƒå±€&lt;/h2&gt;
&lt;p&gt;åˆ—å¼å†…å­˜å­˜å‚¨&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ååºåˆ—åŒ–æˆä¸ºäº†å¾ˆå¤§çš„ç“¶é¢ˆï¼Œåœ¨ç°ä»£çš„å•†ä¸šCPUs å•æ ¸çš„åºåˆ—åŒ–é€Ÿç‡ä»…ä»…åœ¨ 200MB/ç§’ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨Sharkä¸­é‡‡ç”¨äº†åŸºäºå†…å­˜çš„åˆ—å¼å­˜å‚¨ç»“æ„ï¼ŒSharkç®€å•åœ°å°†ä¸€ç»„åˆ—å¼å…ƒç»„å­˜å‚¨ä¸ºSparkå†…çš„ä¸€æ¡è®°å½•ï¼Œè€Œå¯¹äºåˆ—å¼å…ƒç»„å†…çš„ç»“æ„åˆ™æœ‰Sharkè´Ÿè´£è§£æã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸€åˆ—ä»…åˆ›å»ºä¸€ä¸ª JVM å¯¹è±¡ï¼Œå¯ä»¥å¸¦æ¥å¿«é€Ÿçš„ GCs å’Œç´§å‡‘çš„æ•°æ®è¡¨ç¤ºã€‚é€šè¿‡å»‰ä»·çš„å‡ ä¹ä¸éœ€è¦ CPU æˆæœ¬çš„å‹ç¼©æŠ€æœ¯ï¼Œå¯ä»¥å°†åˆ—æ•°æ®çš„ç©ºé—´å ç”¨è¿›ä¸€æ­¥å‡å°‘ã€‚&lt;/li&gt;
&lt;li&gt;åˆ—å¼æ•°æ®å¸¦æ¥äº†æ›´å¥½çš„ç¼“å­˜è¡Œä¸ºï¼Œç‰¹åˆ«æ˜¯å¯¹é‚£äº›åœ¨ç‰¹å®šåˆ—ä¸Šé¢‘ç¹è¿›è¡Œèšåˆè®¡ç®—çš„åˆ†ææŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;æ•°æ®æ ¼å¼å’Œå¸ƒå±€&lt;/h2&gt;
&lt;p&gt;è”åˆåˆ†åŒº&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦ä¸€ä¸ªSparkç‹¬æœ‰çš„ç‰¹æ€§æ˜¯èƒ½å¤Ÿæ§åˆ¶æ•°æ®åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šçš„åˆ†åŒºï¼Œè¿™ä¸ºSharkå¸¦æ¥äº†ä¸€ç§æ–°çš„åŠŸèƒ½ï¼šå¯¹è¡¨è¿›è¡Œè”åˆåˆ†åŒº(co-partition)ã€‚&lt;/li&gt;
&lt;li&gt;Shark å…è®¸ä¸¤ä¸ªè¡¨åŸºäºå…¬å…±é”®è¿›è¡ŒååŒåˆ†åŒºï¼Œä»è€Œå¯ä»¥åœ¨åç»­çš„æŸ¥è¯¢ä¸­æä¾›å¿«é€Ÿçš„è¿æ¥æ“ä½œã€‚å®ƒåœ¨è¡¨çš„åˆ›å»ºå£°æ˜ä¸­å¢åŠ äº† DISTRIBUTE BY è¯­æ³•ï¼Œç”¨æ¥æŒ‡å®šå¯¹æŸä¸ªåˆ—è¿›è¡Œåˆ†åŒºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;æ‰§è¡Œç­–ç•¥&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;partial DAG execution (PDE)ï¼Œè¿™ä½¿å¾—Sparkèƒ½å¤Ÿåœ¨åŸºäºæ•°æ®ç»Ÿè®¡çš„åŸºç¡€ä¸Šæ”¹å˜åç»­æ‰§è¡Œè®¡åˆ’ã€‚&lt;/li&gt;
&lt;li&gt;PDEä¸å…¶ä»–ç³»ç»Ÿ(DryadLINQ)çš„è¿è¡Œæ—¶æ‰§è¡Œè®¡åˆ’å›¾é‡å†™çš„ä¸åŒåœ¨äºï¼šå®ƒèƒ½å¤Ÿæ”¶é›†é”®å€¼èŒƒå›´å†…çš„ç»†ç²’åº¦ç»Ÿè®¡æ•°æ®ï¼›èƒ½å¤Ÿå®Œå…¨é‡æ–°é€‰æ‹©joinçš„æ‰§è¡Œç­–ç•¥ï¼Œå¦‚broadcast joinï¼Œè€Œä¸ä»…ä»…æ˜¯é€‰æ‹©Reduceä»»åŠ¡çš„ä¸ªæ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;åˆ†åŒºç»Ÿè®¡å’Œæ˜ å°„ä¿®å‰ª&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ºäº†åˆ©ç”¨åˆ—ï¼ˆcolumnï¼‰åœ¨è‡ªç„¶èšåˆçš„ä¼˜åŠ¿ï¼ŒShark åœ¨æ¯ä¸€ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šçš„çš„å†…å­˜å­˜å‚¨ä¼šåœ¨æ•°æ®åŠ è½½è¿‡ç¨‹ä¸­é™„å¸¦æ”¶é›†ç»Ÿè®¡ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªåˆ†åŒºæ”¶é›†æ¥çš„ç»Ÿè®¡ä¿¡æ¯åŒ…å«äº†æ¯ä¸€ä¸ªåˆ—çš„èŒƒå›´, å½“ä¸åŒå€¼çš„ä¸ªæ•°è¾ƒå°‘çš„æ—¶å€™, ä¼šåŒ…å«æ‰€æœ‰ä¸åŒçš„å€¼ã€‚æ‰€æ”¶é›†åˆ°çš„ç»Ÿè®¡ä¿¡æ¯ä¼šè¢«å‘é€å›é©±åŠ¨èŠ‚ç‚¹å¹¶å­˜å‚¨åœ¨å†…å­˜ä¸­, åœ¨æŸ¥è¯¢æ‰§è¡Œè¿‡ç¨‹ä¸­ç”¨äºä¿®å‰ªåˆ†åŒº.&lt;/li&gt;
&lt;li&gt;å½“å‘å‡ºä¸€ä¸ªæŸ¥è¯¢åï¼ŒShark ä¼šé’ˆå¯¹æŸ¥è¯¢çš„ç›®æ ‡è¯„ä¼°æ‰€æœ‰çš„åˆ†åŒºç»Ÿè®¡ä¿¡æ¯ï¼Œç„¶åä¿®å‰ªæ‰æ²¡æœ‰åŒ¹é…åˆ°ç›®æ ‡çš„åˆ†åŒºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;Performance&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨äº†å››ä¸ªæ•°æ®é›†å¯¹ Shark è¿›è¡Œäº†è¯„ä¼°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Pavlo ç­‰äººçš„åŸºå‡†æµ‹è¯•ï¼šç”¨ 2.1TB çš„æ•°æ®é‡ç°äº† Pavlo ç­‰äººå¯¹ MapReduce å’Œåˆ†ææ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„æ¯”è¾ƒ&lt;/li&gt;
&lt;li&gt;TPC-H æ•°æ®é›†:ç”± DBGEN ç¨‹åºäº§ç”Ÿäº† 100G å’Œ 1TB çš„æ•°æ®é›†&lt;/li&gt;
&lt;li&gt;1.7TBçš„çœŸå®çš„ Hive ä»“åº“&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;100GBçš„æœºå™¨å­¦ä¹ æ•°æ®é›†&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®éªŒæ˜¾ç¤ºåŒæ—¶ä½¿ç”¨ RDD å’Œä¸Šé¢æåˆ°çš„ä¼˜åŒ–æ–¹æ³•ï¼Œåœ¨ SQL æŸ¥è¯¢æ–¹é¢ï¼ŒSpark çš„é€Ÿåº¦å¯ä»¥è¾¾åˆ°Hive çš„ 100 å€ï¼›åœ¨è¿è¡Œè¿­ä»£çš„æœºå™¨å­¦ä¹ ç®—æ³•æ–¹é¢ï¼ŒSpark çš„é€Ÿåº¦å¯ä»¥è¾¾åˆ° Hadoop çš„ 100 å€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;å¯ä»¥åœ¨å‡ ç§’é’Ÿå†…ä»æŸ¥è¯¢é”™è¯¯ä¸­æ¢å¤&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2&gt;Pavlo ç­‰äººçš„åŸºå‡†æµ‹è¯•&lt;/h2&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170702_193839" src="images/Screenshot_20170702_193839.png" width="50%"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170702_211547" src="images/Screenshot_20170702_211547.png" width="50%"&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;å¾®åŸºå‡†æµ‹è¯•&lt;/h2&gt;
&lt;p&gt;&lt;img alt="" src="images/Screenshot_20170702_194031.png" width="40%"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="images/Screenshot_20170702_194038.png" width="40%"&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;å®¹é”™&lt;/h2&gt;
&lt;p&gt;åœ¨å‡ºç°èŠ‚ç‚¹é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œå¯¹ 100GB lineitem è¡¨ä½¿ç”¨ group by æŸ¥è¯¢æ¥æµ‹è¯•æŸ¥è¯¢æ€§èƒ½ã€‚åœ¨å°† lineitem çš„æ•°æ®åŠ è½½åˆ° shark çš„å†…å­˜åï¼Œæˆ‘ä»¬åˆ‡æ–­äº†ä¸€å°å·¥ä½œçš„æœºå™¨å¹¶é‡æ–°è¿è¡Œè¯¥æŸ¥è¯¢ã€‚ Shark èƒ½å®Œç¾åœ°ä»æ•…éšœä¸­æ¢å¤ï¼Œå¹¶ä»¥å¹¶è¡Œçš„æ–¹å¼åœ¨å…¶ä»– 49 ä¸ªèŠ‚ç‚¹ä¸Šé‡æ–°æ„å»ºä¸¢å¤±çš„æ•°æ®åˆ†åŒºã€‚è¿™ä¸ªæ¢å¤è¿‡ç¨‹å¯¹æ€§èƒ½æœ‰å°è®¸çš„å½±å“ï¼Œä½†æ¯”é‡æ–°åŠ è½½æ•´ä¸ªæ•°æ®é›†å¹¶é‡æ–°è¿›è¡ŒæŸ¥è¯¢çš„æˆæœ¬ è¦ä½å¾ˆå¤š (14 vs 34 ç§’)ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;çœŸå®çš„ Hive æ•°æ®ä»“åº“æŸ¥è¯¢&lt;/h2&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170702_212039" src="images/Screenshot_20170702_212039.png" width="60%"&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;æœºå™¨å­¦ä¹ &lt;/h2&gt;
&lt;p&gt;&lt;img alt="Screenshot_20170702_194105" src="images/Screenshot_20170702_194105.png" width="60%"&gt;&lt;/p&gt;</content><category term="spark"></category><category term="big data"></category><category term="SQL"></category><category term="SQL on Hadoop"></category><category term="shark"></category><category term="hadoop"></category></entry><entry><title>Energy measurements in Linux</title><link href="https://blog.chih.me/read-cpu-power-with-RAPL.html" rel="alternate"></link><published>2017-01-31T00:00:00+08:00</published><updated>2017-01-31T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2017-01-31:/read-cpu-power-with-RAPL.html</id><summary type="html">&lt;h2&gt;RAPL&lt;/h2&gt;
&lt;p&gt;RAPL provides a set of counters providing energy and power consumption information. RAPL is not an analog power meter, but rather uses a software power model. This software power model estimates energy usage by using hardware performance counters and I/O models. Based on our measurements, they match actual â€¦&lt;/p&gt;</summary><content type="html">&lt;h2&gt;RAPL&lt;/h2&gt;
&lt;p&gt;RAPL provides a set of counters providing energy and power consumption information. RAPL is not an analog power meter, but rather uses a software power model. This software power model estimates energy usage by using hardware performance counters and I/O models. Based on our measurements, they match actual power measurements.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The processor has one or moreÂ &lt;em&gt;packages&lt;/em&gt;. These are part of the actual processor that you buy from Intel. Client processors (e.g. Core i3/i5/i7) have one package. Server processors (e.g. Xeon) typically have two or more packages.&lt;/li&gt;
&lt;li&gt;Each package contains multipleÂ &lt;em&gt;cores&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Each core typically hasÂ hyper-threading, which means it contains two logicalÂ &lt;em&gt;CPUs&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;The part of the package outside the cores is called theÂ &lt;em&gt;uncore&lt;/em&gt; our &lt;em&gt;system agent&lt;/em&gt;.Â It includes various components including the L3 cache, memory controller, and, for processors that have one, the integrated GPU.&lt;/li&gt;
&lt;li&gt;RAM is separate from the processor.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="power-planes" src="images/power-planes.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Recent (Sandy Bridge and later) Intel processors that implement theÂ &lt;em&gt;RAPL&lt;/em&gt;Â (Running Average Power Limit) interface that provides MSRs containing energy consumption estimates for up to fourÂ &lt;em&gt;power planes&lt;/em&gt;Â orÂ &lt;em&gt;domains&lt;/em&gt;Â of a machine, as seen in the diagram above.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PKG: The entire package.&lt;/li&gt;
&lt;li&gt;PP0: The cores.&lt;/li&gt;
&lt;li&gt;PP1: An uncore device, usually the GPU (not available on all processor models.)&lt;/li&gt;
&lt;li&gt;DRAM: main memory (not available on all processor models.)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The following relationship holds: PP0 + PP1 &amp;lt;= PKG. DRAM is independent of the other three domains.&lt;/p&gt;
&lt;p&gt;Tools that can take RAPL readings include the following.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;mozilla_rapl&lt;/code&gt;: all planes; Linux and Mac.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Intel Power Gadget&lt;/code&gt;: PKG and PP0 planes; Windows, Mac and Linux.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;perf&lt;/code&gt;: all planes; Linux.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;turbostat&lt;/code&gt;: PKG, PP0 and PP1 planes; Linux.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PAPI&lt;/code&gt;: read RAPL events&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;MSR&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;A model-specific register (MSR) is any of various control registers in the x86 instruction set used for debugging, program execution tracing, computer performance monitoring, and toggling certain CPU features.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;https://lwn.net/Articles/545745/&lt;/p&gt;
&lt;p&gt;https://01.org/blogs/2014/running-average-power-limit-%E2%80%93-rapl&lt;/p&gt;
&lt;p&gt;https://developer.mozilla.org/en-US/docs/Mozilla/Performance/Power_profiling_overview&lt;/p&gt;
&lt;p&gt;https://access.redhat.com/documentation/zh-CN/Red_Hat_Enterprise_Linux/7/html/Power_Management_Guide/Core_Infrastructure.html&lt;/p&gt;
&lt;h2&gt;mozilla_rapl&lt;/h2&gt;
&lt;p&gt;åŸå…ˆæ˜¯firefoxä¸­çš„ä¸€ä¸ªæ€§èƒ½ã€åŠŸè€—åˆ†æè½¯ä»¶ï¼Œæˆ‘å»é™¤äº†ä¸Linuxæ— å…³çš„ä»£ç ï¼Œæ·»åŠ äº†ç¼–è¯‘è„šæœ¬ï¼Œç°åœ¨å¯ä»¥ç‹¬ç«‹äºfirefoxç¼–è¯‘è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;https://github.com/chih7/rapl&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# chih @ archlinux in ~/PMU/firefox_power [18:08:31] C:1&lt;/span&gt;
$ sudo ./rapl
&lt;span class="o"&gt;[&lt;/span&gt;sudo&lt;span class="o"&gt;]&lt;/span&gt; password &lt;span class="k"&gt;for&lt;/span&gt; chih: 
    total &lt;span class="nv"&gt;W&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; _pkg_ &lt;span class="o"&gt;(&lt;/span&gt;cores + _gpu_ + other&lt;span class="o"&gt;)&lt;/span&gt; + _ram_ W
&lt;span class="c1"&gt;#01  1.90 W =  1.45 ( 0.20 +  0.02 +  1.22) +  0.45 W&lt;/span&gt;
&lt;span class="c1"&gt;#02  1.77 W =  1.35 ( 0.11 +  0.03 +  1.21) +  0.42 W&lt;/span&gt;
&lt;span class="c1"&gt;#03  1.80 W =  1.39 ( 0.17 +  0.02 +  1.19) +  0.41 W&lt;/span&gt;
&lt;span class="c1"&gt;#04  1.87 W =  1.42 ( 0.17 +  0.02 +  1.23) +  0.45 W&lt;/span&gt;
&lt;span class="c1"&gt;#05  1.77 W =  1.36 ( 0.16 +  0.02 +  1.19) +  0.41 W&lt;/span&gt;
^C
&lt;span class="m"&gt;13&lt;/span&gt; samples taken over a period of &lt;span class="m"&gt;13&lt;/span&gt;.000 seconds

Distribution of &lt;span class="s1"&gt;&amp;#39;total&amp;#39;&lt;/span&gt; values:
            &lt;span class="nv"&gt;mean&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="m"&gt;1&lt;/span&gt;.83 W
         std &lt;span class="nv"&gt;dev&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;.04 W
  0th &lt;span class="nv"&gt;percentile&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="m"&gt;1&lt;/span&gt;.77 W &lt;span class="o"&gt;(&lt;/span&gt;min&lt;span class="o"&gt;)&lt;/span&gt;
  5th &lt;span class="nv"&gt;percentile&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="m"&gt;1&lt;/span&gt;.77 W
 25th &lt;span class="nv"&gt;percentile&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="m"&gt;1&lt;/span&gt;.78 W
 50th &lt;span class="nv"&gt;percentile&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="m"&gt;1&lt;/span&gt;.82 W
 75th &lt;span class="nv"&gt;percentile&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="m"&gt;1&lt;/span&gt;.86 W
 95th &lt;span class="nv"&gt;percentile&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="m"&gt;1&lt;/span&gt;.90 W
100th &lt;span class="nv"&gt;percentile&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="m"&gt;1&lt;/span&gt;.90 W &lt;span class="o"&gt;(&lt;/span&gt;max&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;intel power gadget&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo ./power_gadget -e &lt;span class="m"&gt;1000&lt;/span&gt; -d &lt;span class="m"&gt;10&lt;/span&gt; 
&lt;span class="o"&gt;[&lt;/span&gt;sudo&lt;span class="o"&gt;]&lt;/span&gt; password &lt;span class="k"&gt;for&lt;/span&gt; chih: 
RAPL not supported, or machine model 406e3 not recognized.
Init failed!
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;The power gadget doesn't support your CPU though: the RAPL initialisation code is table-driven, and it doesn't know about Skylake CPUs (or even Broadwell). It only knows about Sandy Bridge, Ivy Bridge and Haswell (and even then, not all Haswell CPUs)...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç”±äºlinuxä¸‹çš„intel power gadgetç‰ˆæœ¬æœªåŠæ—¶æ›´æ–°ï¼Œå¯¹äºæ–°cpuï¼Œæ¯”å¦‚æˆ‘ä½¿ç”¨çš„Skylakeæ¶æ„çš„cpuï¼Œéœ€è¦æ‰“ä¸€ä¸ªè¡¥ä¸ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="c1"&gt;//chih&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mh"&gt;0x406e0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="cm"&gt;/* Skylake */&lt;/span&gt;
    &lt;span class="c1"&gt;//end&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mh"&gt;0x40660&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="cm"&gt;/* Haswell:            0x4066X (Tables 35:11,12,14,17,19) */&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mh"&gt;0x40650&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="cm"&gt;/* Haswell:            0x4065X (Tables 35:11,12,14,17,18,19) */&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mh"&gt;0x306c0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="cm"&gt;/* Haswell:            0x306cX (Tables 35:11,12,14,17,19) */&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mh"&gt;0x306a0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="cm"&gt;/* IvyBridge client:   0x306aX (Tables 35:11,12,14) */&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mh"&gt;0x206a0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="cm"&gt;/* SandyBridge client: 0x206aX (Tables 35:11,12) */&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# chih @ archlinux in ~/PMU/power_gadget [14:38:42] &lt;/span&gt;
$ sudo ./power_gadget -e &lt;span class="m"&gt;1000&lt;/span&gt; -d &lt;span class="m"&gt;10&lt;/span&gt; 
System Time,RDTSC,Elapsed Time &lt;span class="o"&gt;(&lt;/span&gt;sec&lt;span class="o"&gt;)&lt;/span&gt;,IA Frequency_0 &lt;span class="o"&gt;(&lt;/span&gt;MHz&lt;span class="o"&gt;)&lt;/span&gt;,Processor Power_0 &lt;span class="o"&gt;(&lt;/span&gt;Watt&lt;span class="o"&gt;)&lt;/span&gt;,Cumulative Processor Energy_0 &lt;span class="o"&gt;(&lt;/span&gt;Joules&lt;span class="o"&gt;)&lt;/span&gt;,Cumulative Processor Energy_0 &lt;span class="o"&gt;(&lt;/span&gt;mWh&lt;span class="o"&gt;)&lt;/span&gt;,IA Power_0 &lt;span class="o"&gt;(&lt;/span&gt;Watt&lt;span class="o"&gt;)&lt;/span&gt;,Cumulative IA Energy_0 &lt;span class="o"&gt;(&lt;/span&gt;Joules&lt;span class="o"&gt;)&lt;/span&gt;,Cumulative IA Energy_0&lt;span class="o"&gt;(&lt;/span&gt;mWh&lt;span class="o"&gt;)&lt;/span&gt;,GT Power_0 &lt;span class="o"&gt;(&lt;/span&gt;Watt&lt;span class="o"&gt;)&lt;/span&gt;,Cumulative GT Energy_0 &lt;span class="o"&gt;(&lt;/span&gt;Joules&lt;span class="o"&gt;)&lt;/span&gt;,Cumulative GT Energy_0&lt;span class="o"&gt;(&lt;/span&gt;mWh&lt;span class="o"&gt;)&lt;/span&gt;

......

Total Elapsed Time&lt;span class="o"&gt;(&lt;/span&gt;sec&lt;span class="o"&gt;)=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;.0297

Total Processor Energy_0&lt;span class="o"&gt;(&lt;/span&gt;Joules&lt;span class="o"&gt;)=&lt;/span&gt;&lt;span class="m"&gt;17&lt;/span&gt;.8525
Total Processor Energy_0&lt;span class="o"&gt;(&lt;/span&gt;mWh&lt;span class="o"&gt;)=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;.9590
Average Processor Power_0&lt;span class="o"&gt;(&lt;/span&gt;Watt&lt;span class="o"&gt;)=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.7800

Total IA Energy_0&lt;span class="o"&gt;(&lt;/span&gt;Joules&lt;span class="o"&gt;)=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;.7968
Total IA Energy_0&lt;span class="o"&gt;(&lt;/span&gt;mWh&lt;span class="o"&gt;)=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.0547
Average IA Power_0&lt;span class="o"&gt;(&lt;/span&gt;Watt&lt;span class="o"&gt;)=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.3786

Total GT Energy_0&lt;span class="o"&gt;(&lt;/span&gt;Joules&lt;span class="o"&gt;)=&lt;/span&gt;&lt;span class="m"&gt;40348802750122148682202448929579954083587538418336263106019013328588433891916342955629569820500905624381003637605195948399507838978513675817091564240213448540197430240015810560&lt;/span&gt;.0000
Total GT Energy_0&lt;span class="o"&gt;(&lt;/span&gt;mWh&lt;span class="o"&gt;)=&lt;/span&gt;&lt;span class="m"&gt;11208000763922819273654924813042885804926161178964146820669218906461918837197055882285886611228023711591975233705039549465180590407264871893995315391999381929938313125054906368&lt;/span&gt;.0000
Average GT Power_0&lt;span class="o"&gt;(&lt;/span&gt;Watt&lt;span class="o"&gt;)=&lt;/span&gt;&lt;span class="m"&gt;4022936931619314615522564571277674057729988879436087598206455402730989779423177023450588030905067401122709863565105607495828398364105878169848967030480708805215802925837713408&lt;/span&gt;.0000

&lt;span class="nv"&gt;TSC&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;21411847472916&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;rapl-read&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://web.eece.maine.edu/~vweaver/projects/rapl/index.html"&gt;http://web.eece.maine.edu/~vweaver/projects/rapl/index.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;There are currently &lt;em&gt;three&lt;/em&gt; ways to read RAPL results using the Linux kernel:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Reading the files underÂ &lt;code&gt;/sys/class/powercap/intel-rapl/intel-rapl:0&lt;/code&gt;Â using the powercap interface. This requires no special permissions, and was introduced in Linux 3.13&lt;/li&gt;
&lt;li&gt;Using the perf_event interface with Linux 3.14 or newer. This requires root or a paranoid less than 1 (as do all system wide measurements with -a)Â &lt;code&gt;sudo perf stat -a -e "power/energy-cores/" /bin/ls&lt;/code&gt;Â Available events can be found viaÂ &lt;code&gt;perf list&lt;/code&gt;Â or under&lt;code&gt;/sys/bus/event_source/devices/power/events/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Using raw-access to the underlying MSRs under &lt;code&gt;/dev/msr&lt;/code&gt;. This requires root.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Not that you cannot get readings for individual processes, the results are for the entire CPU socket.Â &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# chih @ archlinux in ~/PMU/uarch-configure/rapl-read on git:master x [14:41:53] &lt;/span&gt;
$ ./rapl-read -s 

RAPL &lt;span class="nb"&gt;read&lt;/span&gt; -- use -s &lt;span class="k"&gt;for&lt;/span&gt; sysfs, -p &lt;span class="k"&gt;for&lt;/span&gt; perf_event, -m &lt;span class="k"&gt;for&lt;/span&gt; msr

Found Skylake Processor &lt;span class="nb"&gt;type&lt;/span&gt;
        &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;, 
        Detected &lt;span class="m"&gt;4&lt;/span&gt; cores in &lt;span class="m"&gt;1&lt;/span&gt; packages


Trying sysfs powercap interface to gather results

        Sleeping &lt;span class="m"&gt;1&lt;/span&gt; second

        Package &lt;span class="m"&gt;0&lt;/span&gt;
                package-0       : &lt;span class="m"&gt;1&lt;/span&gt;.606746J
                core    : &lt;span class="m"&gt;0&lt;/span&gt;.327941J
                uncore  : &lt;span class="m"&gt;0&lt;/span&gt;.040039J
                dram    : &lt;span class="m"&gt;0&lt;/span&gt;.481933J
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# chih @ archlinux in ~/PMU/uarch-configure/rapl-read on git:master x [14:42:28] C:127&lt;/span&gt;
$ sudo ./rapl-read -p 

RAPL &lt;span class="nb"&gt;read&lt;/span&gt; -- use -s &lt;span class="k"&gt;for&lt;/span&gt; sysfs, -p &lt;span class="k"&gt;for&lt;/span&gt; perf_event, -m &lt;span class="k"&gt;for&lt;/span&gt; msr

Found Skylake Processor &lt;span class="nb"&gt;type&lt;/span&gt;
        &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;, 
        Detected &lt;span class="m"&gt;4&lt;/span&gt; cores in &lt;span class="m"&gt;1&lt;/span&gt; packages


Trying perf_event interface to gather results

        &lt;span class="nv"&gt;Event&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;energy-cores &lt;span class="nv"&gt;Config&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nv"&gt;scale&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.32831e-10 &lt;span class="nv"&gt;units&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;Joules 
        &lt;span class="nv"&gt;Event&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;energy-gpu &lt;span class="nv"&gt;Config&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt; &lt;span class="nv"&gt;scale&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.32831e-10 &lt;span class="nv"&gt;units&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;Joules 
        &lt;span class="nv"&gt;Event&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;energy-pkg &lt;span class="nv"&gt;Config&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="nv"&gt;scale&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.32831e-10 &lt;span class="nv"&gt;units&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;Joules 
        &lt;span class="nv"&gt;Event&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;energy-ram &lt;span class="nv"&gt;Config&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="nv"&gt;scale&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.32831e-10 &lt;span class="nv"&gt;units&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;Joules 
        &lt;span class="nv"&gt;Event&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;energy-psys &lt;span class="nv"&gt;Config&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt; &lt;span class="nv"&gt;scale&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.32831e-10 &lt;span class="nv"&gt;units&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;Joules 

        Sleeping &lt;span class="m"&gt;1&lt;/span&gt; second

        Package &lt;span class="m"&gt;0&lt;/span&gt;:
                energy-cores Energy Consumed: &lt;span class="m"&gt;0&lt;/span&gt;.364807 Joules
                energy-gpu Energy Consumed: &lt;span class="m"&gt;0&lt;/span&gt;.079407 Joules
                energy-pkg Energy Consumed: &lt;span class="m"&gt;1&lt;/span&gt;.690308 Joules
                energy-ram Energy Consumed: &lt;span class="m"&gt;0&lt;/span&gt;.502747 Joules
                energy-psys Energy Consumed: &lt;span class="m"&gt;5&lt;/span&gt;.918152 Joules
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# chih @ archlinux in ~/PMU/uarch-configure/rapl-read on git:master x [14:43:02] &lt;/span&gt;
$ sudo ./rapl-read -m

RAPL &lt;span class="nb"&gt;read&lt;/span&gt; -- use -s &lt;span class="k"&gt;for&lt;/span&gt; sysfs, -p &lt;span class="k"&gt;for&lt;/span&gt; perf_event, -m &lt;span class="k"&gt;for&lt;/span&gt; msr

Found Skylake Processor &lt;span class="nb"&gt;type&lt;/span&gt;
        &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;, 
        Detected &lt;span class="m"&gt;4&lt;/span&gt; cores in &lt;span class="m"&gt;1&lt;/span&gt; packages


Trying /dev/msr interface to gather results

        Listing paramaters &lt;span class="k"&gt;for&lt;/span&gt; package &lt;span class="c1"&gt;#0&lt;/span&gt;
                Power &lt;span class="nv"&gt;units&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;.125W
                CPU Energy &lt;span class="nv"&gt;units&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;.00006104J
                DRAM Energy &lt;span class="nv"&gt;units&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;.00006104J
                Time &lt;span class="nv"&gt;units&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;.00097656s

                Package thermal spec: &lt;span class="m"&gt;15&lt;/span&gt;.000W
                Package minimum power: &lt;span class="m"&gt;0&lt;/span&gt;.000W
                Package maximum power: &lt;span class="m"&gt;0&lt;/span&gt;.000W
                Package maximum &lt;span class="nb"&gt;time&lt;/span&gt; window: &lt;span class="m"&gt;0&lt;/span&gt;.000000s
                Package power limits are unlocked
                Package power limit &lt;span class="c1"&gt;#1: 25.000W for 0.107422s (enabled, clamped)&lt;/span&gt;
                Package power limit &lt;span class="c1"&gt;#2: 25.000W for 0.032227s (enabled, not_clamped)&lt;/span&gt;


        Sleeping &lt;span class="m"&gt;1&lt;/span&gt; second

        Package &lt;span class="m"&gt;0&lt;/span&gt;:
                Package energy: &lt;span class="m"&gt;1&lt;/span&gt;.657654J
                PowerPlane0 &lt;span class="o"&gt;(&lt;/span&gt;cores&lt;span class="o"&gt;)&lt;/span&gt;: &lt;span class="m"&gt;0&lt;/span&gt;.353638J

Note: the energy measurements can overflow in 60s or so
      so try to sample the counters more often than that.
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;rapl_basic&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# chih @ archlinux in ~/PMU/papi-5.5.1/src [21:38:11] &lt;/span&gt;
$ ./configure --with-components&lt;span class="o"&gt;=&lt;/span&gt;rapl &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; make &lt;span class="c1"&gt;# compile papi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# chih @ archlinux in ~/PMU/papi-5.5.1/src/components/rapl/tests [21:39:09] &lt;/span&gt;
$ sudo ./rapl_basic
Trying all RAPL events
Found rapl component at cid &lt;span class="m"&gt;2&lt;/span&gt;

Starting measurements...

Sleeping &lt;span class="m"&gt;1&lt;/span&gt; second...

Stopping measurements, took &lt;span class="m"&gt;1&lt;/span&gt;.000s, gathering results...

Scaled energy measurements:
rapl:::PACKAGE_ENERGY:PACKAGE0              &lt;span class="m"&gt;1&lt;/span&gt;.150513 J  &lt;span class="o"&gt;(&lt;/span&gt;Average Power &lt;span class="m"&gt;1&lt;/span&gt;.2W&lt;span class="o"&gt;)&lt;/span&gt;
rapl:::DRAM_ENERGY:PACKAGE0                 &lt;span class="m"&gt;0&lt;/span&gt;.640137 J  &lt;span class="o"&gt;(&lt;/span&gt;Average Power &lt;span class="m"&gt;0&lt;/span&gt;.6W&lt;span class="o"&gt;)&lt;/span&gt;
rapl:::PP0_ENERGY:PACKAGE0                  &lt;span class="m"&gt;0&lt;/span&gt;.379883 J  &lt;span class="o"&gt;(&lt;/span&gt;Average Power &lt;span class="m"&gt;0&lt;/span&gt;.4W&lt;span class="o"&gt;)&lt;/span&gt;

Energy measurement counts:
rapl:::PACKAGE_ENERGY_CNT:PACKAGE0             &lt;span class="m"&gt;18850&lt;/span&gt;    0x0049a2
rapl:::DRAM_ENERGY_CNT:PACKAGE0                &lt;span class="m"&gt;10488&lt;/span&gt;    0x0028f8
rapl:::PP0_ENERGY_CNT:PACKAGE0                  &lt;span class="m"&gt;6223&lt;/span&gt;    0x00184f

Scaled Fixed values:
rapl:::THERMAL_SPEC:PACKAGE0                  &lt;span class="m"&gt;15&lt;/span&gt;.000 W
rapl:::MINIMUM_POWER:PACKAGE0                  &lt;span class="m"&gt;0&lt;/span&gt;.000 W
rapl:::MAXIMUM_POWER:PACKAGE0                  &lt;span class="m"&gt;0&lt;/span&gt;.000 W
rapl:::MAXIMUM_TIME_WINDOW:PACKAGE0            &lt;span class="m"&gt;0&lt;/span&gt;.000 s

Fixed value counts:
rapl:::THERMAL_SPEC_CNT:PACKAGE0                 &lt;span class="m"&gt;120&lt;/span&gt;    0x000078
rapl:::MINIMUM_POWER_CNT:PACKAGE0                  &lt;span class="m"&gt;0&lt;/span&gt;    &lt;span class="m"&gt;00000000&lt;/span&gt;
rapl:::MAXIMUM_POWER_CNT:PACKAGE0                  &lt;span class="m"&gt;0&lt;/span&gt;    &lt;span class="m"&gt;00000000&lt;/span&gt;
rapl:::MAXIMUM_TIME_WINDOW_CNT:PACKAGE0            &lt;span class="m"&gt;0&lt;/span&gt;    &lt;span class="m"&gt;00000000&lt;/span&gt;
rapl_basic.c                           PASSED
&lt;/pre&gt;&lt;/div&gt;</content><category term="linux"></category><category term="intel"></category><category term="CPU"></category><category term="power"></category><category term="kernel"></category><category term="rapl"></category></entry><entry><title>Ubuntu 16.04 ä¸‹ CPU é¢‘ç‡ä¸åŠŸè€—å…³ç³»</title><link href="https://blog.chih.me/power-with-different-cpufreq.html" rel="alternate"></link><published>2016-12-25T00:00:00+08:00</published><updated>2016-12-25T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2016-12-25:/power-with-different-cpufreq.html</id><summary type="html">&lt;h2&gt;ç¡¬ä»¶ç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;å®éªŒæœåŠ¡å™¨æ­è½½ä¸¤é¢— Intel E5645 å¤„ç†å™¨ï¼Œ24å— SAS+SATA æœºæ¢°ç¡¬ç›˜ã€‚E5645 ä¸º 6 æ ¸å¤„ç†å™¨ï¼Œå¹¶æ”¯æŒè¶…çº¿ç¨‹æŠ€æœ¯ï¼ˆIntelÂ® Hyper-Threading Technologyï¼‰ï¼ŒæœåŠ¡å™¨å…± 24 ä¸ªé€»è¾‘æ ¸ï¼ŒåŸºæœ¬æ—¶é’Ÿé¢‘ç‡ä¸º 2.40 GHz ã€‚&lt;/p&gt;
&lt;h2&gt;è½¯ä»¶ç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;Ubuntu Server 16.04.1 LTS&lt;/p&gt;
&lt;h2&gt;CPU é¢‘ç‡é©±åŠ¨ç¨‹åºä¸å·¥å…·&lt;/h2&gt;
&lt;p&gt;æ“ä½œç³»ç»Ÿé€šè¿‡CPUè°ƒé¢‘å¯ä»¥æ ¹æ®è´Ÿè½½åŠ¨æ€è°ƒèŠ‚CPUå·¥ä½œé¢‘ç‡ï¼Œè¾¾åˆ°çœç”µçš„ç›®çš„ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥è‡ªåŠ¨è¿›è¡Œï¼Œä¹Ÿå¯ä»¥ç”±ç”¨æˆ·ç©ºé—´(userspace)ç¨‹åºæ‰‹åŠ¨è°ƒèŠ‚ã€‚Linux å†…æ ¸å®ç°äº†CPU è°ƒé¢‘ï¼Œè¯¥é©±åŠ¨è¢«ç§°ä¸º CPUfreqï¼Œ ä» 3.4 å†…æ ¸å¼€å§‹ï¼Œå†…æ ¸ä¼šè‡ªåŠ¨è½½å…¥ç›¸åº”çš„å†…æ ¸æ¨¡å—ï¼Œé»˜è®¤çš„é¢‘ç‡è°ƒé¢‘å™¨ â€¦&lt;/p&gt;</summary><content type="html">&lt;h2&gt;ç¡¬ä»¶ç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;å®éªŒæœåŠ¡å™¨æ­è½½ä¸¤é¢— Intel E5645 å¤„ç†å™¨ï¼Œ24å— SAS+SATA æœºæ¢°ç¡¬ç›˜ã€‚E5645 ä¸º 6 æ ¸å¤„ç†å™¨ï¼Œå¹¶æ”¯æŒè¶…çº¿ç¨‹æŠ€æœ¯ï¼ˆIntelÂ® Hyper-Threading Technologyï¼‰ï¼ŒæœåŠ¡å™¨å…± 24 ä¸ªé€»è¾‘æ ¸ï¼ŒåŸºæœ¬æ—¶é’Ÿé¢‘ç‡ä¸º 2.40 GHz ã€‚&lt;/p&gt;
&lt;h2&gt;è½¯ä»¶ç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;Ubuntu Server 16.04.1 LTS&lt;/p&gt;
&lt;h2&gt;CPU é¢‘ç‡é©±åŠ¨ç¨‹åºä¸å·¥å…·&lt;/h2&gt;
&lt;p&gt;æ“ä½œç³»ç»Ÿé€šè¿‡CPUè°ƒé¢‘å¯ä»¥æ ¹æ®è´Ÿè½½åŠ¨æ€è°ƒèŠ‚CPUå·¥ä½œé¢‘ç‡ï¼Œè¾¾åˆ°çœç”µçš„ç›®çš„ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥è‡ªåŠ¨è¿›è¡Œï¼Œä¹Ÿå¯ä»¥ç”±ç”¨æˆ·ç©ºé—´(userspace)ç¨‹åºæ‰‹åŠ¨è°ƒèŠ‚ã€‚Linux å†…æ ¸å®ç°äº†CPU è°ƒé¢‘ï¼Œè¯¥é©±åŠ¨è¢«ç§°ä¸º CPUfreqï¼Œ ä» 3.4 å†…æ ¸å¼€å§‹ï¼Œå†…æ ¸ä¼šè‡ªåŠ¨è½½å…¥ç›¸åº”çš„å†…æ ¸æ¨¡å—ï¼Œé»˜è®¤çš„é¢‘ç‡è°ƒé¢‘å™¨ &lt;strong&gt;ondemand&lt;/strong&gt; ä¼šè¢«å¯åŠ¨ï¼ˆ Intel Â Sandy Bridge æ¶æ„å CPU çš„åŠŸç‡é©±åŠ¨ç¨‹åºä¸º P-Stateï¼Œé»˜è®¤è°ƒé¢‘å™¨ä¸º powersave ï¼‰ã€‚ç”¨æˆ·è°ƒé¢‘å·¥å…·æœ‰ cpufrequtilsã€  cpupower ç­‰ï¼Œè¿™é‡Œä½¿ç”¨ cpufrequtils ã€‚&lt;/p&gt;
&lt;p&gt;å®‰è£… &lt;code&gt;cpufrequtils&lt;/code&gt; åŒ…ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# apt install cpufrequtils&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;cpufrequtils åŒ…åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªå·¥å…·ï¼Œå…¶ä¸­ &lt;strong&gt;cpufreq-info&lt;/strong&gt; ç”¨äºæŸ¥çœ‹cpuçš„ç›¸å…³ä¿¡æ¯ï¼Œ&lt;strong&gt;cpufreq-set&lt;/strong&gt; ç”¨äºä¿®æ”¹CPUçš„é¢‘ç‡é…ç½®ï¼Œ&lt;strong&gt;cpufreq-aperf&lt;/strong&gt; ç”¨äºè®¡ç®—ä¸€æ®µæ—¶é—´å†…çš„å¹³å‡é¢‘ç‡ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/usr/bin/cpufreq-info
/usr/bin/cpufreq-set
/usr/bin/cpufreq-aperf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;cpufreq-info&lt;/strong&gt; è·å¾—çš„ä¿¡æ¯åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;dirver&lt;/code&gt;: å®ç”¨çš„cpufreqå†…æ ¸é©±åŠ¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hardware limits&lt;/code&gt;: è®¾å®šçš„cpué¢‘ç‡èŒƒå›´&lt;/li&gt;
&lt;li&gt;&lt;code&gt;available frequency steps&lt;/code&gt;: å¯é€‰çš„cpué¢‘ç‡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;available cpufreq governors&lt;/code&gt;: å¯é€‰çš„cpué¢‘ç‡è°ƒé€Ÿå™¨:&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è°ƒé€Ÿå™¨&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ondemand&lt;/td&gt;
&lt;td&gt;æŒ‰éœ€å¿«é€ŸåŠ¨æ€è°ƒæ•´CPUé¢‘ç‡ï¼Œ ä¸€æœ‰cpuè®¡ç®—é‡çš„ä»»åŠ¡ï¼Œå°±ä¼šç«‹å³è¾¾åˆ°æœ€å¤§é¢‘ç‡è¿è¡Œï¼Œç­‰æ‰§è¡Œå®Œæ¯•å°±ç«‹å³å›åˆ°æœ€ä½é¢‘ç‡ï¼ˆé˜™å€¼ä¸º 95%ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;performance&lt;/td&gt;
&lt;td&gt;è¿è¡Œäºæœ€å¤§é¢‘ç‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conservative&lt;/td&gt;
&lt;td&gt;æŒ‰éœ€å¿«é€ŸåŠ¨æ€è°ƒæ•´CPUé¢‘ç‡ï¼Œ ä¸€æœ‰cpuè®¡ç®—é‡çš„ä»»åŠ¡ï¼Œå°±ä¼šç«‹å³è¾¾åˆ°æœ€å¤§é¢‘ç‡è¿è¡Œï¼Œç­‰æ‰§è¡Œå®Œæ¯•å°±ç«‹å³å›åˆ°æœ€ä½é¢‘ç‡ï¼ˆé˜™å€¼ä¸º 75%ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;powersave&lt;/td&gt;
&lt;td&gt;è¿è¡Œäºæœ€å°é¢‘ç‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;userspace&lt;/td&gt;
&lt;td&gt;è¿è¡Œäºç”¨æˆ·æŒ‡å®šçš„é¢‘ç‡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;current CPU frequency&lt;/code&gt;: å½“å‰çš„CPUé¢‘ç‡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cpufreq stats&lt;/code&gt;: ç»Ÿè®¡cpuåœ¨æ¯ä¸ªé¢‘ç‡ä¸‹çš„å·¥ä½œæ—¶é—´&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›ä¿¡æ¯ä¹Ÿå¯ä»¥æ‰‹åŠ¨åœ¨sysfsæ–‡ä»¶ä¸­æŸ¥çœ‹ï¼Œä½ç½®ä¸º &lt;code&gt;/sys/devices/system/cpu/cpuX/cpufreq/&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;chih@archlinux:/sys/devices/system/cpu/cpu0/cpufreq$ ls  
affected_cpus               related_cpus                   scaling_max_freq  
bios_limit                  scaling_available_frequencies  scaling_min_freq  
cpuinfo_cur_freq            scaling_available_governors    scaling_setspeed  
cpuinfo_max_freq            scaling_cur_freq               stats  
cpuinfo_min_freq            scaling_driver  
cpuinfo_transition_latency  scaling_governor 
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä»¥ä¸Šä¸ºCPU0çš„ä¸€äº›å†…æ ¸æ–‡ä»¶ï¼Œå‰ç¼€ cpuinfo ä»£è¡¨çš„æ˜¯ cpu ç¡¬ä»¶ä¸Šæ”¯æŒçš„é¢‘ç‡ï¼Œè€Œ scaling å‰ç¼€ä»£è¡¨çš„æ˜¯å¯ä»¥é€šè¿‡ CPUFreq ç³»ç»Ÿç”¨è½¯ä»¶è¿›è¡Œè°ƒèŠ‚æ—¶æ‰€æ”¯æŒçš„é¢‘ç‡ã€‚cpuinfo_cur_freq ä»£è¡¨é€šè¿‡ç¡¬ä»¶å®é™…ä¸Šè¯»åˆ°çš„é¢‘ç‡å€¼ï¼Œè€Œ scaling_cur_freq åˆ™æ˜¯è½¯ä»¶å½“å‰çš„è®¾ç½®å€¼ï¼Œscaling_available_frequencies è¡¨ç¤ºå½“å‰è½¯ä»¶æ”¯æŒçš„é¢‘ç‡å€¼ï¼Œscaling_available_governors è¡¨ç¤ºå½“å‰è½¯ä»¶æ”¯æŒçš„è°ƒé¢‘å™¨ï¼Œscaling_governor è¡¨ç¤ºå½“å‰ä½¿ç”¨çš„è°ƒé¢‘å™¨ï¼Œscaling_min_freq ä¸ scaling_max_freq è¡¨ç¤ºè½¯ä»¶è®¾ç½®çš„æœ€ä½é¢‘ç‡ä¸æœ€é«˜é¢‘ç‡ã€‚scaling_set_speed è¡¨ç¤ºæ‰‹åŠ¨è®¾ç½®çš„ç‰¹å®šé¢‘ç‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;cpufreq-set&lt;/strong&gt; å…è®¸ç”¨æˆ·æ‰‹åŠ¨è®¾ç½®CPUè¿è¡Œé¢‘ç‡ï¼Œç›¸åº”çš„é€‰é¡¹å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;-c --cpu&lt;/strong&gt;Â &lt;CPU&gt;
  number of CPU where cpufreq settings shall be modified.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;-d --min&lt;/strong&gt;Â &lt;FREQ&gt;
  new minimum CPU frequency the governor may select.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;-u --max&lt;/strong&gt;Â &lt;FREQ&gt;
  new maximum CPU frequency the governor may select.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;-g --governor&lt;/strong&gt;Â &lt;GOV&gt;
  new cpufreq governor.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;-f --freq&lt;/strong&gt;Â &lt;FREQ&gt;
  specific frequency to be set. Requires userspace governor to be available and loaded.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;-r --related&lt;/strong&gt;
  modify all hardware-related CPUs at the same time&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;-h --help&lt;/strong&gt;
  Prints out the help screen.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› ä¸ºæœåŠ¡å™¨ä¸Šæ ¸æ•°æ¯”è¾ƒå¤šï¼Œå¯é€šè¿‡ä»¥ä¸‹åä¸º&lt;code&gt;cpufreq-set-all&lt;/code&gt;çš„shellè„šæœ¬æ–¹ä¾¿çš„è®¾ç½®å…¨éƒ¨CPUæ ¸ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; i in &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;..23&lt;span class="o"&gt;}&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
    cpufreq-set -c &lt;span class="nv"&gt;$i&lt;/span&gt; &lt;span class="nv"&gt;$@&lt;/span&gt; 
&lt;span class="k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;-f&lt;/strong&gt; é€‰é¡¹è¦æ±‚ä½¿ç”¨ &lt;code&gt;userspace&lt;/code&gt; è°ƒé¢‘å™¨ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŠŠæ‰€æœ‰CPUæ ¸çš„è°ƒé¢‘å™¨éƒ½è®¾ç½®ä¸º userspace ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# cpufreq-set-all -g userspace&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ‰‹åŠ¨è®¾å®šCPUçš„è¿è¡Œé¢‘ç‡ï¼Œæ³¨æ„ï¼Œé¢‘ç‡å€¼å¿…é¡»æ˜¯ &lt;code&gt;scaling_available_frequencies&lt;/code&gt;ä¸­åˆ—å‡ºçš„ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# cpufreq-set-all -f 2.0Ghz&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;è´Ÿè½½&lt;/h2&gt;
&lt;p&gt;ç”±äºæœåŠ¡å™¨æ— å›¾å½¢ç•Œé¢ï¼Œä½¿ç”¨äº†stressä½œä¸ºè´Ÿè½½ï¼Œstress å¯ä»¥è¿›è¡Œç»¼åˆï¼ˆå†…å­˜å ç”¨ã€ç£ç›˜ IOï¼‰å‹åŠ›æµ‹è¯•ï¼Œå¯ä»¥åæ˜ å…¸å‹ç”¨é€”ä¸‹çš„æœåŠ¡å™¨è´Ÿè½½æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;å®‰è£… stress&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# aptitude install stress&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;äº§ç”Ÿ24ä¸ªcpuè¿›ç¨‹ï¼Œå¯¹åº”æœåŠ¡å™¨çš„æ€»æ ¸æ•°ï¼Œå¯ä»¥ç¡®ä¿100%è·‘æ»¡æœåŠ¡å™¨CPUå…¨éƒ¨è´Ÿè½½ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# stress -c 24&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ç»“æœ&lt;/h2&gt;
&lt;p&gt;å¦‚è§†é¢‘ 1600Mhz.mp4ã€2000Mhz.mp4ã€2400Mhz.mp4 æ‰€ç¤ºï¼Œå®éªŒé€‰å–äº† 1.6Ghzã€2.0Ghzã€2.4Ghz ä¸‰ç»„CPUå·¥ä½œé¢‘ç‡ï¼Œå¯¹åº”çš„æœåŠ¡å™¨æ•´æœºåŠŸç‡å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="center"&gt;CPUé¢‘ç‡&lt;/th&gt;
&lt;th align="center"&gt;CPUæ»¡è½½æ•´æœºåŠŸç‡&lt;/th&gt;
&lt;th align="center"&gt;CPUç©ºè½½æ•´æœºåŠŸç‡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="center"&gt;1.6Ghz&lt;/td&gt;
&lt;td align="center"&gt;575W&lt;/td&gt;
&lt;td align="center"&gt;507W&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;2.0Ghz&lt;/td&gt;
&lt;td align="center"&gt;612W&lt;/td&gt;
&lt;td align="center"&gt;519W&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;2.4Ghz&lt;/td&gt;
&lt;td align="center"&gt;652W&lt;/td&gt;
&lt;td align="center"&gt;507W&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;è¿™é‡Œçš„åŠŸè€—æ˜¯æ•´æœºåŠŸè€—ï¼Œå—ç£ç›˜ã€ä¸»æ¿ç­‰çš„åŠŸè€—å½±å“ï¼Œå…¶å®å¯ä»¥é€šè¿‡ &lt;code&gt;RAPL&lt;/code&gt; å•ç‹¬è¯»å– CPU çš„åŠŸè€—ã€‚&lt;/p&gt;</content><category term="linux"></category><category term="cpufreq"></category><category term="CPU"></category><category term="power"></category></entry><entry><title>ä½¿ç”¨redsocksæŠŠshadowsocksè½¬ä¸ºå…¨å±€ä»£ç†</title><link href="https://blog.chih.me/global-proxy-within-redsocks-and-shadowsocks.html" rel="alternate"></link><published>2016-11-21T00:00:00+08:00</published><updated>2016-11-21T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2016-11-21:/global-proxy-within-redsocks-and-shadowsocks.html</id><summary type="html">&lt;h2&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;shadowsocksæ˜¯ä¸ªéå¸¸æ£’çš„ç¿»å¢™ä»£ç†ï¼Œå®ƒå¯ä»¥åœ¨æœ¬åœ°æä¾›ä¸€ä¸ªsocks5ç«¯å£ä¾›è½¯ä»¶ä½¿ç”¨ä»£ç†ã€‚æ¯”å¦‚å¯åŠ¨chromeçš„æ—¶å€™åŠ ä¸Š&lt;code&gt;--proxy-server="socks5://myproxy:1080"&lt;/code&gt;è¿™æ¡å‚æ•°å°±å¯ä»¥è®©chromeèµ°ä»£ç†ï¼›ç„¶è€Œï¼Œæœ‰äº›è½¯ä»¶ä¸æ”¯æŒè®¾ç½®ä»£ç†çš„åŠŸèƒ½ã€‚æ‰€ä»¥æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…¨å±€ä»£ç†çš„ç¯å¢ƒï¼Œä½¿ç”¨VPNæ˜¯ä¸€ä¸ªé€šå¸¸çš„é€‰æ‹©ï¼Œä¸è¿‡ä¸€èˆ¬è´­ä¹°çš„VPNçš„é€Ÿåº¦ä¸å¦‚shadowsocksï¼ŒåŒæ—¶ï¼ŒVPNæ›´å®¹æ˜“å—åˆ°GFWçš„å¹²æ‰°ã€‚ä¸ºä»€ä¹ˆä¸æŠŠæ­£åœ¨ä½¿ç”¨çš„shadowsocksåˆ©ç”¨èµ·æ¥ä½œä¸ºä¸€ä¸ªå…¨å±€ä»£ç†å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä»‹ç»äº†ä¸€ç§åˆ©ç”¨&lt;a href="https://github.com/darkk/redsocks"&gt;redsocks&lt;/a&gt;ä¸iptableså®ç°å…¨å±€ä»£ç†çš„æ–¹æ³•ï¼Œå…¶åŸºæœ¬åŸç†å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;iptablesçš„è§„åˆ™å°†æ‰€æœ‰tcpåŒ…è½¬å‘åˆ°redsocksæ‰“å¼€çš„æœ¬åœ°ç«¯å£&lt;/li&gt;
&lt;li&gt;redsocksæ¥æ”¶tcpåŒ…å¹¶è½¬å‘ç»™shadowsocksæ‰“å¼€çš„æœ¬åœ°socksç«¯å£&lt;/li&gt;
&lt;li&gt;shadowsockså°†æ¥æ”¶çš„åŒ…è½¬å‘ç»™è¿œç«¯çš„ä»£ç†æœåŠ¡å™¨&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç”±äºä½¿ç”¨äº†redsocksä¸iptablesï¼Œå› æ­¤æœ¬æ–‡çš„æ–¹æ³•ä»…é€‚ç”¨äºLinuxã€‚&lt;/p&gt;
&lt;h2&gt;å®‰è£…&lt;/h2&gt;
&lt;p&gt;ç”±äºä½¿ç”¨çš„æ˜¯Arch Linuxï¼Œæˆ‘ç›´æ¥é€šè¿‡AURå®‰è£…&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ yaourt redsocks
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é€šè¿‡&lt;code&gt;yaourt&lt;/code&gt;æœç´¢redsocksåŒ…ï¼Œç„¶åé€‰æ‹©ä½ è¦å®‰è£…çš„åŒ…çš„åºå·å°±å¯ä»¥è¿›è¡Œå®‰è£…äº†ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼šä¸‹æ–‡ä¸­çš„é…ç½®æ–‡ä»¶çš„è·¯å¾„å…¨éƒ¨åŸºäºArch Linuxï¼Œå¦‚æœä½ ç”¨çš„ä¸æ˜¯Arch Linuxï¼Œè¯·æ ¹æ®è‡ªå·±çš„æƒ…å†µæ›´æ”¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å…¶ä»–å‘è¡Œç‰ˆå¯ä»¥é€šè¿‡å„è‡ªçš„åŒ…ç®¡ç†å™¨æˆ–è€…ä¸‹è½½æºç &lt;a href="https://github.com/darkk/redsocks/blob/master/README"&gt;å®‰è£…&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2&gt;é…ç½®&lt;/h2&gt;
&lt;h3&gt;é…ç½®redsocks&lt;/h3&gt;
&lt;p&gt;æˆ‘åœ¨åŒ…æä¾›çš„åŸæœ‰é…ç½®çš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¸€äº›ä¿®æ”¹ï¼Œä¸»è¦æ˜¯æŠŠ &lt;code&gt;redsocks â€¦&lt;/code&gt;&lt;/p&gt;</summary><content type="html">&lt;h2&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;shadowsocksæ˜¯ä¸ªéå¸¸æ£’çš„ç¿»å¢™ä»£ç†ï¼Œå®ƒå¯ä»¥åœ¨æœ¬åœ°æä¾›ä¸€ä¸ªsocks5ç«¯å£ä¾›è½¯ä»¶ä½¿ç”¨ä»£ç†ã€‚æ¯”å¦‚å¯åŠ¨chromeçš„æ—¶å€™åŠ ä¸Š&lt;code&gt;--proxy-server="socks5://myproxy:1080"&lt;/code&gt;è¿™æ¡å‚æ•°å°±å¯ä»¥è®©chromeèµ°ä»£ç†ï¼›ç„¶è€Œï¼Œæœ‰äº›è½¯ä»¶ä¸æ”¯æŒè®¾ç½®ä»£ç†çš„åŠŸèƒ½ã€‚æ‰€ä»¥æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…¨å±€ä»£ç†çš„ç¯å¢ƒï¼Œä½¿ç”¨VPNæ˜¯ä¸€ä¸ªé€šå¸¸çš„é€‰æ‹©ï¼Œä¸è¿‡ä¸€èˆ¬è´­ä¹°çš„VPNçš„é€Ÿåº¦ä¸å¦‚shadowsocksï¼ŒåŒæ—¶ï¼ŒVPNæ›´å®¹æ˜“å—åˆ°GFWçš„å¹²æ‰°ã€‚ä¸ºä»€ä¹ˆä¸æŠŠæ­£åœ¨ä½¿ç”¨çš„shadowsocksåˆ©ç”¨èµ·æ¥ä½œä¸ºä¸€ä¸ªå…¨å±€ä»£ç†å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä»‹ç»äº†ä¸€ç§åˆ©ç”¨&lt;a href="https://github.com/darkk/redsocks"&gt;redsocks&lt;/a&gt;ä¸iptableså®ç°å…¨å±€ä»£ç†çš„æ–¹æ³•ï¼Œå…¶åŸºæœ¬åŸç†å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;iptablesçš„è§„åˆ™å°†æ‰€æœ‰tcpåŒ…è½¬å‘åˆ°redsocksæ‰“å¼€çš„æœ¬åœ°ç«¯å£&lt;/li&gt;
&lt;li&gt;redsocksæ¥æ”¶tcpåŒ…å¹¶è½¬å‘ç»™shadowsocksæ‰“å¼€çš„æœ¬åœ°socksç«¯å£&lt;/li&gt;
&lt;li&gt;shadowsockså°†æ¥æ”¶çš„åŒ…è½¬å‘ç»™è¿œç«¯çš„ä»£ç†æœåŠ¡å™¨&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç”±äºä½¿ç”¨äº†redsocksä¸iptablesï¼Œå› æ­¤æœ¬æ–‡çš„æ–¹æ³•ä»…é€‚ç”¨äºLinuxã€‚&lt;/p&gt;
&lt;h2&gt;å®‰è£…&lt;/h2&gt;
&lt;p&gt;ç”±äºä½¿ç”¨çš„æ˜¯Arch Linuxï¼Œæˆ‘ç›´æ¥é€šè¿‡AURå®‰è£…&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ yaourt redsocks
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é€šè¿‡&lt;code&gt;yaourt&lt;/code&gt;æœç´¢redsocksåŒ…ï¼Œç„¶åé€‰æ‹©ä½ è¦å®‰è£…çš„åŒ…çš„åºå·å°±å¯ä»¥è¿›è¡Œå®‰è£…äº†ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼šä¸‹æ–‡ä¸­çš„é…ç½®æ–‡ä»¶çš„è·¯å¾„å…¨éƒ¨åŸºäºArch Linuxï¼Œå¦‚æœä½ ç”¨çš„ä¸æ˜¯Arch Linuxï¼Œè¯·æ ¹æ®è‡ªå·±çš„æƒ…å†µæ›´æ”¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å…¶ä»–å‘è¡Œç‰ˆå¯ä»¥é€šè¿‡å„è‡ªçš„åŒ…ç®¡ç†å™¨æˆ–è€…ä¸‹è½½æºç &lt;a href="https://github.com/darkk/redsocks/blob/master/README"&gt;å®‰è£…&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2&gt;é…ç½®&lt;/h2&gt;
&lt;h3&gt;é…ç½®redsocks&lt;/h3&gt;
&lt;p&gt;æˆ‘åœ¨åŒ…æä¾›çš„åŸæœ‰é…ç½®çš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¸€äº›ä¿®æ”¹ï¼Œä¸»è¦æ˜¯æŠŠ &lt;code&gt;redsocks -&amp;gt; port&lt;/code&gt; ä¿®æ”¹ä¸ºshadowsocksçš„æœ¬åœ°ç«¯å£(1080)ï¼Œå¦å¤–ï¼Œç”±äºåªéœ€è¦è½¬å‘tcpæµé‡ï¼Œæˆ‘æŠŠ &lt;code&gt;redudp&lt;/code&gt; å’Œ &lt;code&gt;dnstc&lt;/code&gt; æ®µçš„é…ç½®å…¨éƒ¨æ³¨é‡Šäº†ã€‚æ³¨æ„ &lt;code&gt;redsocks -&amp;gt; local_port&lt;/code&gt; é…ç½®çš„ç«¯å£æ˜¯ç”¨æ¥æ¥æ”¶iptablesä¼ æ¥çš„æµé‡ç”¨çš„ï¼Œè®¾ç½®ä¸ºä¸€ä¸ªä¸ä¼šå’Œåˆ«çš„ç¨‹åºå†²çªçš„ç«¯å£ï¼Œä½†è¦ä¿è¯å’Œiptablesè§„åˆ™é‡Œçš„ç«¯å£å¯¹åº”ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ vim /etc/redsocks.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;base &lt;span class="o"&gt;{&lt;/span&gt;
    // debug: connection progress &lt;span class="p"&gt;&amp;amp;&lt;/span&gt; client list on SIGUSR1
    &lt;span class="nv"&gt;log_debug&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; off&lt;span class="p"&gt;;&lt;/span&gt;

    // info: start and end of client session
    &lt;span class="nv"&gt;log_info&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; off&lt;span class="p"&gt;;&lt;/span&gt;

    /* possible &lt;span class="sb"&gt;`&lt;/span&gt;log&lt;span class="s1"&gt;&amp;#39; values are:&lt;/span&gt;
&lt;span class="s1"&gt;     *   stderr&lt;/span&gt;
&lt;span class="s1"&gt;     *   &amp;quot;file:/path/to/file&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;     *   syslog:FACILITY  facility is any of &amp;quot;daemon&amp;quot;, &amp;quot;local0&amp;quot;...&amp;quot;local7&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;     */&lt;/span&gt;
&lt;span class="s1"&gt;    // log = stderr;&lt;/span&gt;
&lt;span class="s1"&gt;    // log = &amp;quot;file:/path/to/file&amp;quot;;&lt;/span&gt;
&lt;span class="s1"&gt;    log = &amp;quot;syslog:daemon&amp;quot;;&lt;/span&gt;

&lt;span class="s1"&gt;    // detach from console&lt;/span&gt;
&lt;span class="s1"&gt;    daemon = on;&lt;/span&gt;

&lt;span class="s1"&gt;    /* Change uid, gid and root directory, these options require root&lt;/span&gt;
&lt;span class="s1"&gt;     * privilegies on startup.&lt;/span&gt;
&lt;span class="s1"&gt;     * Note, your chroot may requre /etc/localtime if you write log to syslog.&lt;/span&gt;
&lt;span class="s1"&gt;     * Log is opened before chroot &amp;amp; uid changing.&lt;/span&gt;
&lt;span class="s1"&gt;     */&lt;/span&gt;
&lt;span class="s1"&gt;    user = redsocks;&lt;/span&gt;
&lt;span class="s1"&gt;    group = redsocks;&lt;/span&gt;
&lt;span class="s1"&gt;    // chroot = &amp;quot;/var/chroot&amp;quot;;&lt;/span&gt;

&lt;span class="s1"&gt;    /* possible `redirector&amp;#39;&lt;/span&gt; values are:
     *   iptables   - &lt;span class="k"&gt;for&lt;/span&gt; Linux
     *   ipf        - &lt;span class="k"&gt;for&lt;/span&gt; FreeBSD
     *   pf         - &lt;span class="k"&gt;for&lt;/span&gt; OpenBSD
     *   generic    - some generic redirector that MAY work
     */
    &lt;span class="nv"&gt;redirector&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; iptables&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

redsocks &lt;span class="o"&gt;{&lt;/span&gt;
    /* &lt;span class="sb"&gt;`&lt;/span&gt;local_ip&lt;span class="s1"&gt;&amp;#39; defaults to 127.0.0.1 for security reasons,&lt;/span&gt;
&lt;span class="s1"&gt;     * use 0.0.0.0 if you want to listen on every interface.&lt;/span&gt;
&lt;span class="s1"&gt;     * `local_*&amp;#39;&lt;/span&gt; are used as port to redirect to.
     */
    &lt;span class="nv"&gt;local_ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="nv"&gt;local_port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;31338&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    // listen&lt;span class="o"&gt;()&lt;/span&gt; queue length. Default value is SOMAXCONN and it should be
    // good enough &lt;span class="k"&gt;for&lt;/span&gt; most of us.
    // &lt;span class="nv"&gt;listenq&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;128&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; // SOMAXCONN equals &lt;span class="m"&gt;128&lt;/span&gt; on my Linux box.

    // &lt;span class="sb"&gt;`&lt;/span&gt;max_accept_backoff&lt;span class="sb"&gt;`&lt;/span&gt; is a delay to retry &lt;span class="sb"&gt;`&lt;/span&gt;accept&lt;span class="o"&gt;()&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt; after accept
    // failure &lt;span class="o"&gt;(&lt;/span&gt;e.g. due to lack of file descriptors&lt;span class="o"&gt;)&lt;/span&gt;. It&lt;span class="s1"&gt;&amp;#39;s measured in&lt;/span&gt;
&lt;span class="s1"&gt;    // milliseconds and maximal value is 65535. `min_accept_backoff` is&lt;/span&gt;
&lt;span class="s1"&gt;    // used as initial backoff value and as a damper for `accept() after&lt;/span&gt;
&lt;span class="s1"&gt;    // close()` logic.&lt;/span&gt;
&lt;span class="s1"&gt;    // min_accept_backoff = 100;&lt;/span&gt;
&lt;span class="s1"&gt;    // max_accept_backoff = 60000;&lt;/span&gt;

&lt;span class="s1"&gt;    // `ip&amp;#39;&lt;/span&gt; and &lt;span class="sb"&gt;`&lt;/span&gt;port&lt;span class="s1"&gt;&amp;#39; are IP and tcp-port of proxy-server&lt;/span&gt;
&lt;span class="s1"&gt;    // You can also use hostname instead of IP, only one (random)&lt;/span&gt;
&lt;span class="s1"&gt;    // address of multihomed host will be used.&lt;/span&gt;
&lt;span class="s1"&gt;    ip = 127.0.0.1;&lt;/span&gt;
&lt;span class="s1"&gt;    // ä¿®æ”¹ä¸ºshadosocksçš„æœ¬åœ°ç«¯å£&lt;/span&gt;
&lt;span class="s1"&gt;    port = 1080;&lt;/span&gt;


&lt;span class="s1"&gt;    // known types: socks4, socks5, http-connect, http-relay&lt;/span&gt;
&lt;span class="s1"&gt;    type = socks5;&lt;/span&gt;

&lt;span class="s1"&gt;    // login = &amp;quot;foobar&amp;quot;;&lt;/span&gt;
&lt;span class="s1"&gt;    // password = &amp;quot;baz&amp;quot;;&lt;/span&gt;
&lt;span class="s1"&gt;}&lt;/span&gt;

&lt;span class="s1"&gt;//redudp {&lt;/span&gt;
&lt;span class="s1"&gt;    // `local_ip&amp;#39;&lt;/span&gt; should not be &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0 as it&lt;span class="s1"&gt;&amp;#39;s also used for outgoing&lt;/span&gt;
&lt;span class="s1"&gt;    // packets that are sent as replies - and it should be fixed&lt;/span&gt;
&lt;span class="s1"&gt;    // if we want NAT to work properly.&lt;/span&gt;
&lt;span class="s1"&gt;    //local_ip = 127.0.0.1;&lt;/span&gt;
&lt;span class="s1"&gt;    //local_port = 10053;&lt;/span&gt;

&lt;span class="s1"&gt;    // `ip&amp;#39;&lt;/span&gt; and &lt;span class="sb"&gt;`&lt;/span&gt;port&lt;span class="s1"&gt;&amp;#39; of socks5 proxy server.&lt;/span&gt;
&lt;span class="s1"&gt;    //ip = 127.0.0.1;&lt;/span&gt;
&lt;span class="s1"&gt;    //port = 1080;&lt;/span&gt;

&lt;span class="s1"&gt;    // login = username;&lt;/span&gt;
&lt;span class="s1"&gt;    // password = pazzw0rd;&lt;/span&gt;

&lt;span class="s1"&gt;    // kernel does not give us this information, so we have to duplicate it&lt;/span&gt;
&lt;span class="s1"&gt;    // in both iptables rules and configuration file.  By the way, you can&lt;/span&gt;
&lt;span class="s1"&gt;    // set `local_ip&amp;#39;&lt;/span&gt; to &lt;span class="m"&gt;127&lt;/span&gt;.45.67.89 &lt;span class="k"&gt;if&lt;/span&gt; you need more than &lt;span class="m"&gt;65535&lt;/span&gt; ports to
    // forward &lt;span class="p"&gt;;&lt;/span&gt;-&lt;span class="o"&gt;)&lt;/span&gt;
    // This limitation may be relaxed in future versions using contrack-tools.
    //dest_ip &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;.8.8.8&lt;span class="p"&gt;;&lt;/span&gt;
    //dest_port &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;53&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    //udp_timeout &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    //udp_timeout_stream &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;180&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
//&lt;span class="o"&gt;}&lt;/span&gt;

//dnstc &lt;span class="o"&gt;{&lt;/span&gt;
    // fake and really dumb DNS server that returns &lt;span class="s2"&gt;&amp;quot;truncated answer&amp;quot;&lt;/span&gt; to
    // every query via UDP, RFC-compliant resolver should repeat same query
    // via TCP in this &lt;span class="k"&gt;case&lt;/span&gt;.
//  &lt;span class="nv"&gt;local_ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1&lt;span class="p"&gt;;&lt;/span&gt;
//  &lt;span class="nv"&gt;local_port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;5300&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
//&lt;span class="o"&gt;}&lt;/span&gt;

// you can add more &lt;span class="sb"&gt;`&lt;/span&gt;redsocks&lt;span class="s1"&gt;&amp;#39; and `redudp&amp;#39;&lt;/span&gt; sections &lt;span class="k"&gt;if&lt;/span&gt; you need.
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;iptablesè§„åˆ™&lt;/h3&gt;
&lt;p&gt;ä¹Ÿæ˜¯åœ¨åŒ…æä¾›çš„åŸæœ‰é…ç½®çš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¸€äº›ä¿®æ”¹ï¼Œå”¯ä¸€çš„ä¿®æ”¹åªæ˜¯å¢åŠ äº†è¿™ä¸€æ¡&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-A REDSOCKS -d proxy_server_ip -j RETURN&lt;/code&gt;ï¼Œä½¿ä»£ç†è‡ªå·±ä¸è¦å†è¢«é‡å®šå‘ï¼Œä¸ç„¶å°±æ— é™å¾ªç¯äº†ã€‚ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ vim /etc/iptables/redsocks.rules
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Transparent SOCKS proxy&lt;/span&gt;
&lt;span class="c1"&gt;# See: http://darkk.net.ru/redsocks/&lt;/span&gt;

*nat
:PREROUTING ACCEPT &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;:0&lt;span class="o"&gt;]&lt;/span&gt;
:INPUT ACCEPT &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;:0&lt;span class="o"&gt;]&lt;/span&gt;
:OUTPUT ACCEPT &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;:0&lt;span class="o"&gt;]&lt;/span&gt;
:POSTROUTING ACCEPT &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;:0&lt;span class="o"&gt;]&lt;/span&gt;
:REDSOCKS - &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;:0&lt;span class="o"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# Redirect all output through redsocks&lt;/span&gt;
-A OUTPUT -p tcp -j REDSOCKS

&lt;span class="c1"&gt;# Whitelist LANs and some other reserved addresses.&lt;/span&gt;
&lt;span class="c1"&gt;# https://en.wikipedia.org/wiki/Reserved_IP_addresses#Reserved_IPv4_addresses&lt;/span&gt;
-A REDSOCKS -d &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0/8 -j RETURN
-A REDSOCKS -d &lt;span class="m"&gt;10&lt;/span&gt;.0.0.0/8 -j RETURN
-A REDSOCKS -d &lt;span class="m"&gt;127&lt;/span&gt;.0.0.0/8 -j RETURN
-A REDSOCKS -d &lt;span class="m"&gt;169&lt;/span&gt;.254.0.0/16 -j RETURN
-A REDSOCKS -d &lt;span class="m"&gt;172&lt;/span&gt;.16.0.0/12 -j RETURN
-A REDSOCKS -d &lt;span class="m"&gt;192&lt;/span&gt;.168.0.0/16 -j RETURN
-A REDSOCKS -d &lt;span class="m"&gt;224&lt;/span&gt;.0.0.0/4 -j RETURN
-A REDSOCKS -d &lt;span class="m"&gt;240&lt;/span&gt;.0.0.0/4 -j RETURN
&lt;span class="c1"&gt;# import shadowsocks server ip&lt;/span&gt;
&lt;span class="c1"&gt;#-A REDSOCKS -d xxx.xxx.xxx.xxx -j RETURN&lt;/span&gt;
&lt;span class="c1"&gt;# shadowsocks server port&lt;/span&gt;
-A REDSOCKS -p tcp --dport xxxxx -j RETURN

&lt;span class="c1"&gt;# Redirect everything else to redsocks port&lt;/span&gt;
-A REDSOCKS -p tcp -j REDIRECT --to-ports &lt;span class="m"&gt;31338&lt;/span&gt;

COMMIT
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;è¿è¡Œ&lt;/h2&gt;
&lt;p&gt;å¼€å¯redsockså’ŒiptablesæœåŠ¡ï¼Œå¹¶è®©å®ƒä»¬å¼€æœºè‡ªå¯:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo systemctl start  redsocks.service iptables.service
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo systemctl &lt;span class="nb"&gt;enable&lt;/span&gt;  redsocks.service iptables.service
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å½“ä½ éœ€è¦è¿›å…¥å…¨å±€ä»£ç†æ—¶ï¼Œç®€å•åœ°å¯¼å…¥&lt;code&gt;redsocks.rules&lt;/code&gt;å°±è¡Œ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo iptables-restore &amp;lt; /etc/iptables/redsocks.rules
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å½“ä½ éœ€è¦é€€å‡ºå…¨å±€ä»£ç†ç¯å¢ƒï¼Œåªéœ€è¦æ¸…ç©ºiptablesè§„åˆ™ï¼Œredsockså¯ä»¥è®©ä»–ä¸€ç›´è¿è¡Œ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo /usr/lib/systemd/scripts/iptables-flush
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸€äº›äººå¯èƒ½æ˜¯è‡ªå·±ç¼–è¯‘æºç è¿›è¡Œå®‰è£…çš„ï¼Œè¿™äº›Arch Linuxè½¯ä»¶åŒ…å†…çš„&lt;a href="https://aur.archlinux.org/cgit/aur.git/tree/?h=redsocks-git"&gt;é»˜è®¤é…ç½®å’Œè¿è¡Œè„šæœ¬&lt;/a&gt;å¯èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚&lt;/p&gt;
&lt;h2&gt;é«˜çº§é…ç½®&lt;/h2&gt;
&lt;p&gt;ç”±äºæˆ‘åªåœ¨æå°‘æ•°ç‰¹æ®Šæƒ…å†µä¸‹æ‰ä¼šç”¨åˆ°å…¨å±€ä»£ç†ï¼Œæ‰€ä»¥DNSé˜²æ±¡æŸ“ï¼Œå›½å†…ipç™½åå•ç­‰éƒ½æ²¡æœ‰å¼„ï¼Œæœ‰éœ€è¦çš„å¯ä»¥ç ”ç©¶ä¸‹ä»¥ä¸‹å‡ ä¸ªæŠ€æœ¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;dnsmasq&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;pdnsd&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;chnroutes&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ChinaDNS&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Pcap_DNSProxy&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</content><category term="Arch Linux"></category><category term="Linux"></category><category term="redsocks"></category><category term="iptables"></category><category term="shadowsocks"></category><category term="ä»£ç†"></category></entry><entry><title>Hadoop å®‰è£…ç¬”è®°</title><link href="https://blog.chih.me/hadoop-install.html" rel="alternate"></link><published>2016-11-17T00:00:00+08:00</published><updated>2016-11-17T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2016-11-17:/hadoop-install.html</id><summary type="html">&lt;h2&gt;The building blocks of Hadoop&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;NameNode&lt;/li&gt;
&lt;li&gt;DataNode&lt;/li&gt;
&lt;li&gt;Secondary NameNode&lt;/li&gt;
&lt;li&gt;~~JobTracker~~&lt;/li&gt;
&lt;li&gt;~~TaskTracker~~&lt;/li&gt;
&lt;li&gt;ResourceManager&lt;/li&gt;
&lt;li&gt;NodeManager&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="Screenshot_20161117_185744" src="images/Screenshot_20161117_185744.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20161117_190357" src="images/Screenshot_20161117_190357.png"&gt;&lt;/p&gt;
&lt;h3&gt;NameNode&lt;/h3&gt;
&lt;p&gt;NameNodeä¸»è¦æ˜¯ç”¨æ¥ä¿å­˜HDFSçš„&lt;strong&gt;å…ƒæ•°æ®&lt;/strong&gt;ä¿¡æ¯ï¼Œæ¯”å¦‚å‘½åç©ºé—´ä¿¡æ¯ï¼Œå—ä¿¡æ¯ç­‰ã€‚å½“å®ƒè¿è¡Œçš„æ—¶å€™ï¼Œè¿™äº›ä¿¡æ¯æ˜¯å­˜åœ¨å†…å­˜ä¸­çš„ã€‚ä½†æ˜¯è¿™äº›ä¿¡æ¯ä¹Ÿå¯ä»¥æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šã€‚æ²¡æœ‰Namenodeï¼ŒHDFSå°±ä¸èƒ½å·¥ä½œã€‚äº‹å®ä¸Šï¼Œå¦‚æœè¿è¡Œnamenodeçš„æœºå™¨åæ‰çš„è¯ï¼Œç³»ç»Ÿä¸­çš„æ–‡ä»¶å°†ä¼šå®Œå…¨ä¸¢å¤±ï¼Œå› ä¸ºæ²¡æœ‰å…¶ä»–æ–¹æ³•èƒ½å¤Ÿå°†ä½äºä¸åŒdatanodeä¸Šçš„æ–‡ä»¶å—(blocks)é‡å»ºæ–‡ä»¶ã€‚å› æ­¤ï¼ŒHadoopå­˜åœ¨å•ç‚¹æ•…éšœã€‚ä¸ºäº†è§£å†³å•ç‚¹æ•…éšœï¼ŒHadoopæä¾›äº†ä¸¤å¥—æœºåˆ¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç¬¬ä¸€ç§æ–¹å¼æ˜¯å°†æŒä¹…åŒ–å­˜ å‚¨åœ¨æœ¬åœ°ç¡¬ç›˜çš„æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®å¤‡ä»½ã€‚Hadoopå¯ä»¥é€šè¿‡é…ç½®æ¥è®©Namenodeå°†ä»–çš„æŒä¹…åŒ–çŠ¶æ€æ–‡ä»¶å†™åˆ°ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ä¸€èˆ¬æ˜¯é•œåƒåˆ°ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿæˆ–å•ç‹¬çš„ç£ç›˜ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒç§æ–¹å¼æ˜¯è¿è¡Œä¸€ä¸ªè¾…åŠ©çš„Namenode(Secondary Namenode)ã€‚ä¸‹é¢ä¼šå…·ä½“è¯´æ˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;DataNode&lt;/h3&gt;
&lt;p&gt;Datanodeæ˜¯æ–‡ä»¶ç³»ç»Ÿçš„å·¥ä½œèŠ‚ç‚¹ï¼Œä»–ä»¬æ ¹æ®å®¢æˆ·ç«¯æˆ–è€…æ˜¯namenodeçš„è°ƒåº¦å­˜å‚¨å’Œæ£€ç´¢æ•°æ®ï¼Œå¹¶ä¸”å®šæœŸå‘namenodeå‘é€ä»–ä»¬æ‰€å­˜å‚¨çš„å—(block)çš„&lt;strong&gt;åˆ—è¡¨&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é›†ç¾¤ä¸­çš„æ¯ä¸ªæœåŠ¡å™¨éƒ½è¿ â€¦&lt;/p&gt;</summary><content type="html">&lt;h2&gt;The building blocks of Hadoop&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;NameNode&lt;/li&gt;
&lt;li&gt;DataNode&lt;/li&gt;
&lt;li&gt;Secondary NameNode&lt;/li&gt;
&lt;li&gt;~~JobTracker~~&lt;/li&gt;
&lt;li&gt;~~TaskTracker~~&lt;/li&gt;
&lt;li&gt;ResourceManager&lt;/li&gt;
&lt;li&gt;NodeManager&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="Screenshot_20161117_185744" src="images/Screenshot_20161117_185744.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20161117_190357" src="images/Screenshot_20161117_190357.png"&gt;&lt;/p&gt;
&lt;h3&gt;NameNode&lt;/h3&gt;
&lt;p&gt;NameNodeä¸»è¦æ˜¯ç”¨æ¥ä¿å­˜HDFSçš„&lt;strong&gt;å…ƒæ•°æ®&lt;/strong&gt;ä¿¡æ¯ï¼Œæ¯”å¦‚å‘½åç©ºé—´ä¿¡æ¯ï¼Œå—ä¿¡æ¯ç­‰ã€‚å½“å®ƒè¿è¡Œçš„æ—¶å€™ï¼Œè¿™äº›ä¿¡æ¯æ˜¯å­˜åœ¨å†…å­˜ä¸­çš„ã€‚ä½†æ˜¯è¿™äº›ä¿¡æ¯ä¹Ÿå¯ä»¥æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šã€‚æ²¡æœ‰Namenodeï¼ŒHDFSå°±ä¸èƒ½å·¥ä½œã€‚äº‹å®ä¸Šï¼Œå¦‚æœè¿è¡Œnamenodeçš„æœºå™¨åæ‰çš„è¯ï¼Œç³»ç»Ÿä¸­çš„æ–‡ä»¶å°†ä¼šå®Œå…¨ä¸¢å¤±ï¼Œå› ä¸ºæ²¡æœ‰å…¶ä»–æ–¹æ³•èƒ½å¤Ÿå°†ä½äºä¸åŒdatanodeä¸Šçš„æ–‡ä»¶å—(blocks)é‡å»ºæ–‡ä»¶ã€‚å› æ­¤ï¼ŒHadoopå­˜åœ¨å•ç‚¹æ•…éšœã€‚ä¸ºäº†è§£å†³å•ç‚¹æ•…éšœï¼ŒHadoopæä¾›äº†ä¸¤å¥—æœºåˆ¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç¬¬ä¸€ç§æ–¹å¼æ˜¯å°†æŒä¹…åŒ–å­˜ å‚¨åœ¨æœ¬åœ°ç¡¬ç›˜çš„æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®å¤‡ä»½ã€‚Hadoopå¯ä»¥é€šè¿‡é…ç½®æ¥è®©Namenodeå°†ä»–çš„æŒä¹…åŒ–çŠ¶æ€æ–‡ä»¶å†™åˆ°ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ä¸€èˆ¬æ˜¯é•œåƒåˆ°ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿæˆ–å•ç‹¬çš„ç£ç›˜ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒç§æ–¹å¼æ˜¯è¿è¡Œä¸€ä¸ªè¾…åŠ©çš„Namenode(Secondary Namenode)ã€‚ä¸‹é¢ä¼šå…·ä½“è¯´æ˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;DataNode&lt;/h3&gt;
&lt;p&gt;Datanodeæ˜¯æ–‡ä»¶ç³»ç»Ÿçš„å·¥ä½œèŠ‚ç‚¹ï¼Œä»–ä»¬æ ¹æ®å®¢æˆ·ç«¯æˆ–è€…æ˜¯namenodeçš„è°ƒåº¦å­˜å‚¨å’Œæ£€ç´¢æ•°æ®ï¼Œå¹¶ä¸”å®šæœŸå‘namenodeå‘é€ä»–ä»¬æ‰€å­˜å‚¨çš„å—(block)çš„&lt;strong&gt;åˆ—è¡¨&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é›†ç¾¤ä¸­çš„æ¯ä¸ªæœåŠ¡å™¨éƒ½è¿ è¡Œä¸€ä¸ªDataNodeåå°ç¨‹åºï¼Œè¿™ä¸ªåå°ç¨‹åºè´Ÿè´£æŠŠHDFSæ•°æ®å—è¯»å†™åˆ°æœ¬åœ°çš„æ–‡ä»¶ç³»ç»Ÿã€‚å½“éœ€è¦é€šè¿‡å®¢æˆ·ç«¯è¯»/å†™æŸä¸ª æ•°æ®æ—¶ï¼Œå…ˆç”±NameNodeå‘Šè¯‰å®¢æˆ·ç«¯å»å“ªä¸ªDataNodeè¿›è¡Œå…·ä½“çš„è¯»/å†™æ“ä½œï¼Œç„¶åï¼Œ&lt;strong&gt;å®¢æˆ·ç«¯ç›´æ¥&lt;/strong&gt;ä¸è¿™ä¸ªDataNodeæœåŠ¡å™¨ä¸Šçš„åå°ç¨‹åºè¿›è¡Œé€šä¿¡ï¼Œå¹¶ä¸”å¯¹ç›¸å…³çš„æ•°æ®å—è¿›è¡Œè¯»/å†™æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;æ•°æ®ä¼šä»¥å¤šä¸ªå‰¯æœ¬çš„å½¢å¼å­˜åœ¨äºå¤šä¸ªDataNodeä¸­ã€‚å› æ­¤ï¼ŒDataNodeä¸å­˜åœ¨å•ç‚¹æ•…éšœã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20161117_181939" src="images/Screenshot_20161117_181939.png"&gt;&lt;/p&gt;
&lt;h3&gt;Secondary NameNode&lt;/h3&gt;
&lt;p&gt;~~Secondary NameNodeä¸æ˜¯NameNodeçš„å¤‡ä»½ã€‚å®ƒæ˜¯ä¸€ä¸ªç”¨æ¥ç›‘æ§HDFSçŠ¶æ€çš„&lt;strong&gt;è¾…åŠ©åå°ç¨‹åº&lt;/strong&gt;ã€‚SecondaryÂ Â NameNodeä¸åŒäºNameNodeï¼Œå®ƒä¸æ¥å—æˆ–è€…è®°å½•ä»»ä½•å®æ—¶çš„æ•°æ®å˜åŒ–ï¼Œä½†æ˜¯ï¼Œå®ƒä¼šä¸NameNodeè¿›è¡Œé€šä¿¡ï¼Œå‘¨æœŸæ€§çš„åˆå¹¶fsimageå’Œeditsæ—¥å¿—ï¼Œä¿æŒeditsæ–‡ä»¶å¤§å°åœ¨ä¸€ä¸ªé™å®šçš„èŒƒå›´å†…ï¼Œå¹¶å®šæœŸåœ°ä¿å­˜HDFSå…ƒæ•°æ®çš„å¿«ç…§ã€‚~~&lt;/p&gt;
&lt;p&gt;SNNçš„ä½œç”¨ ç°åœ¨ ï¼ˆHadoop2.xï¼‰å¯ä»¥è¢«ä¸¤ä¸ªèŠ‚ç‚¹æ›¿æ¢CheckpointNodeå’ŒBackupNodeã€‚
CheckpointNodeå¯ä»¥ç†è§£ä¸ºä¸Secondary NameNodeçš„ä½œç”¨ä¸€è‡´ã€‚
BackupNodeï¼šNameNodeçš„å®Œå…¨å¤‡ä»½ã€‚&lt;/p&gt;
&lt;h3&gt;JobTracker &amp;amp; TaskTracker&lt;/h3&gt;
&lt;p&gt;JobTrackeråå°ç¨‹åºç”¨æ¥è¿æ¥åº”ç”¨ç¨‹åºä¸Hadoopã€‚ç”¨æˆ·ä»£ç æäº¤åˆ°é›†ç¾¤ä»¥åï¼Œç”±JobTrackerå†³å®šå“ªä¸ªæ–‡ä»¶å°†è¢«å¤„ç†ï¼Œå¹¶ä¸”ä¸ºä¸åŒçš„&lt;strong&gt;task&lt;/strong&gt;åˆ†é…èŠ‚ç‚¹ã€‚åŒæ—¶ï¼Œå®ƒè¿˜ç›‘æ§æ‰€æœ‰çš„taskï¼Œä¸€æ—¦æŸä¸ªtaskå¤±è´¥äº†ï¼ŒJobTrackerå°±ä¼šè‡ªåŠ¨é‡æ–°å¼€å¯è¿™ä¸ªtaskã€‚&lt;/p&gt;
&lt;p&gt;TaskTrackerä¸è´Ÿè´£å­˜å‚¨æ•°æ®çš„DataNodeç›¸ç»“åˆï¼Œå…¶å¤„ç†ç»“æ„ä¸Šä¹Ÿéµå¾ªä¸»/ä»æ¶æ„ã€‚JobTrackerä½äºä¸»èŠ‚ç‚¹ï¼Œç»Ÿé¢† MapReduceå·¥ä½œï¼›è€ŒTaskTrackersä½äºä»èŠ‚ç‚¹ï¼Œç‹¬ç«‹ç®¡ç†å„è‡ªçš„taskã€‚æ¯ä¸ªTaskTrackerè´Ÿè´£ç‹¬ç«‹æ‰§è¡Œå…·ä½“çš„taskï¼Œè€Œ JobTrackerè´Ÿè´£åˆ†é…taskã€‚è™½ç„¶æ¯ä¸ªä»èŠ‚ç‚¹ä»…æœ‰ä¸€ä¸ªå”¯ä¸€çš„ä¸€ä¸ªTaskTrackerï¼Œä½†æ˜¯æ¯ä¸ªTaskTrackerå¯ä»¥äº§ç”Ÿå¤šä¸ªjava è™šæ‹Ÿæœºï¼ˆJVMï¼‰ï¼Œç”¨äº&lt;strong&gt;å¹¶è¡Œ&lt;/strong&gt;å¤„ç†å¤šä¸ªmapä»¥åŠreduceä»»åŠ¡ã€‚TaskTrackerçš„ä¸€ä¸ªé‡è¦èŒè´£å°±æ˜¯ä¸JobTrackeräº¤äº’ã€‚å¦‚æœ JobTrackeræ— æ³•å‡†æ—¶åœ°è·å–TaskTrackeræäº¤çš„ä¿¡æ¯ï¼ŒJobTrackerå°±åˆ¤å®šTaskTrackerå·²ç»å´©æºƒï¼Œå¹¶å°†ä»»åŠ¡åˆ†é…ç»™å…¶ä»– èŠ‚ç‚¹å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20161117_182155" src="images/Screenshot_20161117_182155.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20161117_182220" src="images/Screenshot_20161117_182220.png"&gt;&lt;/p&gt;
&lt;h3&gt;ResourceManager &amp;amp; NodeManager&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ResourceManagerï¼šè´Ÿè´£æ•´ä¸ªé›†ç¾¤çš„èµ„æºç®¡ç†å’Œè°ƒåº¦ï¼Œå°†å„ä¸ªèµ„æºéƒ¨åˆ†ï¼ˆè®¡ç®—ã€å†…å­˜ã€å¸¦å®½ç­‰ï¼‰ç²¾å¿ƒå®‰æ’ç»™åŸºç¡€ NodeManagerï¼ˆYARN çš„æ¯èŠ‚ç‚¹ä»£ç†ï¼‰&lt;/li&gt;
&lt;li&gt;å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚&lt;/li&gt;
&lt;li&gt;å¯åŠ¨æˆ–ç›‘æ§ApplicationMaster&lt;/li&gt;
&lt;li&gt;ç›‘æ§NodeManager&lt;/li&gt;
&lt;li&gt;èµ„æºçš„åˆ†é…ä¸è°ƒåº¦&lt;/li&gt;
&lt;li&gt;ApplicationMasterï¼šè´Ÿè´£åº”ç”¨ç¨‹åºç›¸å…³äº‹åŠ¡ï¼Œæ¯”å¦‚ä»»åŠ¡è°ƒåº¦ã€ä»»åŠ¡ç›‘æ§å’Œå®¹é”™ç­‰ï¼Œè´Ÿè´£åè°ƒæ¥è‡ª ResourceManager çš„èµ„æºï¼Œå¹¶é€šè¿‡ NodeManager ç›‘è§†å®¹å™¨çš„æ‰§è¡Œå’Œèµ„æºä½¿ç”¨ï¼ˆCPUã€å†…å­˜ç­‰çš„èµ„æºåˆ†é…ï¼‰&lt;/li&gt;
&lt;li&gt;è´Ÿè´£æ•°æ®çš„åˆ‡åˆ†&lt;/li&gt;
&lt;li&gt;ä¸ºåº”ç”¨ç¨‹åºç”³è¯·èµ„æºå¹¶åˆ†é…ç»™å†…éƒ¨çš„ä»»åŠ¡&lt;/li&gt;
&lt;li&gt;ä»»åŠ¡çš„ç›‘æ§ä¸å®¹é”™&lt;/li&gt;
&lt;li&gt;NodeManagerï¼š NodeManagerç®¡ç†YARNé›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ã€‚NodeManager æä¾›é’ˆå¯¹é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„æœåŠ¡ï¼Œä»ç›‘ç£å¯¹ä¸€ä¸ªå®¹å™¨çš„ç»ˆç”Ÿç®¡ç†åˆ°ç›‘è§†èµ„æºå’Œè·Ÿè¸ªèŠ‚ç‚¹å¥åº·ã€‚&lt;/li&gt;
&lt;li&gt;ç®¡ç†å•ä¸ªèŠ‚ç‚¹ä¸Šçš„èµ„æº&lt;/li&gt;
&lt;li&gt;å¤„ç†æ¥è‡ªResourceManagerçš„å‘½ä»¤&lt;/li&gt;
&lt;li&gt;å¤„ç†æ¥è‡ªApplicationMasterçš„å‘½ä»¤&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hadoopçš„masterå’Œslaveåˆ†åˆ«è¿è¡Œåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸­ï¼Œå…¶ä¸­hadoop-masterä¸­è¿è¡ŒNameNodeå’ŒResourceManagerï¼Œhadoop-slaveä¸­è¿è¡ŒDataNodeå’ŒNodeManagerã€‚NameNodeå’ŒDataNodeæ˜¯Hadoopåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸHDFSçš„ç»„ä»¶ï¼Œè´Ÿè´£å‚¨å­˜è¾“å…¥ä»¥åŠè¾“å‡ºæ•°æ®ï¼Œè€ŒResourceManagerå’ŒNodeManageræ˜¯Hadoopé›†ç¾¤èµ„æºç®¡ç†ç³»ç»ŸYARNçš„ç»„ä»¶ï¼Œè´Ÿè´£CPUå’Œå†…å­˜èµ„æºçš„è°ƒåº¦ã€‚ &lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20161106_200858" src="images/Screenshot_20161106_200858.png"&gt;&lt;/p&gt;
&lt;h2&gt;Running Hadoop&lt;/h2&gt;
&lt;h3&gt;Local (standalone) mode&lt;/h3&gt;
&lt;p&gt;With empty configuration files, Hadoop will run completely on the local machine.Because thereâ€™s no need to communicate with other nodes, the standalone mode doesn't use HDFS, nor will it launch any of the Hadoop daemons.&lt;/p&gt;
&lt;h3&gt;Pseudo-distributed mode&lt;/h3&gt;
&lt;p&gt;running Hadoop in a â€œcluster of oneâ€  with all daemons running on a single machine.&lt;/p&gt;
&lt;h3&gt;Fully distributed mode&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;masterâ€”The master node of the cluster and host of the NameNode and Job-Tracker daemons&lt;/li&gt;
&lt;li&gt;backupâ€”The server that hosts the Secondary NameNode daemon&lt;/li&gt;
&lt;li&gt;hadoop1, hadoop2, hadoop3, ...â€”The slave boxes of the cluster running both DataNode and TaskTracker daemons&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;About Java&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Version 2.7 and later of Apache Hadoop requires Java 7. It is built and tested on both OpenJDK and Oracle (&lt;a href="https://wiki.apache.org/hadoop/HotSpot"&gt;HotSpot&lt;/a&gt;)'s JDK/JRE.Â Earlier versions (2.6 and earlier) support Java 6.Â &lt;/p&gt;
&lt;p&gt;OpenJDK has been used to qualify Hadoop 2.2 -and the rest of the Hortonworks bundle- on RHEL6. No problems were noted.Â &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;åŸºäºè™šæ‹Ÿæœºæ­å»ºHadoopé›†ç¾¤&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;åŸºäºå¹³å°ï¼šUbuntu server 16.04&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;å‡†å¤‡è™šæ‹Ÿæœº&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨Virtualboxå®‰è£…ubuntuï¼Œä¸ºäº†ä¾¿äºå¤šè™šæ‹Ÿæœºä¹‹é—´ã€å®¿ä¸»æœºä¸è™šæ‹Ÿæœºä¹‹é—´è¿æ¥ï¼Œå¢åŠ ä¸€å¼ ä½¿ç”¨&lt;code&gt;Host-only&lt;/code&gt;çš„è™šæ‹Ÿç½‘å¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20161116_144933" src="images/Screenshot_20161116_144933.png"&gt;&lt;/p&gt;
&lt;h3&gt;æ‰‹åŠ¨å®‰è£…æ•™ç¨‹&lt;/h3&gt;
&lt;p&gt;å‚è§ https://www.digitalocean.com/community/tutorials/how-to-install-hadoop-in-stand-alone-mode-on-ubuntu-16-04&lt;/p&gt;
&lt;h3&gt;å•èŠ‚ç‚¹è„šæœ¬å®‰è£…&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ä»¥ä¸‹è„šæœ¬å®‰è£…ï¼Œè„šæœ¬æµ‹è¯•è¿‡çš„ç¯å¢ƒä¸ºubuntu server 16.04ã€‚&lt;/p&gt;
&lt;p&gt;https://github.com/chih7/hadoop_install&lt;/p&gt;
&lt;h3&gt;åˆ†å¸ƒå¼è¿è¡Œ&lt;/h3&gt;
&lt;p&gt;ç›´æ¥ä»å•æœºå®‰è£…çš„virtualboxè™šæ‹Ÿæœºcloneäº†ä¸¤å°ä¸€æ ·çš„æœºå™¨ï¼Œç¡®ä¿ipå¦‚è„šæœ¬é…ç½®ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;MASTER_IP="192.168.56.101"
SLAVE_IP1="192.168.56.102"
SLAVE_IP2="192.168.56.103"&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿›å…¥äº†hadoop-masterçš„/rootç›®å½•ï¼Œç›´æ¥è¿è¡Œ&lt;code&gt;start-hadoop.sh&lt;/code&gt;è„šæœ¬å³å¯ã€‚&lt;/p&gt;
&lt;h2&gt;åŸºäºDockeræ­å»ºHadoopé›†ç¾¤&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æ ‡å‡†çš„äº¤ä»˜ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="01-docker-container" src="images/01-docker-container.jpg"&gt;&lt;/p&gt;
&lt;h3&gt;ä¼˜åŠ¿&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å­˜å‚¨é©±åŠ¨-å±‚å é•œåƒæ¨¡å‹&lt;/li&gt;
&lt;li&gt;ä»¥åº”ç”¨ä¸ºä¸­å¿ƒçš„äº‘è®¡ç®—æ–°æ¨¡å¼-ä»¥å®¹å™¨ä¸ºæ ‡å‡†äº¤ä»˜ä»¶&lt;/li&gt;
&lt;li&gt;ç‰ˆæœ¬æ§åˆ¶-å¯¹æ¥ä»£ç ä»“åº“ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•å’Œæ„å»º&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="uScreenshot_20161110_120920" src="images/Screenshot_20161110_120920.png"&gt;&lt;/p&gt;
&lt;h3&gt;å®‰è£…è¿‡ç¨‹&lt;/h3&gt;
&lt;h4&gt;3èŠ‚ç‚¹Hadoopé›†ç¾¤æ­å»ºæ­¥éª¤&lt;/h4&gt;
&lt;h5&gt;pull docker image&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo docker pull kiwenlau/hadoop:1.0
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;clone github repository&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git clone https://github.com/kiwenlau/hadoop-cluster-docker
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;create hadoop network&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo docker network create --driver=bridge hadoop
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;start container&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cd hadoop-cluster-docker
sudo ./start-container.sh
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;output:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;start hadoop-master container...
start hadoop-slave1 container...
start hadoop-slave2 container...
root@hadoop-master:~# 
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;start 3 containers with 1 master and 2 slaves&lt;/li&gt;
&lt;li&gt;you will get into the /root directory of hadoop-master container&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ docker info Â 
Containers: &lt;span class="m"&gt;3&lt;/span&gt;
 Running: &lt;span class="m"&gt;3&lt;/span&gt;
 Paused: &lt;span class="m"&gt;0&lt;/span&gt;
 Stopped: &lt;span class="m"&gt;0&lt;/span&gt;
Images: &lt;span class="m"&gt;1&lt;/span&gt;
...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æŸ¥çœ‹dockerçš„è¿è¡Œä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°åŸºäºä¸€ä¸ªé•œåƒï¼Œè¿è¡Œäº†ä¸‰ä¸ªå®¹å™¨å®ä¾‹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo du -chs ./docker/ 
&lt;span class="m"&gt;1&lt;/span&gt;.7G    ./docker/
&lt;span class="m"&gt;1&lt;/span&gt;.7G    total
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æŸ¥çœ‹æ•´ä¸ªdockeré›†ç¾¤çš„ç£ç›˜å ç”¨ï¼Œå…¨éƒ¨åªæœ‰3.3GBï¼Œå¯è§åŸºäºå±‚å é•œåƒæ¨¡å‹ï¼Œdockerå¤§å¤§å‡å°‘äº†ç£ç›˜å ç”¨ã€‚&lt;/p&gt;
&lt;h5&gt;start hadoop&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;./start-hadoop.sh
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;run wordcount&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;./run-wordcount.sh
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;output&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;input file1.txt:
Hello Hadoop

input file2.txt:
Hello Docker

wordcount output:
Docker    1
Hadoop    1
Hello    2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hadoopç½‘é¡µç®¡ç†åœ°å€:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;NameNode:Â &lt;a href="http://127.0.0.1:50070/"&gt;http://127.0.0.1:50070/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ResourceManager:Â &lt;a href="http://127.0.0.1:8088/"&gt;http://127.0.0.1:8088/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;127.0.0.1&lt;/code&gt;ä¸ºè¿è¡Œå®¹å™¨çš„ä¸»æœºçš„IPã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot_20161107_133024" src="images/Screenshot_20161107_133024.png"&gt;&lt;/p&gt;
&lt;h4&gt;NèŠ‚ç‚¹Hadoopé›†ç¾¤æ­å»ºæ­¥éª¤&lt;/h4&gt;
&lt;h5&gt;å…ˆå‡†å¤‡3èŠ‚ç‚¹Hadoopé›†ç¾¤&lt;/h5&gt;
&lt;h5&gt;é‡æ–°æ„å»ºDockeré•œåƒ&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo ./resize-cluster.sh 5
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;æŒ‡å®šä»»æ„Nï¼Œå¢åŠ slavesèŠ‚ç‚¹çš„æ•°é‡&lt;/li&gt;
&lt;/ul&gt;
&lt;h5&gt;å¯åŠ¨Dockerå®¹å™¨&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo ./start-container.sh 5
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;ä¸ç¬¬2æ­¥ä¸­çš„Nä¿æŒä¸€è‡´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‚è€ƒï¼š https://github.com/kiwenlau/hadoop-cluster-docker&lt;/p&gt;
&lt;h3&gt;Dockeré›†ç¾¤&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Kubernetes  &lt;/li&gt;
&lt;li&gt;Docker SwarmÂ &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;åŸºäºäº‘çš„hadoopé›†ç¾¤&lt;/h2&gt;
&lt;h3&gt;é’äº‘&lt;/h3&gt;
&lt;p&gt;https://www.qingcloud.com/hadoop&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.qingcloud.com/hadoop#hdfs"&gt;é›†æˆ Yarn&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.qingcloud.com/hadoop#scaling"&gt;åœ¨çº¿ä¼¸ç¼©&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.qingcloud.com/hadoop#monitor"&gt;å®æ—¶ç›‘æ§&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.qingcloud.com/hadoop#alarm"&gt;ç›‘æ§å‘Šè­¦&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;ä»·æ ¼&lt;/h4&gt;
&lt;p&gt;&lt;img alt="Screenshot_20161107_210119" src="images/Screenshot_20161107_210119.png"&gt;&lt;/p&gt;
&lt;h3&gt;Azureä¸­å›½&lt;/h3&gt;
&lt;p&gt;https://www.azure.cn/home/features/hdinsight/&lt;/p&gt;
&lt;p&gt;å›½å†…é¦–å®¶100%åŸºäº Apache Hadoop çš„äº‘æœåŠ¡&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŒ‰éœ€æ‰©å±•è‡³ PB çº§åˆ«&lt;/li&gt;
&lt;li&gt;å¤„ç†éç»“æ„åŒ–å’ŒåŠç»“æ„åŒ–æ•°æ®&lt;/li&gt;
&lt;li&gt;åœ¨ Javaã€.NET ç­‰ç¯å¢ƒä¸­å¼€å‘&lt;/li&gt;
&lt;li&gt;æ— éœ€è´­ä¹°å’Œç»´æŠ¤ç¡¬ä»¶&lt;/li&gt;
&lt;li&gt;ä»…ä¸ºæ‚¨ä½¿ç”¨çš„æœåŠ¡ä»˜è´¹&lt;/li&gt;
&lt;li&gt;åœ¨å‡ åˆ†é’Ÿå†…åˆ›å»º Hadoop ç¾¤é›†&lt;/li&gt;
&lt;li&gt;åœ¨ Excel ä¸­ç›´è§‚å‘ˆç°æ‚¨çš„ Hadoop æ•°æ®&lt;/li&gt;
&lt;li&gt;è½»æ¾é›†æˆæœ¬åœ° Hadoop ç¾¤é›†&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;ä»·æ ¼&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;å®ä¾‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å†…æ ¸æ•°&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å†…å­˜æ•°&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç£ç›˜å¤§å°&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ¯èŠ‚ç‚¹ä»·æ ¼&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;A1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1.75GB&lt;/td&gt;
&lt;td&gt;70GB&lt;/td&gt;
&lt;td&gt;ï¿¥0.51 /å°æ—¶ï¼ˆçº¦åˆï¿¥379.44 /æœˆï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;A2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;3.5GB&lt;/td&gt;
&lt;td&gt;135GB&lt;/td&gt;
&lt;td&gt;ï¿¥1.01 /å°æ—¶ï¼ˆçº¦åˆï¿¥751.44 /æœˆï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;A3&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;7GB&lt;/td&gt;
&lt;td&gt;285GB&lt;/td&gt;
&lt;td&gt;ï¿¥2.03 /å°æ—¶ï¼ˆçº¦åˆï¿¥1,510.32 /æœˆï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;A4&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;14GB&lt;/td&gt;
&lt;td&gt;605GB&lt;/td&gt;
&lt;td&gt;ï¿¥4.05 /å°æ—¶ï¼ˆçº¦åˆï¿¥3,013.20 /æœˆï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;AWSä¸­å›½&lt;/h3&gt;
&lt;p&gt;https://aws.amazon.com/cn/elasticmapreduce/&lt;/p&gt;
&lt;p&gt;Amazon EMR ç®€åŒ–äº†å¤§æ•°æ®çš„å¤„ç†ï¼Œæä¾›çš„æ‰˜ç®¡Â &lt;a href="https://aws.amazon.com/cn/elasticmapreduce/details/hadoop/"&gt;Hadoop&lt;/a&gt;Â æ¡†æ¶å¯ä»¥è®©æ‚¨è½»æ¾ã€å¿«é€Ÿã€ç»æµé«˜æ•ˆåœ°åœ¨å¤šä¸ªåŠ¨æ€å¯æ‰©å±•çš„ Amazon EC2 å®ä¾‹ä¹‹é—´åˆ†å‘å’Œå¤„ç†å¤§é‡æ•°æ®ã€‚æ‚¨è¿˜å¯ä»¥è¿è¡Œå…¶ä»–å¸¸ç”¨çš„åˆ†å‘æ¡†æ¶ï¼ˆä¾‹å¦‚ Amazon EMR ä¸­çš„ Spark å’Œ Prestoï¼‰ä¸å…¶ä»– AWS æ•°æ®å­˜å‚¨æœåŠ¡ï¼ˆä¾‹å¦‚ Amazon S3 å’Œ Amazon DynamoDBï¼‰ä¸­çš„æ•°æ®è¿›è¡Œäº’åŠ¨ã€‚&lt;/p&gt;</content><category term="linux"></category><category term="Hadoop"></category><category term="Javaï¼Œ Big Data"></category></entry><entry><title>ä½¿ç”¨LuCIçš„RPCæ¥å£ä¿®æ”¹openwrté…ç½®</title><link href="https://blog.chih.me/chang-openwtr-ppoe-password.html" rel="alternate"></link><published>2016-10-17T00:00:00+08:00</published><updated>2016-10-17T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2016-10-17:/chang-openwtr-ppoe-password.html</id><summary type="html">&lt;p&gt;ç®€å•æ¥è¯´ï¼Œæœ¬æ–‡æ•´ç†äº†ä¸€äº›&lt;code&gt;openwrt&lt;/code&gt;çš„RPCæ¥å£ï¼Œç”¨æ¥è‡ªåŠ¨ä¿®æ”¹pppoeçš„å¯†ç ï¼Œå¹¶é‡å¯ç½‘ç»œã€‚ä¸ºä»€ä¹ˆè¦å¼„è¿™äº›ç©æ„å‘¢ï¼Œå› ä¸ºæµ™æ±Ÿé«˜æ ¡ä¸­æ™®éä½¿ç”¨çš„è›‹ç–¼çš„é—ªè®¯â€”â€”ä¸¤ä¸‰å¤©æ¢ä¸ªåŠ¨æ€å¯†ç ï¼Œæ—¶ä¸æ—¶ç»™ä½ æ–­ä¸ªç½‘ï¼ä½¿ç”¨è¿™äº›APIçš„æ˜¯ä¸€ä¸ªAndroidåº”ç”¨ï¼Œå®ƒåœ¨ç”¨æˆ·æŒ‰ä¸‹ä¸€ä¸ªæŒ‰é”®åè‡ªåŠ¨å‘ç”µä¿¡å‘é€ä¸€æ¡è·å–å¯†ç çš„çŸ­ä¿¡ï¼Œç„¶åè·å–è¿”å›çš„çŸ­ä¿¡ï¼Œè§£æå…¶ä¸­çš„é—ªè®¯åŠ¨æ€å¯†ç ï¼Œé€šè¿‡&lt;code&gt;openwrt&lt;/code&gt;çš„RPCæ¥å£ä¿®æ”¹å¯†ç å¹¶é‡å¯ç½‘ç»œï¼Œè¿™æ ·ï¼Œåªéœ€è¦ä¸€æ¬¡æŒ‰æŒ‰é’®çš„æ“ä½œï¼Œå°±èƒ½æ¢å¤ç½‘ç»œï¼Œåˆå¯ä»¥æ„‰å¿«çš„ç©è€å•¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/openwrt/openwrt"&gt;openwrt&lt;/a&gt; æˆ‘å°±ä¸å¤šä»‹ç»äº†ï¼Œç©è·¯ç”±å™¨çš„éƒ½çŸ¥é“ï¼›&lt;a href="https://wiki.openwrt.org/doc/techref/uci"&gt;UCI&lt;/a&gt;æ˜¯&lt;code&gt;openwrt&lt;/code&gt;æä¾›çš„ä¸€å¥—ç»Ÿä¸€çš„é…ç½®æ¥å£ï¼Œå¯ä»¥ç”¨ä»¥é…ç½®æ•´å°&lt;code&gt;openwrt&lt;/code&gt;è®¾å¤‡ï¼›è€Œ&lt;a href="https://wiki.openwrt.org/doc/techref/luci"&gt;LuCI&lt;/a&gt;æ˜¯ä¸€ä¸ªåŸºäºLuaè¯­è¨€å¼€å‘çš„ã€åŒ…è£…äº†åº•å±‚UCIæ¥å£çš„æ˜“äºä½¿ç”¨çš„Webç”¨æˆ·æ¥å£ã€‚LuCIä¹Ÿæä¾›äº†ä¸€ç§åŸºäºJSONæ ¼å¼çš„RPCæœºåˆ¶æ¥è®¿é—®å…¶å†…éƒ¨çš„åº“ã€‚&lt;/p&gt;
&lt;p&gt;LuCIçš„RPCæ¥å£çš„åœ°å€ä¸ºÂ &lt;strong&gt;/cgi-bin/luci/rpc/LIBRARY&lt;/strong&gt;ï¼Œå…¶ä¸­LIBRARYä»£è¡¨æŒ‰åŠŸèƒ½åŒºåˆ†çš„å‡ ä¸ªåº“ï¼Œåˆ†åˆ«ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;auth&lt;/strong&gt; - åŸºäºtokençš„è®¤è¯åº“&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;uci&lt;/strong&gt; - UCIç»Ÿä¸€é…ç½®æ¥å£çš„æ˜ å°„&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;fs&lt;/strong&gt; -  æ–‡ä»¶æ“ä½œ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;sys â€¦&lt;/strong&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;ç®€å•æ¥è¯´ï¼Œæœ¬æ–‡æ•´ç†äº†ä¸€äº›&lt;code&gt;openwrt&lt;/code&gt;çš„RPCæ¥å£ï¼Œç”¨æ¥è‡ªåŠ¨ä¿®æ”¹pppoeçš„å¯†ç ï¼Œå¹¶é‡å¯ç½‘ç»œã€‚ä¸ºä»€ä¹ˆè¦å¼„è¿™äº›ç©æ„å‘¢ï¼Œå› ä¸ºæµ™æ±Ÿé«˜æ ¡ä¸­æ™®éä½¿ç”¨çš„è›‹ç–¼çš„é—ªè®¯â€”â€”ä¸¤ä¸‰å¤©æ¢ä¸ªåŠ¨æ€å¯†ç ï¼Œæ—¶ä¸æ—¶ç»™ä½ æ–­ä¸ªç½‘ï¼ä½¿ç”¨è¿™äº›APIçš„æ˜¯ä¸€ä¸ªAndroidåº”ç”¨ï¼Œå®ƒåœ¨ç”¨æˆ·æŒ‰ä¸‹ä¸€ä¸ªæŒ‰é”®åè‡ªåŠ¨å‘ç”µä¿¡å‘é€ä¸€æ¡è·å–å¯†ç çš„çŸ­ä¿¡ï¼Œç„¶åè·å–è¿”å›çš„çŸ­ä¿¡ï¼Œè§£æå…¶ä¸­çš„é—ªè®¯åŠ¨æ€å¯†ç ï¼Œé€šè¿‡&lt;code&gt;openwrt&lt;/code&gt;çš„RPCæ¥å£ä¿®æ”¹å¯†ç å¹¶é‡å¯ç½‘ç»œï¼Œè¿™æ ·ï¼Œåªéœ€è¦ä¸€æ¬¡æŒ‰æŒ‰é’®çš„æ“ä½œï¼Œå°±èƒ½æ¢å¤ç½‘ç»œï¼Œåˆå¯ä»¥æ„‰å¿«çš„ç©è€å•¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/openwrt/openwrt"&gt;openwrt&lt;/a&gt; æˆ‘å°±ä¸å¤šä»‹ç»äº†ï¼Œç©è·¯ç”±å™¨çš„éƒ½çŸ¥é“ï¼›&lt;a href="https://wiki.openwrt.org/doc/techref/uci"&gt;UCI&lt;/a&gt;æ˜¯&lt;code&gt;openwrt&lt;/code&gt;æä¾›çš„ä¸€å¥—ç»Ÿä¸€çš„é…ç½®æ¥å£ï¼Œå¯ä»¥ç”¨ä»¥é…ç½®æ•´å°&lt;code&gt;openwrt&lt;/code&gt;è®¾å¤‡ï¼›è€Œ&lt;a href="https://wiki.openwrt.org/doc/techref/luci"&gt;LuCI&lt;/a&gt;æ˜¯ä¸€ä¸ªåŸºäºLuaè¯­è¨€å¼€å‘çš„ã€åŒ…è£…äº†åº•å±‚UCIæ¥å£çš„æ˜“äºä½¿ç”¨çš„Webç”¨æˆ·æ¥å£ã€‚LuCIä¹Ÿæä¾›äº†ä¸€ç§åŸºäºJSONæ ¼å¼çš„RPCæœºåˆ¶æ¥è®¿é—®å…¶å†…éƒ¨çš„åº“ã€‚&lt;/p&gt;
&lt;p&gt;LuCIçš„RPCæ¥å£çš„åœ°å€ä¸ºÂ &lt;strong&gt;/cgi-bin/luci/rpc/LIBRARY&lt;/strong&gt;ï¼Œå…¶ä¸­LIBRARYä»£è¡¨æŒ‰åŠŸèƒ½åŒºåˆ†çš„å‡ ä¸ªåº“ï¼Œåˆ†åˆ«ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;auth&lt;/strong&gt; - åŸºäºtokençš„è®¤è¯åº“&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;uci&lt;/strong&gt; - UCIç»Ÿä¸€é…ç½®æ¥å£çš„æ˜ å°„&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;fs&lt;/strong&gt; -  æ–‡ä»¶æ“ä½œ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;sys&lt;/strong&gt; - æä¾›äº†ä¸€äº›ç³»ç»Ÿé€šç”¨åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ipkg&lt;/strong&gt; - ipkåŒ…çš„ç®¡ç†&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢ä»¥å…·ä½“çš„æ“ä½œæ¼”ç¤ºå…¶ä¸­ä¸€äº›åº“çš„ä½¿ç”¨ï¼Œæ–‡ä¸­æœªç”¨åˆ°çš„åº“å¯è‡ªè¡ŒæŸ¥è¯¢&lt;a href="https://htmlpreview.github.io/?https://raw.githubusercontent.com/openwrt/luci/master/documentation/api/index.html"&gt;APIæ–‡æ¡£&lt;/a&gt; ã€‚&lt;/p&gt;
&lt;h2&gt;ä¿®æ”¹pppoeå¯†ç æµç¨‹&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢çš„è¯·æ±‚éƒ½ä½¿ç”¨&lt;code&gt;curl&lt;/code&gt;ä½œä¸ºHTTPå®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;h3&gt;è·å–token&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl -i -X POST -d &lt;span class="s1"&gt;&amp;#39;{&amp;quot;method&amp;quot;:&amp;quot;login&amp;quot;,&amp;quot;params&amp;quot;:[&amp;quot;root&amp;quot;,&amp;quot;admin&amp;quot;]}&amp;#39;&lt;/span&gt; http://192.168.1.1/cgi-bin/luci/rpc/auth

HTTP/1.1 &lt;span class="m"&gt;200&lt;/span&gt; OK
Connection: close
Transfer-Encoding: chunked
Content-Type: application/json
Set-Cookie: &lt;span class="nv"&gt;sysauth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;f807d8dc25e82d2d457c0d2f1ee27ce7&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nv"&gt;path&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/
Cache-Control: no-cache
Expires: &lt;span class="m"&gt;0&lt;/span&gt;

&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;id&amp;quot;&lt;/span&gt;:null,&lt;span class="s2"&gt;&amp;quot;result&amp;quot;&lt;/span&gt;:&lt;span class="s2"&gt;&amp;quot;f807d8dc25e82d2d457c0d2f1ee27ce7&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;error&amp;quot;&lt;/span&gt;:null&lt;span class="o"&gt;}&lt;/span&gt;%   
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä»¥POSTå½¢å¼å‘&lt;code&gt;/cgi-bin/luci/rpc/auth&lt;/code&gt;åœ°å€å‘é€æ ¼å¼ä¸º&lt;code&gt;{"method":"login","params":["root","admin"]}&lt;/code&gt;çš„ç™»å½•è¯·æ±‚ï¼Œå…¶ä¸­å‚æ•°&lt;code&gt;params&lt;/code&gt;ä¸ºè·¯ç”±å™¨çš„å¸å·å¯†ç ï¼Œè·¯ç”±å™¨è¿”å›jsonï¼Œå…¶ä¸­resultçš„å€¼å°±æ˜¯tokenï¼Œåœ¨è¿™é‡Œæ˜¯f807d8dc25e82d2d457c0d2f1ee27ce7ã€‚&lt;/p&gt;
&lt;h3&gt;è®¾ç½®pppoeå¯†ç &lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl -i -X POST -d &lt;span class="s1"&gt;&amp;#39;{&amp;quot;method&amp;quot;:&amp;quot;set&amp;quot;, &amp;quot;params&amp;quot;:[&amp;quot;network&amp;quot;, &amp;quot;wan&amp;quot;, &amp;quot;password&amp;quot;, &amp;quot;123456&amp;quot;]}&amp;#39;&lt;/span&gt; http://192.168.1.1/cgi-bin/luci/rpc/uci&lt;span class="se"&gt;\?&lt;/span&gt;auth&lt;span class="se"&gt;\=&lt;/span&gt;f807d8dc25e82d2d457c0d2f1ee27ce7

HTTP/1.1 &lt;span class="m"&gt;200&lt;/span&gt; OK
Connection: close
Transfer-Encoding: chunked
Content-Type: application/json
Cache-Control: no-cache
Expires: &lt;span class="m"&gt;0&lt;/span&gt;

&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;id&amp;quot;&lt;/span&gt;:null,&lt;span class="s2"&gt;&amp;quot;result&amp;quot;&lt;/span&gt;:true,&lt;span class="s2"&gt;&amp;quot;error&amp;quot;&lt;/span&gt;:null&lt;span class="o"&gt;}&lt;/span&gt;%    
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸Šé¢çš„POSTè¯·æ±‚å‘&lt;code&gt;cgi-bin/luci/rpc/uci&lt;/code&gt;è¿™ä¸ªåœ°å€å‘é€&lt;code&gt;set&lt;/code&gt;æ–¹æ³•ï¼Œå‚æ•°æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;config: UCI config&lt;/li&gt;
&lt;li&gt;section: UCI section name&lt;/li&gt;
&lt;li&gt;option: UCI option or UCI section type&lt;/li&gt;
&lt;li&gt;value: UCI value or nothing if you want to create a section&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œ &lt;code&gt;params":["network", "wan", "password", "123456"]&lt;/code&gt;çš„å‚æ•°å³ä»£è¡¨ä¿®æ”¹network-&amp;gt;wan-&amp;gt;passwordçš„å€¼ä¸º123456ã€‚æ³¨æ„å¸¦ä¸Šä½ çš„tokenï¼Œä¸ç„¶è¯·æ±‚å°†è¿”å›403é”™è¯¯ç ã€‚&lt;/p&gt;
&lt;h3&gt;è·å–pppoeå¯†ç &lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl -i -X POST -d &lt;span class="s1"&gt;&amp;#39;{&amp;quot;method&amp;quot;:&amp;quot;get&amp;quot;, &amp;quot;params&amp;quot;:[&amp;quot;network&amp;quot;, &amp;quot;wan&amp;quot;, &amp;quot;password&amp;quot;]}&amp;#39;&lt;/span&gt; http://192.168.1.1/cgi-bin/luci/rpc/uci&lt;span class="se"&gt;\?&lt;/span&gt;auth&lt;span class="se"&gt;\=&lt;/span&gt;f807d8dc25e82d2d457c0d2f1ee27ce7

HTTP/1.1 &lt;span class="m"&gt;200&lt;/span&gt; OK
Connection: close
Transfer-Encoding: chunked
Content-Type: application/json
Cache-Control: no-cache
Expires: &lt;span class="m"&gt;0&lt;/span&gt;

&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;id&amp;quot;&lt;/span&gt;:null,&lt;span class="s2"&gt;&amp;quot;result&amp;quot;&lt;/span&gt;:&lt;span class="s2"&gt;&amp;quot;123456&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;error&amp;quot;&lt;/span&gt;:null&lt;span class="o"&gt;}&lt;/span&gt;%   
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æœ‰&lt;code&gt;set&lt;/code&gt;æ–¹å¼ï¼Œå½“ç„¶ä¹Ÿæœ‰&lt;code&gt;get&lt;/code&gt;æ–¹æ³•ï¼Œå¯ä»¥ç”¨ä»¥å–å¾—é…ç½®çš„å€¼ã€‚&lt;/p&gt;
&lt;h3&gt;æäº¤ä¿®æ”¹&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl -i -X POST -d &lt;span class="s1"&gt;&amp;#39;{&amp;quot;method&amp;quot;:&amp;quot;commit&amp;quot;, &amp;quot;params&amp;quot;:[&amp;quot;network&amp;quot;]}&amp;#39;&lt;/span&gt; http://192.168.1.1/cgi-bin/luci/rpc/uci&lt;span class="se"&gt;\?&lt;/span&gt;auth&lt;span class="se"&gt;\=&lt;/span&gt;f807d8dc25e82d2d457c0d2f1ee27ce7  

HTTP/1.1 &lt;span class="m"&gt;200&lt;/span&gt; OK
Connection: close
Transfer-Encoding: chunked
Content-Type: application/json
Cache-Control: no-cache
Expires: &lt;span class="m"&gt;0&lt;/span&gt;

&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;id&amp;quot;&lt;/span&gt;:null,&lt;span class="s2"&gt;&amp;quot;result&amp;quot;&lt;/span&gt;:true,&lt;span class="s2"&gt;&amp;quot;error&amp;quot;&lt;/span&gt;:null&lt;span class="o"&gt;}&lt;/span&gt;%   
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨æ„ï¼Œå‰é¢çš„&lt;code&gt;set&lt;/code&gt;æ–¹æ³•åªæ”¹å˜äº†å†…å­˜ä¸­é…ç½®çš„å€¼ï¼Œè€Œ &lt;code&gt;uci&lt;/code&gt;åº“ä¸­çš„&lt;code&gt;commit&lt;/code&gt;å³ç›¸å½“äºæŠŠæ›´æ”¹å†™å…¥åˆ°é…ç½®æ–‡ä»¶ã€‚æƒ³è®©é…ç½®ç”Ÿæ•ˆï¼Œè¿™ä¸€æ­¥æ˜¯ä¸ç¼ºå°‘çš„ã€‚&lt;/p&gt;
&lt;h3&gt;é‡å¯ç½‘ç»œ&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl -i -X POST -d &lt;span class="s1"&gt;&amp;#39;{&amp;quot;method&amp;quot;:&amp;quot;exec&amp;quot;, &amp;quot;params&amp;quot;:[&amp;quot;/etc/init.d/network restart&amp;quot;]}&amp;#39;&lt;/span&gt; http://192.168.1.1/cgi-bin/luci/rpc/sys&lt;span class="se"&gt;\?&lt;/span&gt;auth&lt;span class="se"&gt;\=&lt;/span&gt;f807d8dc25e82d2d457c0d2f1ee27ce7

HTTP/1.1 &lt;span class="m"&gt;200&lt;/span&gt; OK
Connection: close
Transfer-Encoding: chunked
Content-Type: application/json
Cache-Control: no-cache
Expires: &lt;span class="m"&gt;0&lt;/span&gt;

&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;id&amp;quot;&lt;/span&gt;:null,&lt;span class="s2"&gt;&amp;quot;result&amp;quot;&lt;/span&gt;:&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;error&amp;quot;&lt;/span&gt;:null&lt;span class="o"&gt;}&lt;/span&gt;%  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è®¿é—®&lt;code&gt;/cgi-bin/luci/rpc/sys&lt;/code&gt;åœ°å€å¯ä»¥ä½¿ç”¨&lt;code&gt;sys&lt;/code&gt;åº“å„ç§æ–¹æ³•ã€‚å¤§è‡´æœ‰ä»¥ä¸‹å‡ ç§ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;a href="http://htmlpreview.github.io/?http://raw.githubusercontent.com/openwrt/luci/master/documentation/api/modules/luci.sys.html#call"&gt;call&lt;/a&gt;Â (...)&lt;/th&gt;
&lt;th align="left"&gt;Execute a given shell command and return the error code&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://htmlpreview.github.io/?http://raw.githubusercontent.com/openwrt/luci/master/documentation/api/modules/luci.sys.html#dmesg"&gt;dmesg&lt;/a&gt;Â ()&lt;/td&gt;
&lt;td align="left"&gt;Retrieves the output of the "dmesg" command.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://htmlpreview.github.io/?http://raw.githubusercontent.com/openwrt/luci/master/documentation/api/modules/luci.sys.html#exec"&gt;exec&lt;/a&gt;Â (command)&lt;/td&gt;
&lt;td align="left"&gt;Execute a given shell command and capture its standard output&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://htmlpreview.github.io/?http://raw.githubusercontent.com/openwrt/luci/master/documentation/api/modules/luci.sys.html#getenv"&gt;getenv&lt;/a&gt;Â (var)&lt;/td&gt;
&lt;td align="left"&gt;Retrieve environment variables.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://htmlpreview.github.io/?http://raw.githubusercontent.com/openwrt/luci/master/documentation/api/modules/luci.sys.html#hostname"&gt;hostname&lt;/a&gt;Â (String)&lt;/td&gt;
&lt;td align="left"&gt;Get or set the current hostname.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://htmlpreview.github.io/?http://raw.githubusercontent.com/openwrt/luci/master/documentation/api/modules/luci.sys.html#httpget"&gt;httpget&lt;/a&gt;Â (url, stream, target)&lt;/td&gt;
&lt;td align="left"&gt;Returns the contents of a documented referred by an URL.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://htmlpreview.github.io/?http://raw.githubusercontent.com/openwrt/luci/master/documentation/api/modules/luci.sys.html#mounts"&gt;mounts&lt;/a&gt;Â ()&lt;/td&gt;
&lt;td align="left"&gt;Retrieve information about currently mounted file systems.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://htmlpreview.github.io/?http://raw.githubusercontent.com/openwrt/luci/master/documentation/api/modules/luci.sys.html#reboot"&gt;reboot&lt;/a&gt;Â ()&lt;/td&gt;
&lt;td align="left"&gt;Initiate a system reboot.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://htmlpreview.github.io/?http://raw.githubusercontent.com/openwrt/luci/master/documentation/api/modules/luci.sys.html#syslog"&gt;syslog&lt;/a&gt;Â ()&lt;/td&gt;
&lt;td align="left"&gt;Retrieves the output of the "logread" command.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://htmlpreview.github.io/?http://raw.githubusercontent.com/openwrt/luci/master/documentation/api/modules/luci.sys.html#uniqueid"&gt;uniqueid&lt;/a&gt;Â (bytes)&lt;/td&gt;
&lt;td align="left"&gt;Generates a random id with specified length.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://htmlpreview.github.io/?http://raw.githubusercontent.com/openwrt/luci/master/documentation/api/modules/luci.sys.html#uptime"&gt;uptime&lt;/a&gt;Â ()&lt;/td&gt;
&lt;td align="left"&gt;Returns the current system uptime stats.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;code&gt;sys&lt;/code&gt;åº“ä¸­&lt;code&gt;exec&lt;/code&gt;æ–¹æ³•å¯ä»¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬é€šè¿‡&lt;code&gt;/etc/init.d/network restart&lt;/code&gt;å‘½ä»¤é‡å¯ç½‘ç»œï¼Œè®©é…ç½®ç”Ÿæ•ˆã€‚&lt;/p&gt;
&lt;h2&gt;Androidç«¯&lt;/h2&gt;
&lt;p&gt;éœ€è¦RPCæ¥å£åŸºæœ¬éƒ½ä»‹ç»å®Œäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä½¿ç”¨æ¥å£äº†ï¼ŒAndroidéœ€è¦å®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç•Œé¢æ˜¾ç¤º&lt;/li&gt;
&lt;li&gt;ç»™ç”µä¿¡å‘é€è¯·æ±‚å¯†ç çš„çŸ­ä¿¡&lt;/li&gt;
&lt;li&gt;è·å–ç”µä¿¡è¿”å›çš„ç”µä¿¡&lt;/li&gt;
&lt;li&gt;è§£æå‡ºçŸ­ä¿¡ä¸­çš„å¯†ç &lt;/li&gt;
&lt;li&gt;è°ƒç”¨openwrtçš„RPCæ¥å£ä¿®æ”¹å¯†ç &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Androidç«¯ç›®å‰åŸºæœ¬å·²ç»å¯ä»¥ç”¨äº†ï¼Œç›¸å…³ä»£ç åç»­ä¼šå¼€æºå‡ºæ¥ã€‚&lt;/p&gt;
&lt;h2&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;Documentation - &lt;a href="http://luci.subsignal.org/trac/wiki/Documentation/JsonRpcHowTo"&gt;http://luci.subsignal.org/trac/wiki/Documentation/JsonRpcHowTo&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://htmlpreview.github.io/?https://raw.githubusercontent.com/openwrt/luci/master/documentation/api/index.html"&gt;LuCI APIæ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.csdn.net/jt6562/article/details/21399897"&gt;LuCIçš„RPCæ¥å£ä½¿ç”¨æ–¹æ³•è¯¦è§£&lt;/a&gt;&lt;/p&gt;</content><category term="linux"></category><category term="openwrt"></category><category term="android"></category><category term="luci"></category><category term="rpc"></category></entry><entry><title>ä½¿ç”¨Pythonæ±‚è§£åˆ†éš™ALOHAæœ€å¤§æ•ˆç‡</title><link href="https://blog.chih.me/use-SymPy-get-max-effectiveness-of-ALOHA.html" rel="alternate"></link><published>2016-10-08T00:00:00+08:00</published><updated>2016-10-08T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2016-10-08:/use-SymPy-get-max-effectiveness-of-ALOHA.html</id><summary type="html">&lt;p&gt;SymPyæ˜¯ä¸€ä¸ªç¬¦å·è®¡ç®—çš„Pythonåº“ï¼ŒSymPyæ”¯æŒç¬¦å·è®¡ç®—ã€é«˜ç²¾åº¦è®¡ç®—ã€æ¨¡å¼åŒ¹é…ã€ç»˜å›¾ã€è§£æ–¹ç¨‹ã€å¾®ç§¯åˆ†ã€ç»„åˆæ•°å­¦ã€ç¦»æ•£æ•°å­¦ã€å‡ ä½•å­¦ã€æ¦‚ç‡ä¸ç»Ÿè®¡ã€ç‰©ç†å­¦ç­‰æ–¹é¢çš„åŠŸèƒ½ã€‚ä¸‹é¢æˆ‘å°†åŸºäºå®ƒæ±‚è§£ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å½“æœ‰Nä¸ªæ´»è·ƒèŠ‚ç‚¹çš„æ—¶å€™ï¼Œåˆ†éš™ALOHAçš„æ•ˆç‡ä¸º &lt;span class="math"&gt;\(N p (1 - p)^{N - 1}\)&lt;/span&gt; ï¼Œæ‰¾å‡ºä½¿è¿™ä¸ªè¡¨è¾¾å¼æœ€å¤§åŒ–çš„&lt;code&gt;p&lt;/code&gt;å€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é‡‡ç”¨ &lt;code&gt;1&lt;/code&gt; ä¸­çš„på€¼ï¼Œè®¡ç®—å½“ &lt;code&gt;N&lt;/code&gt; è¶‹è¿‘äºæ— ç©·æ—¶åˆ†éš™ALOHAçš„æ•ˆç‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sympy&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é¦–å…ˆå¯¼å…¥sympyåº“ï¼Œæ–¹ä¾¿èµ·è§ï¼Œå¯¼å…¥äº†æ‰€æœ‰å†…å®¹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Symbol&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;N&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Symbol&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;p&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨SymPyä¸­ï¼Œæ•°å­¦ç¬¦å·æ˜¯Symbolç±»çš„å¯¹è±¡ï¼Œè¦æ˜ç¡®å£°æ˜ç¬¦å·å˜é‡ï¼Œæˆ‘ä»¬æ–°å»ºäº†&lt;code&gt;N&lt;/code&gt;ä¸&lt;code&gt;p&lt;/code&gt;ç¬¦å· â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;SymPyæ˜¯ä¸€ä¸ªç¬¦å·è®¡ç®—çš„Pythonåº“ï¼ŒSymPyæ”¯æŒç¬¦å·è®¡ç®—ã€é«˜ç²¾åº¦è®¡ç®—ã€æ¨¡å¼åŒ¹é…ã€ç»˜å›¾ã€è§£æ–¹ç¨‹ã€å¾®ç§¯åˆ†ã€ç»„åˆæ•°å­¦ã€ç¦»æ•£æ•°å­¦ã€å‡ ä½•å­¦ã€æ¦‚ç‡ä¸ç»Ÿè®¡ã€ç‰©ç†å­¦ç­‰æ–¹é¢çš„åŠŸèƒ½ã€‚ä¸‹é¢æˆ‘å°†åŸºäºå®ƒæ±‚è§£ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å½“æœ‰Nä¸ªæ´»è·ƒèŠ‚ç‚¹çš„æ—¶å€™ï¼Œåˆ†éš™ALOHAçš„æ•ˆç‡ä¸º &lt;span class="math"&gt;\(N p (1 - p)^{N - 1}\)&lt;/span&gt; ï¼Œæ‰¾å‡ºä½¿è¿™ä¸ªè¡¨è¾¾å¼æœ€å¤§åŒ–çš„&lt;code&gt;p&lt;/code&gt;å€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é‡‡ç”¨ &lt;code&gt;1&lt;/code&gt; ä¸­çš„på€¼ï¼Œè®¡ç®—å½“ &lt;code&gt;N&lt;/code&gt; è¶‹è¿‘äºæ— ç©·æ—¶åˆ†éš™ALOHAçš„æ•ˆç‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sympy&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é¦–å…ˆå¯¼å…¥sympyåº“ï¼Œæ–¹ä¾¿èµ·è§ï¼Œå¯¼å…¥äº†æ‰€æœ‰å†…å®¹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Symbol&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;N&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Symbol&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;p&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨SymPyä¸­ï¼Œæ•°å­¦ç¬¦å·æ˜¯Symbolç±»çš„å¯¹è±¡ï¼Œè¦æ˜ç¡®å£°æ˜ç¬¦å·å˜é‡ï¼Œæˆ‘ä»¬æ–°å»ºäº†&lt;code&gt;N&lt;/code&gt;ä¸&lt;code&gt;p&lt;/code&gt;ç¬¦å·ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å®šä¹‰å…¬å¼ &lt;span class="math"&gt;\(N p (1 - p)^{N - 1}\)&lt;/span&gt; ä¸º&lt;code&gt;e&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;e1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;diff&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½¿ç”¨&lt;code&gt;diff(func, var)&lt;/code&gt;å‡½æ•°è®¡ç®—å‡½æ•°&lt;code&gt;e&lt;/code&gt;å¯¹&lt;code&gt;p&lt;/code&gt;çš„å¾®åˆ†ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;solve&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[1/N]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½¿ç”¨&lt;code&gt;solve(funcï¼Œ var)&lt;/code&gt;å‡½æ•°æ±‚è§£å½“&lt;code&gt;e1=0&lt;/code&gt;æ—¶pçš„å€¼ï¼Œä¸º &lt;span class="math"&gt;\(\frac{1}{N}\)&lt;/span&gt; å¯çŸ¥ï¼Œä½¿ &lt;span class="math"&gt;\(N p (1 - p)^{N - 1}\)&lt;/span&gt; æœ€å¤§åŒ–çš„&lt;code&gt;p&lt;/code&gt;å€¼ä¸º &lt;span class="math"&gt;\(\frac{1}{N}\)&lt;/span&gt; &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å°† &lt;span class="math"&gt;\(p = \frac{1}{N}\)&lt;/span&gt; ä»£å…¥åŸè¡¨è¾¾å¼ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;limit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;oo&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;exp(-1)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½¿ç”¨&lt;code&gt;limit(function, variable, point)&lt;/code&gt;å‡½æ•°æ±‚è§£å½“Nè¶‹å‘æ— ç©·å¤§æ—¶ï¼Œ è¡¨è¾¾å¼eçš„æé™ï¼Œå³ä¸º &lt;span class="math"&gt;\(\frac{1}{e}\)&lt;/span&gt; æ‰€ä»¥ï¼Œå½“ N è¶‹è¿‘äºæ— ç©·æ—¶åˆ†éš™ALOHAçš„æ•ˆç‡ä¸º &lt;span class="math"&gt;\(\frac{1}{e}\)&lt;/span&gt;&lt;/p&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="Python"></category><category term="SymPy"></category><category term="ALOHA"></category><category term="math"></category></entry><entry><title>Not Found</title><link href="https://blog.chih.me/not-found.html" rel="alternate"></link><published>2016-07-01T00:00:00+08:00</published><updated>2016-07-01T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2016-07-01:/not-found.html</id><summary type="html">&lt;p&gt;The requested item could not be located. Perhaps you might want to check
the &lt;a href="/index.html"&gt;Home&lt;/a&gt;? &lt;/p&gt;</summary><content type="html">&lt;p&gt;The requested item could not be located. Perhaps you might want to check
the &lt;a href="/index.html"&gt;Home&lt;/a&gt;? &lt;/p&gt;</content></entry><entry><title>æ— é¢˜</title><link href="https://blog.chih.me/64.html" rel="alternate"></link><published>2015-06-01T00:00:00+08:00</published><updated>2015-06-01T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2015-06-01:/64.html</id><summary type="html">&lt;p&gt;â€œé²œæ´»çš„ç”Ÿå‘½ï¼Œæ‚„æ— å£°æ¯åœ°æ¶ˆå¤±ã€‚ä»–ä»¬çš„æ­»ï¼Œæ—¢ä¸å£®çƒˆï¼Œä¹Ÿä¸æµªæ¼«ï¼Œå½“æ—¶æ— äººçŸ¥æ™“ï¼Œä»Šåæˆ–è®¸ä¹Ÿä¸ä¼šå†è¢«æèµ·ã€‚ä½†åªè¦ä»æœ‰äººè®°å¾—ï¼Œä»–ä»¬çš„æ­»ä¾¿å¹¶éæ¯«æ— æ„ä¹‰ã€‚è¿™ä¹Ÿæ˜¯å¡èå°”â€¢è«è‰æ‹æ‘„è¿™éƒ¨è®°å½•ç‰‡å¹¶åˆ¶ä½œæ¸¸æˆçš„ç›®çš„ã€‚äººï¼Œä¸èƒ½æ°¸è¿œæ¶ˆå¤±ã€‚ä»–ä»¬çš„æ•…äº‹ï¼Œåº”è®©ä¸–äººçŸ¥æ™“ã€‚â€&lt;/p&gt;
&lt;p&gt;â€œâ€˜æˆ‘ä»¬çš„äººæ€§ï¼Œç”±æˆ‘ä»¬å¯¹å¾…åŒèƒçš„è¡Œä¸ºç•Œå®šã€‚â€™1961å¹´è¯ºè´å°”æ–‡å­¦å¥–å¾—ä¸»ä¼Šæ²ƒâ€¢å®‰å¾·é‡Œå¥‡å†™é“ã€‚å¡èå°”ä¸ºä¹”ä¼Šä¸ç•™ä¸‹ä¸€éƒ¨ç”µå½±ï¼Œç›æ ¼ä¸½ç‰¹ä¸ºä¹”ä¼Šä¸ç•™ä¸‹ä¸€ä¸ªç½‘ç«™ã€‚è€Œæ›´å¤šçš„äººï¼Œä»è¿™ä¸ªä¸–ç•Œæ¶ˆå¤±ï¼Œæ²¡äººæ‚¼å¿µä»–ä»¬ï¼Œæ²¡äººä¸ºä»–ä»¬æ„Ÿåˆ°æŠ±æ­‰ï¼Œç”šè‡³æ²¡äººçŸ¥é“ä»–ä»¬æ›¾ç»å­˜åœ¨è¿‡ã€‚ä»Šæ—¶ä»Šæ—¥ï¼Œæˆ‘ä»¬åˆèƒ½ä¸ºä»–ä»¬åšäº›ä»€ä¹ˆ?â€&lt;/p&gt;
&lt;p&gt;-EOF-&lt;/p&gt;</summary><content type="html">&lt;p&gt;â€œé²œæ´»çš„ç”Ÿå‘½ï¼Œæ‚„æ— å£°æ¯åœ°æ¶ˆå¤±ã€‚ä»–ä»¬çš„æ­»ï¼Œæ—¢ä¸å£®çƒˆï¼Œä¹Ÿä¸æµªæ¼«ï¼Œå½“æ—¶æ— äººçŸ¥æ™“ï¼Œä»Šåæˆ–è®¸ä¹Ÿä¸ä¼šå†è¢«æèµ·ã€‚ä½†åªè¦ä»æœ‰äººè®°å¾—ï¼Œä»–ä»¬çš„æ­»ä¾¿å¹¶éæ¯«æ— æ„ä¹‰ã€‚è¿™ä¹Ÿæ˜¯å¡èå°”â€¢è«è‰æ‹æ‘„è¿™éƒ¨è®°å½•ç‰‡å¹¶åˆ¶ä½œæ¸¸æˆçš„ç›®çš„ã€‚äººï¼Œä¸èƒ½æ°¸è¿œæ¶ˆå¤±ã€‚ä»–ä»¬çš„æ•…äº‹ï¼Œåº”è®©ä¸–äººçŸ¥æ™“ã€‚â€&lt;/p&gt;
&lt;p&gt;â€œâ€˜æˆ‘ä»¬çš„äººæ€§ï¼Œç”±æˆ‘ä»¬å¯¹å¾…åŒèƒçš„è¡Œä¸ºç•Œå®šã€‚â€™1961å¹´è¯ºè´å°”æ–‡å­¦å¥–å¾—ä¸»ä¼Šæ²ƒâ€¢å®‰å¾·é‡Œå¥‡å†™é“ã€‚å¡èå°”ä¸ºä¹”ä¼Šä¸ç•™ä¸‹ä¸€éƒ¨ç”µå½±ï¼Œç›æ ¼ä¸½ç‰¹ä¸ºä¹”ä¼Šä¸ç•™ä¸‹ä¸€ä¸ªç½‘ç«™ã€‚è€Œæ›´å¤šçš„äººï¼Œä»è¿™ä¸ªä¸–ç•Œæ¶ˆå¤±ï¼Œæ²¡äººæ‚¼å¿µä»–ä»¬ï¼Œæ²¡äººä¸ºä»–ä»¬æ„Ÿåˆ°æŠ±æ­‰ï¼Œç”šè‡³æ²¡äººçŸ¥é“ä»–ä»¬æ›¾ç»å­˜åœ¨è¿‡ã€‚ä»Šæ—¶ä»Šæ—¥ï¼Œæˆ‘ä»¬åˆèƒ½ä¸ºä»–ä»¬åšäº›ä»€ä¹ˆ?â€&lt;/p&gt;
&lt;p&gt;-EOF-&lt;/p&gt;</content><category term="64"></category></entry><entry><title>æˆ‘çš„ç¡¬ç›˜ä¸å¯èƒ½è¿™ä¹ˆç©º~aria2ç¯‡</title><link href="https://blog.chih.me/download-use-aria2.html" rel="alternate"></link><published>2015-03-31T00:00:00+08:00</published><updated>2015-03-31T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2015-03-31:/download-use-aria2.html</id><summary type="html">&lt;p&gt;å¯¹äºå•çº¯çš„Aria2ç¨‹åºæ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§ã€æ”¯æŒå¤šç§åè®®çš„å‘½ä»¤è¡Œä¸‹è½½å·¥å…·ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ”¯æŒçš„åè®®åŒ…æ‹¬HTTP(S), FTP, BitTorrent, Metalink&lt;/li&gt;
&lt;li&gt;aria2å¯ä»¥å¹¶å‘çš„è¿›è¡Œä¸‹è½½ï¼Œå¹¶å°è¯•å°†ä¸‹è½½å¸¦å®½åˆ©ç”¨ç‡æœ€å¤§åŒ–&lt;/li&gt;
&lt;li&gt;åˆ†ç‰‡ä¸ç»­ä¼ ï¼Œè‡ªåŠ¨ä¸­æ­¢å¹¶æ›¿æ¢æ…¢çš„çº¿ç¨‹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;çœ‹åˆ°å‘½ä»¤è¡Œå¯èƒ½æœ‰äººä¼šæƒ³:â€œæ©ï¼Œåˆæ˜¯é‚£ç§å¼ºå¤§åˆ°ç”¨èµ·æ¥è¦æŸ¥æ‰‹å†Œå†™å‘½ä»¤çš„ç©æ„â€ã€‚å…¶å®ä¸ç„¶ï¼Œç”±äºaria2 æ”¯æŒ JSON-RPCå’ŒXML-RPCè¿œç¨‹è°ƒç”¨ï¼Œå¯ä»¥é€šè¿‡webå‰ç«¯æˆ–å®¢æˆ·ç«¯æ–¹ä¾¿åœ°è¿›è¡Œç®¡ç†ã€‚&lt;/p&gt;
&lt;h3&gt;å®‰è£…&lt;/h3&gt;
&lt;p&gt;åœ¨Linuxä¸‹ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°é€šè¿‡åŒ…ç®¡ç†è¿›è¡Œå®‰è£…ï¼Œæ¯”å¦‚Arch Linux&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo pacman -S aria2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚æœæ˜¯Windowsï¼Œå¯ä»¥ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ”¾åœ¨&lt;code&gt;C:\WINDOWS\system32&lt;/code&gt;ç›®å½•ä¸‹ï¼Œå°±å¯ä»¥é€šè¿‡&lt;code&gt;aria2c&lt;/code&gt;å‘½ä»¤æ‰§è¡Œç¨‹åºäº†&lt;/p&gt;
&lt;p&gt;å¯ä»¥ç›´æ¥è¿è¡Œå‘½ä»¤è¿›è¡Œä¸‹è½½:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;HTTPä¸‹è½½&lt;/p&gt;
&lt;p&gt;$ aria2c http://example.org/test.bin&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»ä¸¤ä¸ªæºåŒæ—¶ä¸‹è½½&lt;/p&gt;
&lt;p&gt;$ aria2c http â€¦&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;å¯¹äºå•çº¯çš„Aria2ç¨‹åºæ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§ã€æ”¯æŒå¤šç§åè®®çš„å‘½ä»¤è¡Œä¸‹è½½å·¥å…·ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ”¯æŒçš„åè®®åŒ…æ‹¬HTTP(S), FTP, BitTorrent, Metalink&lt;/li&gt;
&lt;li&gt;aria2å¯ä»¥å¹¶å‘çš„è¿›è¡Œä¸‹è½½ï¼Œå¹¶å°è¯•å°†ä¸‹è½½å¸¦å®½åˆ©ç”¨ç‡æœ€å¤§åŒ–&lt;/li&gt;
&lt;li&gt;åˆ†ç‰‡ä¸ç»­ä¼ ï¼Œè‡ªåŠ¨ä¸­æ­¢å¹¶æ›¿æ¢æ…¢çš„çº¿ç¨‹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;çœ‹åˆ°å‘½ä»¤è¡Œå¯èƒ½æœ‰äººä¼šæƒ³:â€œæ©ï¼Œåˆæ˜¯é‚£ç§å¼ºå¤§åˆ°ç”¨èµ·æ¥è¦æŸ¥æ‰‹å†Œå†™å‘½ä»¤çš„ç©æ„â€ã€‚å…¶å®ä¸ç„¶ï¼Œç”±äºaria2 æ”¯æŒ JSON-RPCå’ŒXML-RPCè¿œç¨‹è°ƒç”¨ï¼Œå¯ä»¥é€šè¿‡webå‰ç«¯æˆ–å®¢æˆ·ç«¯æ–¹ä¾¿åœ°è¿›è¡Œç®¡ç†ã€‚&lt;/p&gt;
&lt;h3&gt;å®‰è£…&lt;/h3&gt;
&lt;p&gt;åœ¨Linuxä¸‹ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°é€šè¿‡åŒ…ç®¡ç†è¿›è¡Œå®‰è£…ï¼Œæ¯”å¦‚Arch Linux&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo pacman -S aria2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚æœæ˜¯Windowsï¼Œå¯ä»¥ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ”¾åœ¨&lt;code&gt;C:\WINDOWS\system32&lt;/code&gt;ç›®å½•ä¸‹ï¼Œå°±å¯ä»¥é€šè¿‡&lt;code&gt;aria2c&lt;/code&gt;å‘½ä»¤æ‰§è¡Œç¨‹åºäº†&lt;/p&gt;
&lt;p&gt;å¯ä»¥ç›´æ¥è¿è¡Œå‘½ä»¤è¿›è¡Œä¸‹è½½:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;HTTPä¸‹è½½&lt;/p&gt;
&lt;p&gt;$ aria2c http://example.org/test.bin&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»ä¸¤ä¸ªæºåŒæ—¶ä¸‹è½½&lt;/p&gt;
&lt;p&gt;$ aria2c http://example.org/test.bin ftp://example.org/test.bin&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨ç§å­ä¸‹è½½&lt;/p&gt;
&lt;p&gt;$ aria2c http://example.org/test.torrent&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨ç£åŠ›é“¾ä¸‹è½½&lt;/p&gt;
&lt;p&gt;$ aria2c 'magnet:?xt=urn:btih:248D0A1CD08284299DE78D5C1ED359BB46717D8C'&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;é…ç½®&lt;/h3&gt;
&lt;p&gt;æ¯æ¬¡ä¸‹è½½éƒ½è¦æ‰“å‘½ä»¤å¤ªéº»çƒ¦ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶å¼€å¯rpc serveræ¨¡å¼å¹¶å¯ç”¨å›¾å½¢ç•Œé¢ï¼Œè®©å®ƒè‡ªåŠ¨ç­‰å¾…ä¸‹è½½ä»»åŠ¡ã€è‡ªåŠ¨ä¸‹è½½ã€æš‚åœæˆ–ç»­ä¼ ã€‚
ä»¥ä¸‹çš„é…ç½®æ–‡ä»¶å‚è€ƒYAAWä½œè€…çš„&lt;a href="http://blog.binux.me/2012/12/aria2-examples/"&gt;é…ç½®ç¤ºä¾‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‚æ•° --dir --input-file --save-session æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹è·¯å¾„&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#å…è®¸rpc
enable-rpc=true
#å…è®¸æ‰€æœ‰æ¥æº, webç•Œé¢è·¨åŸŸæƒé™éœ€è¦
rpc-allow-origin-all=true
#å…è®¸éå¤–éƒ¨è®¿é—®
rpc-listen-all=true
#RPCç«¯å£, ä»…å½“é»˜è®¤ç«¯å£è¢«å ç”¨æ—¶ä¿®æ”¹
#rpc-listen-port=6800
#æœ€å¤§åŒæ—¶ä¸‹è½½æ•°(ä»»åŠ¡æ•°), è·¯ç”±å»ºè®®å€¼: 3
max-concurrent-downloads=5
#æ–­ç‚¹ç»­ä¼ 
continue=true
#åŒæœåŠ¡å™¨è¿æ¥æ•°
max-connection-per-server=5
#æœ€å°æ–‡ä»¶åˆ†ç‰‡å¤§å°, ä¸‹è½½çº¿ç¨‹æ•°ä¸Šé™å–å†³äºèƒ½åˆ†å‡ºå¤šå°‘ç‰‡, å¯¹äºå°æ–‡ä»¶é‡è¦
min-split-size=10M
#å•æ–‡ä»¶æœ€å¤§çº¿ç¨‹æ•°, è·¯ç”±å»ºè®®å€¼: 5
split=10
#ä¸‹è½½é€Ÿåº¦é™åˆ¶
max-overall-download-limit=0
#å•æ–‡ä»¶é€Ÿåº¦é™åˆ¶
max-download-limit=0
#ä¸Šä¼ é€Ÿåº¦é™åˆ¶
max-overall-upload-limit=0
#å•æ–‡ä»¶é€Ÿåº¦é™åˆ¶
max-upload-limit=0
#æ–­å¼€é€Ÿåº¦è¿‡æ…¢çš„è¿æ¥
#lowest-speed-limit=0
#éªŒè¯ç”¨ï¼Œéœ€è¦1.16.1ä¹‹åçš„releaseç‰ˆæœ¬
#referer=*
input-file=/home/USER/.config/aria2_web/session.lock
save-session=/home/USER/.config/aria2_web/session.lock
#æ–‡ä»¶ä¿å­˜è·¯å¾„, é»˜è®¤ä¸ºå½“å‰å¯åŠ¨ä½ç½®
dir=/home/chih/Downloads
#æ–‡ä»¶ç¼“å­˜, ä½¿ç”¨å†…ç½®çš„æ–‡ä»¶ç¼“å­˜, å¦‚æœä½ ä¸ç›¸ä¿¡Linuxå†…æ ¸æ–‡ä»¶ç¼“å­˜å’Œç£ç›˜å†…ç½®ç¼“å­˜æ—¶ä½¿ç”¨, éœ€è¦1.16åŠä»¥ä¸Šç‰ˆæœ¬
#disk-cache=0
#å¦ä¸€ç§Linuxæ–‡ä»¶ç¼“å­˜æ–¹å¼, ä½¿ç”¨å‰ç¡®ä¿æ‚¨ä½¿ç”¨çš„å†…æ ¸æ”¯æŒæ­¤é€‰é¡¹, éœ€è¦1.15åŠä»¥ä¸Šç‰ˆæœ¬(?)
#enable-mmap=true
#æ–‡ä»¶é¢„åˆ†é…, èƒ½æœ‰æ•ˆé™ä½æ–‡ä»¶ç¢ç‰‡, æé«˜ç£ç›˜æ€§èƒ½. ç¼ºç‚¹æ˜¯é¢„åˆ†é…æ—¶é—´è¾ƒé•¿
#æ‰€éœ€æ—¶é—´ none &amp;amp;lt; falloc ? trunc &amp;amp;lt;&amp;amp;lt; prealloc, fallocå’Œtruncéœ€è¦æ–‡ä»¶ç³»ç»Ÿå’Œå†…æ ¸æ”¯æŒ
file-allocation=prealloc
#å¯ç”¨æœ¬åœ°èŠ‚ç‚¹æŸ¥æ‰¾
bt-enable-lpd=true
#æ·»åŠ é¢å¤–çš„tracker
#bt-tracker=&amp;amp;lt;URI&amp;amp;gt;,â€¦
#å•ç§å­æœ€å¤§è¿æ¥æ•°
#bt-max-peers=55
#å¼ºåˆ¶åŠ å¯†, é˜²è¿…é›·å¿…å¤‡
#bt-require-crypto=true
#å½“ä¸‹è½½çš„æ–‡ä»¶æ˜¯ä¸€ä¸ªç§å­(ä»¥.torrentç»“å°¾)æ—¶, è‡ªåŠ¨ä¸‹è½½BT
follow-torrent=true
#BTç›‘å¬ç«¯å£, å½“ç«¯å£å±è”½æ—¶ä½¿ç”¨
#listen-port=6881-6999
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æˆ‘æŠŠé…ç½®æ–‡ä»¶æ”¾åœ¨äº†&lt;code&gt;~/.config/aria2_web&lt;/code&gt;ç›®å½•ä¸‹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir -p ~/.config/aria2_web
$ vim ~/.config/aria2_web/aria2.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åŒæ—¶åœ¨ç›®å½•ä¸‹åˆ›å»ºä¼šè¯æ–‡ä»¶ï¼Œæœªå®Œæˆä»»åŠ¡ä¼šä¿å­˜åœ¨è¿™é‡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ touch ~/.config/aria2_web/session.lock
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¥½äº†ï¼Œå¯ä»¥é€šè¿‡&lt;code&gt;aria2c  --conf-path=~ /.config/aria2_web/aria2.conf&lt;/code&gt;è¿›è¡Œé…ç½®æ–‡ä»¶çš„æµ‹è¯•ã€‚&lt;/p&gt;
&lt;h3&gt;è¿›ç¨‹ç®¡ç†&lt;/h3&gt;
&lt;p&gt;ç°åœ¨æˆ‘å¸Œæœ›å¯ä»¥è®©aria2è‡ªåŠ¨å¼€å¯ï¼Œå¹¶å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œè¿›ç¨‹ç®¡ç†ï¼Œæˆ‘ä½¿ç”¨äº†&lt;strong&gt;systemd&lt;/strong&gt;ï¼Œå½“ç„¶ï¼Œ&lt;strong&gt;supervisor&lt;/strong&gt;ä¹Ÿæ˜¯å¯ä»¥è¾¾åˆ°ç±»ä¼¼æ•ˆæœã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ vim ~/.config/systemd/user/aria2.service
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å†…å®¹å¯ä»¥æ˜¯è¿™æ ·:(æ„Ÿè°¢jahiywæŒ‡å‡ºé”™è¯¯:  systemctl --user çš„å¯åŠ¨è„šæœ¬åº”è¯¥æŠŠ WantedBy è®¾ç½®æˆ default.targetï¼Œè€Œä¸æ˜¯ multi-user.targetï¼Œå› ä¸ºä»¥ --user æ–¹å¼å¯åŠ¨ä¸å­˜åœ¨ multi-user.targetï¼Œæ‰€ä»¥ï¼Œsystemctl --user enable äº†ä¹‹åï¼Œæ°¸è¿œéƒ½ä¸ä¼šè‡ªåŠ¨å¯åŠ¨)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;Aria2 Service&lt;/span&gt;
&lt;span class="na"&gt;After&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;network.target&lt;/span&gt;

&lt;span class="k"&gt;[Service]&lt;/span&gt;
&lt;span class="na"&gt;ExecStart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/usr/bin/aria2c  --conf-path=%h/.config/aria2_web/aria2.conf&lt;/span&gt;

&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;default.target&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç®¡ç†:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ systemctl --user start aria2
$ systemctl --user stop aria2
$ systemctl --user restart aria2
$ systemctl --user status aria2
$ systemctl --user &lt;span class="nb"&gt;enable&lt;/span&gt; aria2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨æ„: &lt;code&gt;--user&lt;/code&gt;è¿™ä¸ªé€‰é¡¹ä¸è¦å¿˜äº†ï¼Œä¹Ÿä¸éœ€è¦&lt;code&gt;sudo&lt;/code&gt;ï¼Œåœ¨è¿™é‡Œç”¨çš„æ˜¯systemdç»™ç”¨æˆ·ç”Ÿæˆçš„systemdå®ä¾‹ï¼Œå…·ä½“å¯ä»¥è§&lt;a href="https://wiki.archlinux.org/index.php/Systemd/User"&gt;è¿™é‡Œ&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;YAAW&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/binux/yaaw"&gt;YAAW&lt;/a&gt;æ˜¯Binuxå†™çš„ä¸€ä¸ªAria2 Webç®¡ç†å‰ç«¯ï¼Œç›´æ¥ç”¨webæœåŠ¡å™¨ï¼ˆNginx, Apacheï¼‰æ­å°±æ˜¯äº†ï¼Œå¦‚æœç”¨çš„æ˜¯ä¸Šé¢çš„aria2é…ç½®ï¼Œç›´æ¥è®¿é—®YAAWå°±å¯ä»¥ç®¡ç†aria2äº†ã€‚&lt;/p&gt;
&lt;p&gt;é™„ä¸Šæˆ‘çš„Nginxé…ç½®:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;server {
    listen       80;
    server_name  yaaw.site;

    location / {
        root   /opt/yaaw;
        index  index.html index.htm;
    }
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }
}
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;ä¸€äº›æ”¯æŒå¯¼å‡ºåˆ°aria2 RPCçš„chromeæ‰©å±•&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://chrome.google.com/webstore/detail/thunderlixianassistant/eehlmkfpnagoieibahhcghphdbjcdmen"&gt;è¿…é›·ç¦»çº¿&lt;/a&gt;
&lt;a href="https://github.com/acgotaku/BaiduExporter"&gt;ç™¾åº¦ç½‘ç›˜&lt;/a&gt;
&lt;a href="https://chrome.google.com/webstore/detail/115exporter/ojafklbojgenkohhdgdjeaepnbjffdjf"&gt;115ç½‘ç›˜&lt;/a&gt;&lt;/p&gt;</content><category term="linux"></category><category term="ä¸‹è½½"></category><category term="aria2"></category><category term="systemd"></category></entry><entry><title>Arch Linux ä¿®å¤grub2 å¼•å¯¼è¿‡ç¨‹ä¸­çš„èŠ±å±</title><link href="https://blog.chih.me/fixbug-grub2-in-archlinux.html" rel="alternate"></link><published>2015-03-15T00:00:00+08:00</published><updated>2015-03-15T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2015-03-15:/fixbug-grub2-in-archlinux.html</id><summary type="html">&lt;p&gt;å‰å‡ å¤© &lt;code&gt;opensuse 13.2&lt;/code&gt; è¢«æˆ‘å¼ºå…³äº†å‡ æ¬¡ï¼Œç»“æœç”¨ &lt;code&gt;XFS&lt;/code&gt; æŒ‚è½½çš„ &lt;code&gt;/home&lt;/code&gt; æ¯æ¬¡éƒ½ä¸¢æ–‡ä»¶ï¼Œ è¿™æ ·å®åœ¨æ˜¯è®©äººéš¾ä»¥å®‰å¿ƒï¼Œå†åŠ ä¸Šopensuse çš„ä¸€äº›æ“ä½œå§‹ç»ˆæ„Ÿè§‰æœ‰äº›éº»çƒ¦ï¼Œå®˜æ–¹ä»“åº“çš„è½¯ä»¶ä¹Ÿå°‘ã€‚ç§ç§ä¸ä¾¿ä¹‹å¤„ï¼Œ è®©æˆ‘æƒ³èµ·ä»¥å‰ç”¨ &lt;code&gt;Arch Linux&lt;/code&gt;æ—¶çš„èˆ’å¿ƒï¼Œäºæ˜¯å¤‡ä»½é‡è£…ã€‚æ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿç”¨äº† &lt;code&gt;Ext4&lt;/code&gt;(opensuse ä¸Šçš„&lt;code&gt;Btrfs&lt;/code&gt;çš„ç¡®å…ˆè¿›ï¼Œä½†å¾ˆå¤šåŠŸèƒ½æˆ‘ä¹Ÿæ²¡æ€ä¹ˆå»ç”¨)ã€‚&lt;/p&gt;
&lt;p&gt;â€‹&lt;code&gt;Arch Linux&lt;/code&gt;çš„å®‰è£…è¿‡ç¨‹å…ˆç•¥å»ä¸è¡¨ã€‚å®‰è£…åŸºæœ¬ç³»ç»Ÿå’Œ&lt;code&gt;KDE&lt;/code&gt;éƒ½æ²¡æœ‰å‘ç°é—®é¢˜ï¼Œä½†å®‰è£…å®ŒåŸºæœ¬ç³»ç»Ÿé‡å¯çš„æ—¶å€™å°±å‘ç°æœ‰ä¸ªå°é—®é¢˜äº†å–µã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ä»BIOSè‡ªæ£€å®Œæˆåˆ°æ¡Œé¢å¯åŠ¨ç›´æ¥çš„é‚£æ®µè¿‡ç¨‹ä¸­å±å¹•ä¸€ç›´éƒ½æ˜¯èŠ±çš„ï¼Œå°±æ˜¯é‚£ç§é»‘ç™½ç”µè§†æœºé›ªèŠ±å±çš„æ ·å­ã€‚
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™åªæ˜¯ä¸€ä¸ªå°é—®é¢˜ï¼Œåæ­£è¿›å…¥æ¡Œé¢ä¹‹åå°±æ²¡å½±å“äº†ï¼Œä½†å¯¹äºå¼ºè¿«ç—‡æ‚£è€…çœŸæ˜¯å¤ªéš¾å—äº†å•Š! äºæ˜¯å»Googleæ‰¾è§£å†³æ–¹æ¡ˆï¼Œç¿»äº†å‡ é¡µä¹‹åè¿˜çœŸçš„è¢«æˆ‘æ‰¾åˆ°ç±»ä¼¼çš„é—®é¢˜äº†â€”â€” &lt;a href="https://forum.suse.org.cn/viewtopic.php?f=2&amp;amp;t=2365"&gt;https://forum.suse.org.cn/viewtopic.php?f=2 â€¦&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;å‰å‡ å¤© &lt;code&gt;opensuse 13.2&lt;/code&gt; è¢«æˆ‘å¼ºå…³äº†å‡ æ¬¡ï¼Œç»“æœç”¨ &lt;code&gt;XFS&lt;/code&gt; æŒ‚è½½çš„ &lt;code&gt;/home&lt;/code&gt; æ¯æ¬¡éƒ½ä¸¢æ–‡ä»¶ï¼Œ è¿™æ ·å®åœ¨æ˜¯è®©äººéš¾ä»¥å®‰å¿ƒï¼Œå†åŠ ä¸Šopensuse çš„ä¸€äº›æ“ä½œå§‹ç»ˆæ„Ÿè§‰æœ‰äº›éº»çƒ¦ï¼Œå®˜æ–¹ä»“åº“çš„è½¯ä»¶ä¹Ÿå°‘ã€‚ç§ç§ä¸ä¾¿ä¹‹å¤„ï¼Œ è®©æˆ‘æƒ³èµ·ä»¥å‰ç”¨ &lt;code&gt;Arch Linux&lt;/code&gt;æ—¶çš„èˆ’å¿ƒï¼Œäºæ˜¯å¤‡ä»½é‡è£…ã€‚æ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿç”¨äº† &lt;code&gt;Ext4&lt;/code&gt;(opensuse ä¸Šçš„&lt;code&gt;Btrfs&lt;/code&gt;çš„ç¡®å…ˆè¿›ï¼Œä½†å¾ˆå¤šåŠŸèƒ½æˆ‘ä¹Ÿæ²¡æ€ä¹ˆå»ç”¨)ã€‚&lt;/p&gt;
&lt;p&gt;â€‹&lt;code&gt;Arch Linux&lt;/code&gt;çš„å®‰è£…è¿‡ç¨‹å…ˆç•¥å»ä¸è¡¨ã€‚å®‰è£…åŸºæœ¬ç³»ç»Ÿå’Œ&lt;code&gt;KDE&lt;/code&gt;éƒ½æ²¡æœ‰å‘ç°é—®é¢˜ï¼Œä½†å®‰è£…å®ŒåŸºæœ¬ç³»ç»Ÿé‡å¯çš„æ—¶å€™å°±å‘ç°æœ‰ä¸ªå°é—®é¢˜äº†å–µã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ä»BIOSè‡ªæ£€å®Œæˆåˆ°æ¡Œé¢å¯åŠ¨ç›´æ¥çš„é‚£æ®µè¿‡ç¨‹ä¸­å±å¹•ä¸€ç›´éƒ½æ˜¯èŠ±çš„ï¼Œå°±æ˜¯é‚£ç§é»‘ç™½ç”µè§†æœºé›ªèŠ±å±çš„æ ·å­ã€‚
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™åªæ˜¯ä¸€ä¸ªå°é—®é¢˜ï¼Œåæ­£è¿›å…¥æ¡Œé¢ä¹‹åå°±æ²¡å½±å“äº†ï¼Œä½†å¯¹äºå¼ºè¿«ç—‡æ‚£è€…çœŸæ˜¯å¤ªéš¾å—äº†å•Š! äºæ˜¯å»Googleæ‰¾è§£å†³æ–¹æ¡ˆï¼Œç¿»äº†å‡ é¡µä¹‹åè¿˜çœŸçš„è¢«æˆ‘æ‰¾åˆ°ç±»ä¼¼çš„é—®é¢˜äº†â€”â€” &lt;a href="https://forum.suse.org.cn/viewtopic.php?f=2&amp;amp;t=2365"&gt;https://forum.suse.org.cn/viewtopic.php?f=2&amp;amp;t=2365&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å®‰è£…äº† openSUSEï¼Œç¬¬ä¸€æ¬¡ç”¨ï¼Œä»¥å‰éƒ½æ˜¯ Debianï¼›
ç›®å‰æ˜¯ KDE æ¡Œé¢ï¼ŒIBM T400 Intel é›†æ˜¾ 2G å†…å­˜ï¼›
æˆ‘çš„é—®é¢˜æ˜¯å¼€æœºå¼•å¯¼çš„é¡µé¢æ˜¯èŠ±å±ï¼Œåƒæ˜¯å°æ—¶å€™çš„é»‘ç™½ç”µè§†æœºå·®ä¸€ç‚¹ç‚¹å°±æ”¶åˆ°ä¿¡å·çš„èŠ±å±ï¼Œç›´æ¥å›è½¦ä¼šè¿›å…¥ç³»ç»Ÿï¼Œè¿›å…¥ç³»ç»Ÿåä¸€åˆ‡æ­£å¸¸ï¼›æœ‰å’Œæˆ‘æƒ…å†µä¸€æ ·çš„ suser ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç„¶åæ ¹æ®è‹å§çš„å›ç­”ï¼Œæ¥åˆ°äº†&lt;code&gt;opensuse&lt;/code&gt;çš„å®˜æ–¹æ–‡æ¡£
â€”â€”&lt;a href="https://activedoc.opensuse.org/book/opensuse-reference/chapter-10-the-boot-loader-grub2"&gt;https://activedoc.opensuse.org/book/opensuse-reference/chapter-10-the-boot-loader-grub2&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;GRUB_GFXMODE&lt;/strong&gt;
The resolution used for the gfxterm graphical terminal. Note that you can only use modes supported by your graphics card (VBE). The default is â€˜autoâ€™, which tries to select a preferred resolution. You can display the screen resolutions available to GRUB2 by typing vbeinfo in the GRUB2 command line. The command line is accessed by typing c when the GRUB2 boot menu screen is displayed.
You can also specify a color bit depth by appending it to the resolution setting, for example GRUB_GFXMODE=1280x1024x24.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;OKï¼Œå·®ä¸å¤šæœ‰ç­”æ¡ˆäº†ï¼Œçœ‹æˆ‘æ¥è¯•è¯•çœ‹ï¼Œä¿®æ”¹&lt;code&gt;grub&lt;/code&gt;é…ç½®æ–‡ä»¶:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# vim /etc/default/grub
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;GRUB_GFXMODE=1440x900&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¿®æ”¹GRUBé…ç½®æ–‡ä»¶&lt;code&gt;/etc/default/grub&lt;/code&gt; å’Œ&lt;code&gt;/etc/grub.d/*&lt;/code&gt;åä¸è¦å¿˜è®°é‡æ–°ç”ŸæˆGRUB2æ‰€éœ€çš„é…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# sudo grub-mkconfig -o /boot/grub/grub.cfg
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ»¡æ€€ä¿¡å¿ƒï¼Œé‡å¯ã€‚æ©ã€‚ã€‚ã€‚è¿˜æ˜¯å¤±è´¥ï¼Œå’Œä¹‹å‰çš„é—®é¢˜ä¸€æ¨¡ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;é‚£å†æ”¹æ”¹å§ï¼ŒæŠŠåˆ†è¾¨ç‡é™ä½ä¸€äº›â€”â€”&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;GRUB_GFXMODE=800x600&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™æ ·å°±å¯ä»¥äº†ï¼Œ&lt;code&gt;GRUB&lt;/code&gt;å®Œç¾çš„å‡ºç°åœ¨å±å¹•ä¸Šäº†ã€‚&lt;/p&gt;
&lt;p&gt;-EOF-&lt;/p&gt;</content><category term="linux"></category><category term="grub2"></category></entry><entry><title>ä¸ºMineCraftå¯åŠ¨å™¨æŒ‚ä¸Šä»£ç†</title><link href="https://blog.chih.me/socks-for-minecraft.html" rel="alternate"></link><published>2015-03-14T00:00:00+08:00</published><updated>2015-03-14T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2015-03-14:/socks-for-minecraft.html</id><summary type="html">&lt;p&gt;&lt;code&gt;MineCraft&lt;/code&gt;å®˜æ–¹å¯åŠ¨å™¨åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šä»ä»¥ä¸‹åœ°å€è·å–æ›´æ–°:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;https://s3.amazonaws.com/Minecraft.Download/launcher/launcher.pack.lzma
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚ä½ æ‰€è§ï¼Œç”¨çš„æ˜¯Amazon EC2ï¼ŒAmazon AWSäº‘æœåŠ¡ï¼Œè¿™ä¸¤ä¸ªæœåŠ¡åœ¨å›½å†…éƒ½æ˜¯éƒ¨åˆ†è¢«å±è”½çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å¦‚æœä½ æœ‰shadowsocksç­‰socksä»£ç†çš„è¯æ˜¯å¯ä»¥ç»™&lt;code&gt;MineCraft&lt;/code&gt;æŒ‚ä¸Šä»£ç†çš„ï¼Œè™½ç„¶å®˜æ–¹å¯åŠ¨å™¨å¹¶æœªæä¾›ä»£ç†è®¾ç½®ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘åœ¨è¿™é‡Œç”¨çš„æ˜¯&lt;code&gt;java&lt;/code&gt;æä¾›çš„ä»£ç†é€‰é¡¹:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ java -DsocksProxyHost&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;127&lt;/span&gt;.0.0.1 -DsocksProxyPort&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1080&lt;/span&gt; -jar ~/.minecraft/Minecraft.jar
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æ ·å­æ‰“å¼€&lt;code&gt;MineCraft&lt;/code&gt;å¯åŠ¨å™¨å°±å¯ä»¥å¾ˆå¿«çš„ç™»å½•ã€æ›´æ–°ã€ä¸‹æ¸¸æˆäº†ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ä½ é€šè¿‡å¯åŠ¨å™¨æ‰“å¼€&lt;code&gt;Minecraft&lt;/code&gt;æ¸¸æˆæœ¬ä½“ä¹‹åï¼Œæ¸¸æˆæ˜¯ä¸èµ°ä»£ç†çš„ã€‚&lt;/p&gt;
&lt;p&gt;-EOF-&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;code&gt;MineCraft&lt;/code&gt;å®˜æ–¹å¯åŠ¨å™¨åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šä»ä»¥ä¸‹åœ°å€è·å–æ›´æ–°:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;https://s3.amazonaws.com/Minecraft.Download/launcher/launcher.pack.lzma
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦‚ä½ æ‰€è§ï¼Œç”¨çš„æ˜¯Amazon EC2ï¼ŒAmazon AWSäº‘æœåŠ¡ï¼Œè¿™ä¸¤ä¸ªæœåŠ¡åœ¨å›½å†…éƒ½æ˜¯éƒ¨åˆ†è¢«å±è”½çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å¦‚æœä½ æœ‰shadowsocksç­‰socksä»£ç†çš„è¯æ˜¯å¯ä»¥ç»™&lt;code&gt;MineCraft&lt;/code&gt;æŒ‚ä¸Šä»£ç†çš„ï¼Œè™½ç„¶å®˜æ–¹å¯åŠ¨å™¨å¹¶æœªæä¾›ä»£ç†è®¾ç½®ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘åœ¨è¿™é‡Œç”¨çš„æ˜¯&lt;code&gt;java&lt;/code&gt;æä¾›çš„ä»£ç†é€‰é¡¹:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ java -DsocksProxyHost&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;127&lt;/span&gt;.0.0.1 -DsocksProxyPort&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1080&lt;/span&gt; -jar ~/.minecraft/Minecraft.jar
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æ ·å­æ‰“å¼€&lt;code&gt;MineCraft&lt;/code&gt;å¯åŠ¨å™¨å°±å¯ä»¥å¾ˆå¿«çš„ç™»å½•ã€æ›´æ–°ã€ä¸‹æ¸¸æˆäº†ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ä½ é€šè¿‡å¯åŠ¨å™¨æ‰“å¼€&lt;code&gt;Minecraft&lt;/code&gt;æ¸¸æˆæœ¬ä½“ä¹‹åï¼Œæ¸¸æˆæ˜¯ä¸èµ°ä»£ç†çš„ã€‚&lt;/p&gt;
&lt;p&gt;-EOF-&lt;/p&gt;</content><category term="linux"></category><category term="Java"></category><category term="Minecraft"></category><category term="shadowsocks"></category><category term="ä»£ç†"></category></entry><entry><title>åœ¨openSUSEä¸Šç¼–è¯‘WizNote(ä¸ºçŸ¥ç¬”è®°)</title><link href="https://blog.chih.me/Compiler-WizNote-in-openSUSE.html" rel="alternate"></link><published>2015-03-11T00:00:00+08:00</published><updated>2015-03-11T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2015-03-11:/Compiler-WizNote-in-openSUSE.html</id><summary type="html">&lt;p&gt;&lt;code&gt;Wiznote&lt;/code&gt;--ä¸ºçŸ¥ç¬”è®°æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„å…¨å¹³å°äº‘ç¬”è®°å®¢æˆ·ç«¯ï¼Œå½“åˆæˆ‘ä»Windowsåˆ‡æ¢åˆ°çº¯Linuxå¹³å°çš„æ—¶å€™ï¼Œå°±åŒæ—¶æŠŠæˆ‘çš„åœ¨çº¿ç¬”è®°ä»&lt;code&gt;Evernote&lt;/code&gt;åˆ‡æ¢åˆ°äº†&lt;code&gt;WizNote&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;openSUSE&lt;/code&gt;çš„ä¸ªäººä»“åº“é‡Œå…¶å®æ˜¯æœ‰&lt;code&gt;WizNote&lt;/code&gt;çš„
&lt;a href="https://build.opensuse.org/package/show?project=home%3Agmg137&amp;amp;package=WizNote"&gt;https://build.opensuse.org/package/show?project=home%3Agmg137&amp;amp;package=WizNote&lt;/a&gt;ï¼Œ ä½†å®ƒå¹¶ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ã€‚æ‰€ä»¥æˆ‘æ‰“ç®—è‡ªå·±ç¼–è¯‘ä¸€ä¸ªæœ€æ–°ç‰ˆè‡ªç”¨ï¼ŒåŒæ—¶å› ä¸ºæ˜¯è‡ªç”¨ï¼Œç›´æ¥æºç ç¼–è¯‘å®‰è£…äº†ï¼Œå¹¶æ²¡æœ‰æ‰“åŒ…ã€‚å¦‚æœéœ€è¦åœ¨&lt;code&gt;openSUSE&lt;/code&gt;ä¸‹æ‰“åŒ…ï¼Œå¯ä»¥å‚ç…§è‹å§çš„è§†é¢‘æ•™å­¦&lt;a href="http://www.bilibili.com/video/av688454"&gt;http://www.bilibili.com/video/av688454&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2&gt;è·å–æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä»github ä¸Šé¢ clone ä¸ºçŸ¥ç¬”è®°å®¢æˆ·ç«¯æºç åˆ°æœ¬åœ°&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ git clone https://github.com/WizTeam/WizQTClient.git â€¦&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;&lt;code&gt;Wiznote&lt;/code&gt;--ä¸ºçŸ¥ç¬”è®°æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„å…¨å¹³å°äº‘ç¬”è®°å®¢æˆ·ç«¯ï¼Œå½“åˆæˆ‘ä»Windowsåˆ‡æ¢åˆ°çº¯Linuxå¹³å°çš„æ—¶å€™ï¼Œå°±åŒæ—¶æŠŠæˆ‘çš„åœ¨çº¿ç¬”è®°ä»&lt;code&gt;Evernote&lt;/code&gt;åˆ‡æ¢åˆ°äº†&lt;code&gt;WizNote&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;openSUSE&lt;/code&gt;çš„ä¸ªäººä»“åº“é‡Œå…¶å®æ˜¯æœ‰&lt;code&gt;WizNote&lt;/code&gt;çš„
&lt;a href="https://build.opensuse.org/package/show?project=home%3Agmg137&amp;amp;package=WizNote"&gt;https://build.opensuse.org/package/show?project=home%3Agmg137&amp;amp;package=WizNote&lt;/a&gt;ï¼Œ ä½†å®ƒå¹¶ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ã€‚æ‰€ä»¥æˆ‘æ‰“ç®—è‡ªå·±ç¼–è¯‘ä¸€ä¸ªæœ€æ–°ç‰ˆè‡ªç”¨ï¼ŒåŒæ—¶å› ä¸ºæ˜¯è‡ªç”¨ï¼Œç›´æ¥æºç ç¼–è¯‘å®‰è£…äº†ï¼Œå¹¶æ²¡æœ‰æ‰“åŒ…ã€‚å¦‚æœéœ€è¦åœ¨&lt;code&gt;openSUSE&lt;/code&gt;ä¸‹æ‰“åŒ…ï¼Œå¯ä»¥å‚ç…§è‹å§çš„è§†é¢‘æ•™å­¦&lt;a href="http://www.bilibili.com/video/av688454"&gt;http://www.bilibili.com/video/av688454&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2&gt;è·å–æºç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä»github ä¸Šé¢ clone ä¸ºçŸ¥ç¬”è®°å®¢æˆ·ç«¯æºç åˆ°æœ¬åœ°&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ git clone https://github.com/WizTeam/WizQTClient.git
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;checkoutåˆ°ä½ æƒ³è¦çš„ç‰ˆæœ¬&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ git checkout v2.1.15
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;å‡†å¤‡ç¼–è¯‘ç¯å¢ƒ&lt;/h2&gt;
&lt;h3&gt;å®‰è£…ä¾èµ–&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# zypper in fdupes hicolor-icon-theme update-desktop-files boost-devel cmake chrpath
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;å®‰è£…Qt5&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# zypper in libqt5-qtbase-devel libqt5-qttools-devel libQt5WebKit5-devel libQt5WebKitWidgets-devel
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ç¼–è¯‘å®‰è£…&lt;/h2&gt;
&lt;h3&gt;ç”ŸæˆMakefile&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªbuildç›®å½•&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; ./WizQTClient
$ mkdir build
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç”¨&lt;code&gt;cmake&lt;/code&gt;ç”ŸæˆMakefile&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; build
$ cmake &lt;span class="se"&gt;\&lt;/span&gt;
-DWIZNOTE_USE_QT5&lt;span class="o"&gt;=&lt;/span&gt;YES &lt;span class="se"&gt;\&lt;/span&gt;
-DCMAKE_INSTALL_PREFIX&lt;span class="o"&gt;=&lt;/span&gt;/usr &lt;span class="se"&gt;\&lt;/span&gt;
-DCMAKE_BUILD_TYPE&lt;span class="o"&gt;=&lt;/span&gt;Release &lt;span class="se"&gt;\&lt;/span&gt;
../WizQTClient
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;ç¼–è¯‘å®‰è£…&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ make -jx
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;xä¸ºä½ cpuæ ¸æ•°ï¼Œå¹¶è¡Œç¼–è¯‘ï¼ŒåŠ å¿«é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo make install
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ‰§è¡Œ&lt;code&gt;make install&lt;/code&gt;å®‰è£…åˆ°ç³»ç»Ÿç›®å½•æ—¶éœ€rootæƒé™ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://projects.archlinux.org/svntogit/community.git/tree/trunk/PKGBUILD?h=packages/wiznote"&gt;https://projects.archlinux.org/svntogit/community.git/tree/trunk/PKGBUILD?h=packages/wiznote&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://build.opensuse.org/package/view_file/home:gmg137/WizNote/WizNote.spec?expand=1"&gt;https://build.opensuse.org/package/view_file/home:gmg137/WizNote/WizNote.spec?expand=1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="linux"></category><category term="Qt5"></category><category term="openSUSE"></category><category term="ç¼–è¯‘"></category><category term="WizNote"></category></entry><entry><title>è§£å†³åœ¨opensuseä¸‹virtualboxæ— æ³•æŒ‚è½½ä¸»æœºUSBè®¾å¤‡çš„é—®é¢˜</title><link href="https://blog.chih.me/use-USB-in-virtualbox-at-openSUSE.html" rel="alternate"></link><published>2015-03-02T00:00:00+08:00</published><updated>2015-03-02T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2015-03-02:/use-USB-in-virtualbox-at-openSUSE.html</id><summary type="html">&lt;p&gt;å› ä¸ºè¦ç”¨&lt;code&gt;virtualbox&lt;/code&gt;ä¸­çš„&lt;code&gt;Windows&lt;/code&gt;è™šæ‹Ÿæœºè®¾ç½®G602çš„å¯ç¼–ç¨‹é”®ï¼Œæ‰€ä»¥éœ€è¦æŠŠG602çš„USBæ— çº¿æ¥æ”¶å™¨æŒ‚è½½åˆ°è™šæ‹Ÿæœºä¸Šï¼Œç»“æœå‘ç°&lt;code&gt;virtualbox&lt;/code&gt;å³ä¸‹è§’USBè®¾å¤‡é‚£é‡Œå°½ç®¡æœ‰&lt;code&gt;logitech USB Receiver&lt;/code&gt;è¿™ä¸ªé€‰é¡¹ï¼Œä½†å®ƒæ˜¯ç°è‰²çš„ï¼Œæ— æ³•é€‰ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºå·²ç»ç¡®è®¤å½“å‰ç”¨æˆ·å·²ç»åŠ å…¥&lt;code&gt;vboxusers&lt;/code&gt;ç»„ã€å¹¶å·²ç»å®‰è£…&lt;code&gt;Oracle Extensions&lt;/code&gt;æ‰©å±•åŒ…ï¼Œé‚£ä¹ˆé—®é¢˜åº”è¯¥ä»å…¶ä»–æ–¹å‘å¯»æ‰¾ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨Googleäº†ä¸€æ®µæ—¶é—´åï¼Œç»ˆäºåœ¨openSUSEè®ºå›æ‰¾åˆ°äº†&lt;a href="https://forum.suse.org.cn/viewtopic.php?f=13&amp;amp;t=3130"&gt;è§£å†³æ–¹æ³•&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æºä¸­çš„åŒ…ï¼Œ/usr/lib/udev/rules.d/60-vboxdrv.rules é‡Œé¢æœ‰ 4 è¡Œè§„åˆ™è¢«ç”¨ # å·æ³¨é‡Šæ‰äº†ï¼Œæœ‰å®‰å…¨éšæ‚£ã€‚æŠŠé‚£ 4 è¡Œæ³¨é‡Šæ‰“å¼€åº”è¯¥å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ‰¾åˆ°é‚£å››è¡Œå¹¶å–æ¶ˆæ³¨é‡Šå°±å¯ä»¥äº†:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;SUBSYSTEM=="usb_device", ACTION=="add", RUN+="/usr/share â€¦&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;</summary><content type="html">&lt;p&gt;å› ä¸ºè¦ç”¨&lt;code&gt;virtualbox&lt;/code&gt;ä¸­çš„&lt;code&gt;Windows&lt;/code&gt;è™šæ‹Ÿæœºè®¾ç½®G602çš„å¯ç¼–ç¨‹é”®ï¼Œæ‰€ä»¥éœ€è¦æŠŠG602çš„USBæ— çº¿æ¥æ”¶å™¨æŒ‚è½½åˆ°è™šæ‹Ÿæœºä¸Šï¼Œç»“æœå‘ç°&lt;code&gt;virtualbox&lt;/code&gt;å³ä¸‹è§’USBè®¾å¤‡é‚£é‡Œå°½ç®¡æœ‰&lt;code&gt;logitech USB Receiver&lt;/code&gt;è¿™ä¸ªé€‰é¡¹ï¼Œä½†å®ƒæ˜¯ç°è‰²çš„ï¼Œæ— æ³•é€‰ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºå·²ç»ç¡®è®¤å½“å‰ç”¨æˆ·å·²ç»åŠ å…¥&lt;code&gt;vboxusers&lt;/code&gt;ç»„ã€å¹¶å·²ç»å®‰è£…&lt;code&gt;Oracle Extensions&lt;/code&gt;æ‰©å±•åŒ…ï¼Œé‚£ä¹ˆé—®é¢˜åº”è¯¥ä»å…¶ä»–æ–¹å‘å¯»æ‰¾ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨Googleäº†ä¸€æ®µæ—¶é—´åï¼Œç»ˆäºåœ¨openSUSEè®ºå›æ‰¾åˆ°äº†&lt;a href="https://forum.suse.org.cn/viewtopic.php?f=13&amp;amp;t=3130"&gt;è§£å†³æ–¹æ³•&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æºä¸­çš„åŒ…ï¼Œ/usr/lib/udev/rules.d/60-vboxdrv.rules é‡Œé¢æœ‰ 4 è¡Œè§„åˆ™è¢«ç”¨ # å·æ³¨é‡Šæ‰äº†ï¼Œæœ‰å®‰å…¨éšæ‚£ã€‚æŠŠé‚£ 4 è¡Œæ³¨é‡Šæ‰“å¼€åº”è¯¥å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ‰¾åˆ°é‚£å››è¡Œå¹¶å–æ¶ˆæ³¨é‡Šå°±å¯ä»¥äº†:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;SUBSYSTEM=="usb_device", ACTION=="add", RUN+="/usr/share/virtualbox/VBoxCreateUSBNode.sh $major $minor $attr{bDeviceClass} vboxusers"&lt;/li&gt;
&lt;li&gt;SUBSYSTEM=="usb", ACTION=="add", ENV{DEVTYPE}=="usb_device", RUN+="/usr/share/virtualbox/VBoxCreateUSBNode.sh $major $minor $attr{bDeviceClass} vboxusers"&lt;/li&gt;
&lt;li&gt;SUBSYSTEM=="usb_device", ACTION=="remove", RUN+="/usr/share/virtualbox/VBoxCreateUSBNode.sh --remove $major $minor"&lt;/li&gt;
&lt;li&gt;SUBSYSTEM=="usb", ACTION=="remove", ENV{DEVTYPE}=="usb_device", RUN+="/usr/share/virtualbox/VBoxCreateUSBNode.sh --remove $major $minor"&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;é—²è¯å‡ å¥:&lt;code&gt;Linux&lt;/code&gt;å°±è¿™ç‚¹ä¸æ–¹ä¾¿ï¼Œå„ä¸ªå‘è¡Œç‰ˆæœ‰è‡ªå·±çš„æ‰“åŒ…æ–¹å¼ï¼Œç»“æœåœ¨ä½¿ç”¨ä¸Šæ€»æ˜¯æœ‰ç»†å¾®å·®åˆ«ã€‚æ¯æ¬¡æ¢ä¸€ä¸ªå‘è¡Œç‰ˆæ€»è¦æŠ˜è…¾ä¸€äº›è«åå…¶å¦™çš„é—®é¢˜ã€‚&lt;/p&gt;</content><category term="linux"></category><category term="virtualbox"></category><category term="openSUSE"></category><category term="USB"></category></entry><entry><title>åœ¨å®æ—¶è®¡ç®—æ¡†æ¶Stormé›†ç¾¤ä¸Šè¿è¡ŒStorm-Starterä¾‹å­</title><link href="https://blog.chih.me/storm-starter.html" rel="alternate"></link><published>2015-02-22T00:00:00+08:00</published><updated>2015-02-22T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2015-02-22:/storm-starter.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;å®˜æ–¹æ–‡æ¡£å¾…ç¿»è¯‘ï¼Œä¸ªäººå®è·µåœ¨ä¸‹é¢&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Example Storm Topologies&lt;/h2&gt;
&lt;p&gt;Learn to use Storm!&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Table of Contents&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#getting-started"&gt;Getting started&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#maven"&gt;Using storm-starter with Maven&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#intellij-idea"&gt;Using storm-starter with IntelliJ IDEA&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;&lt;a name="getting-started"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Getting started&lt;/h2&gt;
&lt;h3&gt;Prerequisites&lt;/h3&gt;
&lt;p&gt;First, you need &lt;code&gt;java&lt;/code&gt; and &lt;code&gt;git&lt;/code&gt; installed and in your user's &lt;code&gt;PATH&lt;/code&gt;.  Also, two of the examples in storm-starter
require Python and Ruby.&lt;/p&gt;
&lt;p&gt;Next â€¦&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;å®˜æ–¹æ–‡æ¡£å¾…ç¿»è¯‘ï¼Œä¸ªäººå®è·µåœ¨ä¸‹é¢&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Example Storm Topologies&lt;/h2&gt;
&lt;p&gt;Learn to use Storm!&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Table of Contents&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#getting-started"&gt;Getting started&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#maven"&gt;Using storm-starter with Maven&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#intellij-idea"&gt;Using storm-starter with IntelliJ IDEA&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;&lt;a name="getting-started"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Getting started&lt;/h2&gt;
&lt;h3&gt;Prerequisites&lt;/h3&gt;
&lt;p&gt;First, you need &lt;code&gt;java&lt;/code&gt; and &lt;code&gt;git&lt;/code&gt; installed and in your user's &lt;code&gt;PATH&lt;/code&gt;.  Also, two of the examples in storm-starter
require Python and Ruby.&lt;/p&gt;
&lt;p&gt;Next, make sure you have the storm-starter code available on your machine.  Git/GitHub beginners may want to use the
following command to download the latest storm-starter code and change to the new directory that contains the downloaded
code.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ git clone git://github.com/apache/incubator-storm.git &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;amp&lt;span class="p"&gt;;&amp;amp;&lt;/span&gt;amp&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; incubator-storm/examples/storm-starter
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;storm-starter overview&lt;/h3&gt;
&lt;p&gt;storm-starter contains a variety of examples of using Storm.  If this is your first time working with Storm, check out
these topologies first:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="src/jvm/storm/starter/ExclamationTopology.java"&gt;ExclamationTopology&lt;/a&gt;:  Basic topology written in all Java&lt;/li&gt;
&lt;li&gt;&lt;a href="src/jvm/storm/starter/WordCountTopology.java"&gt;WordCountTopology&lt;/a&gt;:  Basic topology that makes use of multilang by
   implementing one bolt in Python&lt;/li&gt;
&lt;li&gt;&lt;a href="src/jvm/storm/starter/ReachTopology.java"&gt;ReachTopology&lt;/a&gt;: Example of complex DRPC on top of Storm&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;After you have familiarized yourself with these topologies, take a look at the other topopologies in
&lt;a href="src/jvm/storm/starter/"&gt;src/jvm/storm/starter/&lt;/a&gt; such as &lt;a href="src/jvm/storm/starter/RollingTopWords.java"&gt;RollingTopWords&lt;/a&gt;
for more advanced implementations.&lt;/p&gt;
&lt;p&gt;If you want to learn more about how Storm works, please head over to the
&lt;a href="http://storm.incubator.apache.org"&gt;Storm project page&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a name="maven"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Using storm-starter with Maven&lt;/h2&gt;
&lt;h3&gt;Install Maven&lt;/h3&gt;
&lt;p&gt;Install &lt;a href="http://maven.apache.org/"&gt;Maven&lt;/a&gt; (preferably version 3.x) by following
the &lt;a href="http://maven.apache.org/download.cgi"&gt;Maven installation instructions&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Build and install Storm jars locally&lt;/h3&gt;
&lt;p&gt;If you are using the latest development version of Storm, e.g. by having cloned the Storm git repository,
then you must first perform a local build of Storm itself.  Otherwise you will run into Maven errors such as
"Could not resolve dependencies for project &lt;code&gt;org.apache.storm:storm-starter:&amp;lt;storm-version&amp;gt;-SNAPSHOT&lt;/code&gt;".&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Must be run from the top-level directory of the Storm code repository
$ mvn clean install -DskipTests=true
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This command will build Storm locally and install its jar files to your user's &lt;code&gt;$HOME/.m2/repository/&lt;/code&gt;.  When you run
the Maven command to build and run storm-starter (see below), Maven will then be able to find the corresponding version
of Storm in this local Maven repository at &lt;code&gt;$HOME/.m2/repository&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Running topologies with Maven&lt;/h3&gt;
&lt;p&gt;storm-starter topologies can be run with the maven-exec-plugin. For example, to
compile and run &lt;code&gt;WordCountTopology&lt;/code&gt; in local mode, use the command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mvn compile exec:java -Dstorm.topology&lt;span class="o"&gt;=&lt;/span&gt;storm.starter.WordCountTopology
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You can also run clojure topologies with Maven:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mvn compile exec:java -Dstorm.topology&lt;span class="o"&gt;=&lt;/span&gt;storm.starter.clj.word_count
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In Windows parameter should be quoted, like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mvn compile exec:java &lt;span class="s2"&gt;&amp;quot;-Dstorm.topology=storm.starter.clj.word_count&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Packaging storm-starter for use on a Storm cluster&lt;/h3&gt;
&lt;p&gt;You can package a jar suitable for submitting to a Storm cluster with the command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mvn package
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This will package your code and all the non-Storm dependencies into a single "uberjar" at the path
&lt;code&gt;target/storm-starter-{version}-jar-with-dependencies.jar&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Running unit tests&lt;/h3&gt;
&lt;p&gt;Use the following Maven command to run the unit tests that ship with storm-starter.  Unfortunately &lt;code&gt;lein test&lt;/code&gt; does not
yet run the included unit tests.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mvn &lt;span class="nb"&gt;test&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a name="intellij-idea"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Using storm-starter with IntelliJ IDEA&lt;/h2&gt;
&lt;h3&gt;Importing storm-starter as a project in IDEA&lt;/h3&gt;
&lt;p&gt;The following instructions will import storm-starter as a new project in IntelliJ IDEA.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Open &lt;em&gt;File &amp;gt; Import Project...&lt;/em&gt; and navigate to the storm-starter directory of your storm clone (e.g.
  &lt;code&gt;~/git/incubator-storm/examples/storm-starter&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Select &lt;em&gt;Import project from external model&lt;/em&gt;, select "Maven", and click &lt;em&gt;Next&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;In the following screen, enable the checkbox &lt;em&gt;Import Maven projects automatically&lt;/em&gt;.  Leave all other values at their
  defaults.  Click &lt;em&gt;Next&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Click &lt;em&gt;Next&lt;/em&gt; on the following screen about selecting Maven projects to import.&lt;/li&gt;
&lt;li&gt;Select the JDK to be used by IDEA for storm-starter, then click &lt;em&gt;Next&lt;/em&gt;.&lt;ul&gt;
&lt;li&gt;At the time of this writing you should use JDK 6.&lt;/li&gt;
&lt;li&gt;It is strongly recommended to use Sun/Oracle JDK 6 rather than OpenJDK 6.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;You may now optionally change the name of the project in IDEA.  The default name suggested by IDEA is "storm-starter".
  Click &lt;em&gt;Finish&lt;/em&gt; once you are done.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h1&gt;ä¸ªäººå®è·µ&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;é»˜è®¤é€šè¿‡sudo -s è¿›å…¥rootç¯å¢ƒ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;å®‰è£…ç¯å¢ƒ git ï¼Œmaven&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# apt-get install git maven
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;é€šè¿‡git clone é¡¹ç›®&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# git clone git://github.com/apache/incubator-storm.git
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="3-1" src="https://blog.chih.me/images/3-1.png"&gt;&lt;/p&gt;
&lt;h4&gt;è¿›å…¥é¡¹ç›®ç›®å½•&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# cd incubator-storm/examples/storm-starter
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;ç¼–è¯‘&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# mvn compile
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="3-2" src="https://blog.chih.me/images/3-2.png"&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡å‡ºç°é”™è¯¯ï¼Œå»googleäº†ä¸€ä¸‹ï¼Œæ‰¾åˆ°ä¸€ç§åŠæ³•&lt;/p&gt;
&lt;p&gt;&lt;img alt="3-8" src="https://blog.chih.me/images/3-8.png"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ä½¿ç”¨æœ€æ–°çš„ä»£ç è€Œä½¿ç”¨apache-storm-0.9.2-incubatingä¸­çš„ä¾‹å­ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨å®‰è£…stormæ—¶ä¸‹è½½çš„
è¿›å…¥apache-storm-0.9.2-incubating/examples/storm-starter&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰§è¡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# mvn compile
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="3-3" src="https://blog.chih.me/images/3-3.png"&gt;&lt;/p&gt;
&lt;p&gt;æˆåŠŸ!&lt;/p&gt;
&lt;h4&gt;æ‰“åŒ…æ‰€æœ‰çš„ä¾èµ–&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# mvn package
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="3-4" src="https://blog.chih.me/images/3-4.png"&gt;&lt;/p&gt;
&lt;p&gt;è¿›å…¥targetç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°&lt;code&gt;storm-starter-0.9.2-incubating-jar-with-dependencies.jar&lt;/code&gt;&lt;/p&gt;
&lt;h4&gt;æäº¤åˆ°storm(ä»¥WordCountTopologyä¸ºä¾‹)&lt;/h4&gt;
&lt;p&gt;åœ¨nimbusä¸Šè¿è¡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ./bin/storm jar storm-starter-0.9.2-incubating-jar-with-dependencies.jar  storm.starter.WordCountTopology test
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯ä»¥çœ‹åˆ°consoleçš„è¾“å‡ºï¼Œå½“ç„¶å¯ä»¥åœ¨storm uiçš„httpä¸ŠæŸ¥çœ‹topologyçŠ¶æ€ã€‚ä¾‹å­å·²ç»è¢«æäº¤åˆ°é›†ç¾¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="3-6" src="https://blog.chih.me/images/3-6.png"&gt;&lt;/p&gt;</content><category term="linux"></category><category term="Storm"></category><category term="å¤§æ•°æ®"></category><category term="å®æ—¶è®¡ç®—"></category></entry><entry><title>å®æ—¶è®¡ç®—æ¡†æ¶Stormé›†ç¾¤æ­å»º</title><link href="https://blog.chih.me/Setting-up-a-Storm-Cluster-in-3-machines.html" rel="alternate"></link><published>2015-02-20T00:00:00+08:00</published><updated>2015-02-20T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2015-02-20:/Setting-up-a-Storm-Cluster-in-3-machines.html</id><summary type="html">&lt;h3&gt;é¦–å…ˆå¯¹ä¸‰å°ubuntu14.04è¿›è¡Œä»»åŠ¡åˆ†é…:&lt;/h3&gt;
&lt;p&gt;&lt;img alt="4-1" src="https://blog.chih.me/images/4-1.jpg"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;nimbusï¼š
ipï¼š192.168.56.102&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;zookeeperï¼š
ipï¼š192.168.56.102ï¼›192.168.56.103ï¼›192.168.56.104&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;supervisorï¼š
ipï¼š192.168.56.103 192.168.56.104&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ­¤ä¸‰å°è™šæ‹Ÿæœºåˆ†åˆ«ç”¨ä½œStormé›†ç¾¤ä¸­çš„&lt;code&gt;nimbus&lt;/code&gt;èŠ‚ç‚¹ã€&lt;code&gt;Zookeeper&lt;/code&gt;é›†ç¾¤ï¼ˆä¸€å°æœºå™¨å¼€å¤šä¸ªzookeeperè¿›ç¨‹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¤šå°æœºå™¨ï¼‰ã€&lt;code&gt;supervisor&lt;/code&gt;èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™é‡Œæˆ‘ä¸ºæ–¹ä¾¿èµ·è§ ç›´æ¥ä»å•æœºå®‰è£…çš„virtualboxè™šæ‹Ÿæœºcloneäº†ä¸‰å°ä¸€æ ·çš„æœºå™¨è¿›è¡Œé…ç½®ï¼Œæ¯å°ä¸Šçš„é…ç½®è¿‡ç¨‹è§&lt;a href="https://blog.chih.me/Setting-up-a-Storm-Cluster.html"&gt;å®æ—¶è®¡ç®—æ¡†æ¶Stormæœ¬åœ°æ¨¡å¼æ­å»º&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;ä¸‹é¢é’ˆå¯¹æ¯ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œå…·ä½“çš„é…ç½®&lt;/h3&gt;
&lt;p&gt;&lt;img alt="4-2" src="https://blog.chih.me/images/4-2.png"&gt;&lt;/p&gt;
&lt;h4&gt;æ­å»ºä¸€ä¸ªZookeeperé›†ç¾¤&lt;/h4&gt;
&lt;p&gt;ä¸‰å°æœºå™¨åŒæ—¶ä½œä¸º&lt;code&gt;zookeeper&lt;/code&gt;é›†ç¾¤ â€¦&lt;/p&gt;</summary><content type="html">&lt;h3&gt;é¦–å…ˆå¯¹ä¸‰å°ubuntu14.04è¿›è¡Œä»»åŠ¡åˆ†é…:&lt;/h3&gt;
&lt;p&gt;&lt;img alt="4-1" src="https://blog.chih.me/images/4-1.jpg"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;nimbusï¼š
ipï¼š192.168.56.102&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;zookeeperï¼š
ipï¼š192.168.56.102ï¼›192.168.56.103ï¼›192.168.56.104&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;supervisorï¼š
ipï¼š192.168.56.103 192.168.56.104&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ­¤ä¸‰å°è™šæ‹Ÿæœºåˆ†åˆ«ç”¨ä½œStormé›†ç¾¤ä¸­çš„&lt;code&gt;nimbus&lt;/code&gt;èŠ‚ç‚¹ã€&lt;code&gt;Zookeeper&lt;/code&gt;é›†ç¾¤ï¼ˆä¸€å°æœºå™¨å¼€å¤šä¸ªzookeeperè¿›ç¨‹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¤šå°æœºå™¨ï¼‰ã€&lt;code&gt;supervisor&lt;/code&gt;èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™é‡Œæˆ‘ä¸ºæ–¹ä¾¿èµ·è§ ç›´æ¥ä»å•æœºå®‰è£…çš„virtualboxè™šæ‹Ÿæœºcloneäº†ä¸‰å°ä¸€æ ·çš„æœºå™¨è¿›è¡Œé…ç½®ï¼Œæ¯å°ä¸Šçš„é…ç½®è¿‡ç¨‹è§&lt;a href="https://blog.chih.me/Setting-up-a-Storm-Cluster.html"&gt;å®æ—¶è®¡ç®—æ¡†æ¶Stormæœ¬åœ°æ¨¡å¼æ­å»º&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;ä¸‹é¢é’ˆå¯¹æ¯ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œå…·ä½“çš„é…ç½®&lt;/h3&gt;
&lt;p&gt;&lt;img alt="4-2" src="https://blog.chih.me/images/4-2.png"&gt;&lt;/p&gt;
&lt;h4&gt;æ­å»ºä¸€ä¸ªZookeeperé›†ç¾¤&lt;/h4&gt;
&lt;p&gt;ä¸‰å°æœºå™¨åŒæ—¶ä½œä¸º&lt;code&gt;zookeeper&lt;/code&gt;é›†ç¾¤ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹æœºå™¨å‡ä¿®æ”¹&lt;code&gt;conf/zoo.cfg&lt;/code&gt;ï¼ˆå¯ä»¥ç›´æ¥å°†zoo_sample.cfgé‡å‘½åä¸ºzoo.cfgï¼‰&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# The number of milliseconds of each tick
tickTime=2000
# The number of ticks that the initial
# synchronization phase can take
initLimit=10
# The number of ticks that can pass between
# sending a request and getting an acknowledgement
syncLimit=5
# the directory where the snapshot is stored.
# do not use /tmp for storage, /tmp here is just
# example sakes.
dataDir=/var/zookeeper
# the port at which the clients will connect
clientPort=2181
server.1=192.168.56.102:2888:3888
server.2=192.168.56.103:2888:3888
server.3=192.168.56.104:2888:3888
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æœ€åä¸‰è¡Œæ˜¯ip:port:portçš„å½¢å¼ï¼Œ&lt;code&gt;Zookeeper&lt;/code&gt;éœ€è¦2ä¸ªç«¯å£é€šä¿¡ã€‚æœ‰å¤šå°‘å°æœºå™¨å°±å†™å¤šå°‘ä¸ªserver.X=ip:port:portã€‚Xä»1åˆ°255ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="4-3" src="https://blog.chih.me/images/4-3.png"&gt;&lt;/p&gt;
&lt;h4&gt;æ¥ä¸‹æ¥è®¾ç½®myid&lt;/h4&gt;
&lt;p&gt;åœ¨è®¾ç½®çš„&lt;code&gt;dataDir&lt;/code&gt;ç›®å½•ä¸‹æ–°å»ºmyidæ–‡ä»¶ï¼Œå¦‚ä¸Šé¢è®¾ç½®çš„/var/zookeeperç›®å½•ä¸‹ã€‚
myidæ–‡ä»¶ä¸­åªæœ‰ä¸€è¡Œæ•°å­—ï¼Œå³ä¸zoo.cfgè®¾ç½®çš„ä¸»æœºä¸idå¯¹åº”çš„idï¼Œ
(é»˜è®¤æ¯å°æœºå™¨é€šè¿‡&lt;code&gt;sudo -s&lt;/code&gt; è¿›å…¥rootç¯å¢ƒï¼Œ ç¼ºå¤±çš„ç›®å½•é€šè¿‡&lt;code&gt;mkdir&lt;/code&gt; è¡¥å…¨)&lt;/p&gt;
&lt;p&gt;åœ¨ 192.168.56.102 ä¸Šæ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# echo 1 &amp;amp;gt;/var/zookeeper/myid
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨ 192.168.56.103 ä¸Šæ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# echo 2 &amp;amp;gt; /var/zookeeper/myid
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨ 192.168.56.104 ä¸Šæ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# echo 3 &amp;amp;gt; /var/zookeeper/myid
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æœ€åå¯åŠ¨é›†ç¾¤çš„ZooKeeper&lt;/p&gt;
&lt;p&gt;å¯¹æ¯å°æœºå™¨å‡æ‰§è¡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ bin/zkServer start
$ zkServer.sh status
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æŸ¥çœ‹çŠ¶æ€&lt;/p&gt;
&lt;p&gt;&lt;img alt="4-4" src="https://blog.chih.me/images/4-4.png"&gt;&lt;/p&gt;
&lt;p&gt;ä¿è¯serverèŠ‚ç‚¹çš„zookeeperæœåŠ¡å…¨éƒ¨å¯åŠ¨å¥½&lt;/p&gt;
&lt;p&gt;&lt;img alt="4-5" src="https://blog.chih.me/images/4-5.png"&gt;&lt;/p&gt;
&lt;h4&gt;åœ¨nimbusã€supervisorèŠ‚ç‚¹å®‰è£…ä¾èµ–åŒ…ï¼ˆjdkï¼Œpythonï¼‰&lt;/h4&gt;
&lt;h4&gt;ä¸‹è½½å¹¶è§£å‹Stormåˆ°nimbusã€supervisorèŠ‚ç‚¹&lt;/h4&gt;
&lt;h4&gt;ä¿®æ”¹nimbusã€supervisorèŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶ï¼ˆstorm.yamlï¼‰ï¼Œæ¯å°æœºå™¨ç›¸åŒé…ç½®ã€‚&lt;/h4&gt;
&lt;p&gt;Stormçš„é…ç½®æ–‡ä»¶ä½äºstormä¸»ç›®å½•ä¸‹çš„&lt;code&gt;conf/storm.yaml&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;storm.zookeeper.servers&lt;/code&gt;ï¼šæŒ‡å®šzookeeperé›†ç¾¤ä¸­çš„ä¸»æœºåˆ—è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;nimbus.host&lt;/code&gt;:æŒ‡å®šnimbusèŠ‚ç‚¹å¯¹åº”çš„ä¸»æœºã€‚
é…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;storm.zookeeper.servers:
      - &amp;quot;192.168.56.102&amp;quot;
      - &amp;quot;192.168.56.103&amp;quot;
      - &amp;quot;192.168.56.104&amp;quot;

nimbus.host: &amp;quot;192.168.56.102&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="4-6" src="https://blog.chih.me/images/4-6.png"&gt;
 &lt;code&gt;supervisor.slots.ports&lt;/code&gt;:å¯¹äºæ¯ä¸ªsupervisorèŠ‚ç‚¹ï¼Œéœ€è¦æŒ‡å®šä¸€äº›ç«¯å£ï¼Œæ¥è¿è¡Œç›¸åº”æ•°ç›®çš„JVMè¿›ç¨‹ã€‚ä¸‹é¢çš„é…ç½®å¼€å‘äº†å››ä¸ªç«¯å£ï¼Œå³åœ¨supervisorèŠ‚ç‚¹ä¸Šè¿è¡Œäº†å››ä¸ªJVMè¿›ç¨‹ï¼ˆ4ä¸ªworkerã€æ­¤å¤„æ¶‰åŠåˆ°Stormä¸­çš„å¹¶è¡ŒåŒ–æœºåˆ¶ï¼‰ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;supervisor.slots.ports:

- 6700

- 6701

- 6702

- 6703
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨ï¼šnimbusèŠ‚ç‚¹å’ŒsupervisorèŠ‚ç‚¹ä¸Šçš„storm.yamlå‡éœ€è¦é…ç½®ã€‚&lt;/p&gt;
&lt;h4&gt;ä½¿ç”¨stormè„šæœ¬å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼ˆåŒ…æ‹¬nimbusã€supervisorã€uiï¼‰&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;nimbusï¼šåœ¨nimbusèŠ‚ç‚¹ä¸Šè¿è¡Œ&lt;code&gt;storm nimbus&lt;/code&gt;å‘½ä»¤ 192.168.56.102&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;supervisorï¼šåœ¨supervisorèŠ‚ç‚¹ä¸Šè¿è¡Œ&lt;code&gt;storm supervisor&lt;/code&gt;å‘½ä»¤ 103 104&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;uiï¼šåœ¨nimbusä¸Šé‡æ–°å¼€ä¸ªconsoleï¼Œè¿è¡Œ&lt;code&gt;storm ui&lt;/code&gt;å‘½ä»¤ï¼Œå¹¶è®¿é—®&lt;a href="http://192.168.56.102:8088"&gt;http://192.168.56.102:8088&lt;/a&gt;ï¼Œå‡ºç°å¦‚ä¸‹ç•Œé¢åˆ™è¡¨æ˜é›†ç¾¤æ­å»ºæˆåŠŸï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="4-7" src="https://blog.chih.me/images/4-7.png"&gt;&lt;/p&gt;</content><category term="linux"></category><category term="Storm"></category><category term="å¤§æ•°æ®"></category><category term="å®æ—¶è®¡ç®—"></category></entry><entry><title>å®æ—¶è®¡ç®—æ¡†æ¶Stormæœ¬åœ°æ¨¡å¼æ­å»º</title><link href="https://blog.chih.me/Setting-up-a-Storm-Cluster.html" rel="alternate"></link><published>2015-02-02T00:00:00+08:00</published><updated>2015-02-02T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2015-02-02:/Setting-up-a-Storm-Cluster.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;å¹³å°ï¼šUbuntu14.04&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;å®‰è£…ä¾èµ–&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ubuntuè‡ªå¸¦çš„è½¯ä»¶åŒ…ç®¡ç†å™¨å®‰è£…javaç¯å¢ƒã€‚
å®‰è£…Javaï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install openjdk-7-jdk
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ£€æŸ¥æ˜¯å¦å®‰è£…å®Œæˆ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ java -version
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="1-1" src="https://blog.chih.me/images/1-1.png"&gt;&lt;/p&gt;
&lt;p&gt;æ£€æŸ¥pythonç‰ˆæœ¬:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python -V
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="1-2" src="https://blog.chih.me/images/1-2.png"&gt;&lt;/p&gt;
&lt;h2&gt;å®‰è£…ZooKeeper&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†é¿å…æ¯æ¬¡è·å–è¶…çº§æƒé™é‡å¤è¾“å…¥sudo
ä¸´æ—¶è¿›å…¥è¶…çº§ç”¨æˆ·:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo -s
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½¿ç”¨&lt;code&gt;ctrl+d&lt;/code&gt;é€€å‡º&lt;/p&gt;
&lt;p&gt;å®šä½ç›®å½•:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# cd /usr/local/src
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä»é˜¿é‡Œçš„æºä¸‹è½½:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# wget http://mirrors.aliyun.com/apache/zookeeper/zookeeper-3.4.6/zookeeper-3.4.6.tar.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="1-3" src="https://blog.chih.me/images/1-3.png"&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨å‘½ä»¤è§£å‹:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# tar -xzvf zookeeper-3 â€¦&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;å¹³å°ï¼šUbuntu14.04&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;å®‰è£…ä¾èµ–&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ubuntuè‡ªå¸¦çš„è½¯ä»¶åŒ…ç®¡ç†å™¨å®‰è£…javaç¯å¢ƒã€‚
å®‰è£…Javaï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install openjdk-7-jdk
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ£€æŸ¥æ˜¯å¦å®‰è£…å®Œæˆ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ java -version
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="1-1" src="https://blog.chih.me/images/1-1.png"&gt;&lt;/p&gt;
&lt;p&gt;æ£€æŸ¥pythonç‰ˆæœ¬:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python -V
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="1-2" src="https://blog.chih.me/images/1-2.png"&gt;&lt;/p&gt;
&lt;h2&gt;å®‰è£…ZooKeeper&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†é¿å…æ¯æ¬¡è·å–è¶…çº§æƒé™é‡å¤è¾“å…¥sudo
ä¸´æ—¶è¿›å…¥è¶…çº§ç”¨æˆ·:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo -s
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½¿ç”¨&lt;code&gt;ctrl+d&lt;/code&gt;é€€å‡º&lt;/p&gt;
&lt;p&gt;å®šä½ç›®å½•:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# cd /usr/local/src
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä»é˜¿é‡Œçš„æºä¸‹è½½:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# wget http://mirrors.aliyun.com/apache/zookeeper/zookeeper-3.4.6/zookeeper-3.4.6.tar.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="1-3" src="https://blog.chih.me/images/1-3.png"&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨å‘½ä»¤è§£å‹:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# tar -xzvf zookeeper-3.4.6.tar.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿›å…¥è§£å‹åçš„ç›®å½•ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# cd zookeeper-3.4.6
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="1-4" src="https://blog.chih.me/images/1-4.png"&gt;&lt;/p&gt;
&lt;p&gt;ä»é…ç½®æ–‡ä»¶æ¨¡æ¿å¤åˆ¶ä¸€ä»½é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œæ— éœ€ä¿®æ”¹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# cp conf/zoo_sample.cfg conf/zoo.cfg
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¯å¢ƒå˜é‡ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# export ZOOKEEPER_HOME=/usr/local/src/zookeeper-3.4.6
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¯å¢ƒå˜é‡ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# export PATH=$ZOOKEEPER_HOME/bin:$PATH
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯åŠ¨æœåŠ¡å™¨:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ./bin/zkServer.sh start
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æµ‹è¯•:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ./bin/zkCli.sh -server 127.0.0.1:2181
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;å®‰è£…Storm&lt;/h2&gt;
&lt;p&gt;å®šä½ç›®å½•:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# cd /usr/local/src
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸‹è½½ï¼ˆä»é˜¿é‡Œçš„æºä¸‹è½½0.9.2ç‰ˆæœ¬ï¼‰:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# wget http://mirrors.aliyun.com/apache/storm/apache-storm-0.9.2-incubating/apache-storm-0.9.2-incubating.tar.gz
# tar -xzvf apache-storm-0.9.2-incubating.tar.gz
# cd ./apache-storm-0.9.2-incubating/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="1-5" src="https://blog.chih.me/images/1-5.png"&gt;&lt;/p&gt;
&lt;p&gt;é…ç½®storm.yaml:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# vim ./conf/storm.yaml
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;(è¿™é‡Œæˆ‘ä½¿ç”¨vimï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä½•æ–‡ä»¶ç¼–è¾‘å™¨ï¼Œå¤åˆ¶ä»¥ä¸‹å†…å®¹åˆ°æ–‡ä»¶ï¼ŒåŸå…ˆçš„å†…å®¹å…¨éƒ¨æ³¨é‡Šï¼‰&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;storm.zookeeper.servers:
      - &amp;quot;localhost&amp;quot;
nimbus.host: &amp;quot;localhost&amp;quot;
storm.local.dir : &amp;quot;/var/storm&amp;quot;
ui.port : 8080
storm.messaging.transport: &amp;quot;backtype.storm.messaging.netty.Context&amp;quot; #--æŒ‡å®šä¼ è¾“åè®®
storm.messaging.netty.server_worker_threads: 1   #--æŒ‡å®šnettyæœåŠ¡å™¨å·¥ä½œçº¿ç¨‹æ•°é‡
storm.messaging.netty.client_worker_threads: 1   #--æŒ‡å®šnettyå®¢æˆ·ç«¯å·¥ä½œçº¿ç¨‹æ•°é‡
storm.messaging.netty.buffer_size: 5242880    #--æŒ‡å®šnettyç¼“å­˜å¤§å°
storm.messaging.netty.max_retries: 100   #--æŒ‡å®šæœ€å¤§é‡è¯•æ¬¡æ•°
storm.messaging.netty.max_wait_ms: 1000  #--æŒ‡å®šæœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
storm.messaging.netty.min_wait_ms: 100   #--æŒ‡å®šæœ€å°ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="1-6" src="https://blog.chih.me/images/1-6.png"&gt;&lt;/p&gt;
&lt;p&gt;åå°ï¼ˆé€šè¿‡å‘½ä»¤ååŠ &amp;amp;ä½¿è¿›ç¨‹åå°æ‰§è¡Œï¼Œæ ‡å‡†è¾“å‡ºå…¨éƒ¨è¿›å…¥é»‘æ´/dev/nullï¼‰å¯åŠ¨StormæœåŠ¡ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ./bin/storm nimbus &amp;amp;gt;/dev/null 2&amp;amp;gt;&amp;amp;amp;1 &amp;amp;amp;
# ./bin/storm supervisor&amp;amp;gt;/dev/null 2&amp;amp;gt;&amp;amp;amp;1 &amp;amp;amp;
# ./bin/storm ui &amp;amp;gt;/dev/null 2&amp;amp;gt;&amp;amp;amp;1 &amp;amp;amp;
# ./bin/storm logviewer &amp;amp;gt; /dev/null 2&amp;amp;gt;&amp;amp;amp;1 &amp;amp;amp;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è®¿é—®ip:portå³å¯è¿›å…¥Storm UI&lt;/p&gt;
&lt;p&gt;&lt;img alt="1-7" src="https://blog.chih.me/images/1-7.png"&gt;&lt;/p&gt;
&lt;p&gt;-EOF-&lt;/p&gt;</content><category term="linux"></category><category term="Storm"></category><category term="å¤§æ•°æ®"></category><category term="å®æ—¶è®¡ç®—"></category></entry><entry><title>ubuntuçªç„¶å‡ºç°æ‰“å¼€ç³»ç»Ÿè®¾ç½®æ…¢ sudoæ—¶å‡ºç°æ— æ³•è§£æä¸»æœºçš„è§£å†³åŠæ³•</title><link href="https://blog.chih.me/ubuntutu-ran-chu-xian-da-kai-xi-tong-she-zhi-man-sudoshi-chu-xian-wu-fa-jie-xi-zhu-ji-de-jie-jue-ban-fa.html" rel="alternate"></link><published>2014-04-06T00:00:00+08:00</published><updated>2014-04-06T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2014-04-06:/ubuntutu-ran-chu-xian-da-kai-xi-tong-she-zhi-man-sudoshi-chu-xian-wu-fa-jie-xi-zhu-ji-de-jie-jue-ban-fa.html</id><summary type="html">&lt;p&gt;çªç„¶é—´å‘ç°æˆ‘çš„&lt;code&gt;ubuntu12.04&lt;/code&gt;æ‰“å¼€ç³»ç»Ÿè®¾ç½®å˜å¾—éå¸¸æ…¢ï¼Œæ­£ä¸çŸ¥å¦‚ä½•è§£å†³çš„æ—¶å€™ã€‚å‘ç°sudoæ—¶å‡ºç°â€œæ— æ³•è§£æçš„ä¸»æœº XXXX" çš„æç¤ºã€‚é©¬ä¸Šå°±è”æƒ³åˆ°ä¸ä¹…å‰æ”¹è¿‡hostsï¼ŒåŸæ¥æ˜¯ä¸»æœºåæ— æ³•è§£æäº†ï¼Œè¿™æ ·é—®é¢˜å°±å¥½è§£å†³äº†&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo vim /etc/hosts
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åŠ å…¥ä»¥ä¸‹è¡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;127.0.0.1       ï¼ˆä½ ç°åœ¨çš„ä¸»æœºåï¼‰
127.0.1.1       ï¼ˆä½ ç°åœ¨çš„ä¸»æœºåï¼‰
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¹‹å æ‰“å¼€ç³»ç»Ÿè®¾ç½®å°±éå¸¸å¿«äº†&lt;/p&gt;</summary><content type="html">&lt;p&gt;çªç„¶é—´å‘ç°æˆ‘çš„&lt;code&gt;ubuntu12.04&lt;/code&gt;æ‰“å¼€ç³»ç»Ÿè®¾ç½®å˜å¾—éå¸¸æ…¢ï¼Œæ­£ä¸çŸ¥å¦‚ä½•è§£å†³çš„æ—¶å€™ã€‚å‘ç°sudoæ—¶å‡ºç°â€œæ— æ³•è§£æçš„ä¸»æœº XXXX" çš„æç¤ºã€‚é©¬ä¸Šå°±è”æƒ³åˆ°ä¸ä¹…å‰æ”¹è¿‡hostsï¼ŒåŸæ¥æ˜¯ä¸»æœºåæ— æ³•è§£æäº†ï¼Œè¿™æ ·é—®é¢˜å°±å¥½è§£å†³äº†&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo vim /etc/hosts
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åŠ å…¥ä»¥ä¸‹è¡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;127.0.0.1       ï¼ˆä½ ç°åœ¨çš„ä¸»æœºåï¼‰
127.0.1.1       ï¼ˆä½ ç°åœ¨çš„ä¸»æœºåï¼‰
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¹‹å æ‰“å¼€ç³»ç»Ÿè®¾ç½®å°±éå¸¸å¿«äº†&lt;/p&gt;</content><category term="Hosts"></category><category term="ubuntu"></category><category term="linux"></category></entry><entry><title>virtualboxä¸»æœºè®¿é—®è™šæ‹Ÿæœº</title><link href="https://blog.chih.me/virtualboxzhu-ji-fang-wen-xu-ni-ji.html" rel="alternate"></link><published>2014-03-02T00:00:00+08:00</published><updated>2014-03-02T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2014-03-02:/virtualboxzhu-ji-fang-wen-xu-ni-ji.html</id><summary type="html">&lt;p&gt;åœ¨&lt;code&gt;virtualbox&lt;/code&gt;ä¸­ï¼Œå¦‚æœé€‰æ‹©é»˜è®¤çš„ç½‘å¡è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯ç½‘ç»œåœ°å€è½¬æ¢(NAT)ï¼Œæ˜¯ä¸èƒ½è®©å®¿ä¸»æœºè®¿é—®åˆ°è™šæ‹Ÿæœºçš„ï¼Œå¦‚æœæƒ³è®©ä¸¤è€…ç›¸äº’è¿é€šï¼Œå¯ä»¥åœ¨ä¿ç•™é»˜è®¤çš„&lt;code&gt;NAT&lt;/code&gt;ç½‘å¡çš„åŸºç¡€ä¸Šå¢åŠ ä¸€å¼ &lt;code&gt;Host-Only&lt;/code&gt;çš„ç½‘å¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="NAT" src="https://blog.chih.me/images/58081e7f-677a-47f9-8fc5-a7ec0435e7b1.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Host-Only" src="https://blog.chih.me/images/7695d614d15ad02edfd564e4b32810fc.png"&gt;&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ çš„å®¿ä¸»æœºæ˜¯Linuxçš„è¯ï¼Œå®‰è£…virtualboxåæ˜¯æ²¡æœ‰ä¸€å¼ Host-Onlyçš„ç½‘å¡çš„ï¼Œä½ éœ€è¦åœ¨virtualboxçš„è®¾ç½®é‡Œæ·»åŠ è¿™å¼ ç½‘å¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="add-Host-Only" src="https://blog.chih.me/images/snapshot2.png"&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;åœ¨&lt;code&gt;virtualbox&lt;/code&gt;ä¸­ï¼Œå¦‚æœé€‰æ‹©é»˜è®¤çš„ç½‘å¡è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯ç½‘ç»œåœ°å€è½¬æ¢(NAT)ï¼Œæ˜¯ä¸èƒ½è®©å®¿ä¸»æœºè®¿é—®åˆ°è™šæ‹Ÿæœºçš„ï¼Œå¦‚æœæƒ³è®©ä¸¤è€…ç›¸äº’è¿é€šï¼Œå¯ä»¥åœ¨ä¿ç•™é»˜è®¤çš„&lt;code&gt;NAT&lt;/code&gt;ç½‘å¡çš„åŸºç¡€ä¸Šå¢åŠ ä¸€å¼ &lt;code&gt;Host-Only&lt;/code&gt;çš„ç½‘å¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="NAT" src="https://blog.chih.me/images/58081e7f-677a-47f9-8fc5-a7ec0435e7b1.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Host-Only" src="https://blog.chih.me/images/7695d614d15ad02edfd564e4b32810fc.png"&gt;&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ çš„å®¿ä¸»æœºæ˜¯Linuxçš„è¯ï¼Œå®‰è£…virtualboxåæ˜¯æ²¡æœ‰ä¸€å¼ Host-Onlyçš„ç½‘å¡çš„ï¼Œä½ éœ€è¦åœ¨virtualboxçš„è®¾ç½®é‡Œæ·»åŠ è¿™å¼ ç½‘å¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="add-Host-Only" src="https://blog.chih.me/images/snapshot2.png"&gt;&lt;/p&gt;</content><category term="Hosts"></category><category term="virtualbox"></category><category term="linux"></category><category term="ç½‘ç»œ"></category></entry><entry><title>VMwareä¸­ä½¿easy installå¤±æ•ˆ</title><link href="https://blog.chih.me/disable-easy-install-in-vmware.html" rel="alternate"></link><published>2012-09-05T00:00:00+08:00</published><updated>2012-09-05T00:00:00+08:00</updated><author><name>chih</name></author><id>tag:blog.chih.me,2012-09-05:/disable-easy-install-in-vmware.html</id><summary type="html">&lt;p&gt;ç”¨Typcialæˆ–customæ–¹å¼å®‰è£…è™šæ‹Ÿæœºæ—¶ï¼Œä¼šå‡ºç°Easy Installï¼Œä½¿å¾—å®‰è£…è¿‡ç¨‹è‡ªåŠ¨è¿›è¡Œï¼Œä½†è¿™ç§è‡ªåŠ¨çš„å®‰è£…ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚è£…Linuxæ—¶çš„åˆ†åŒºï¼Œubuntuçš„ä¸­æ–‡æ”¯æŒä¹Ÿä¼šæœ‰é—®é¢˜ã€‚
æ›´å¤šçš„ï¼Œå¯¹äºåƒæˆ‘è¿™ç§å­¦ç”Ÿæ¥è¯´ï¼Œè™šæ‹Ÿæœºæœ‰å¾ˆå¤§çš„ä½œç”¨æ˜¯ç”¨æ¥å­¦ä¹ ç³»ç»Ÿçš„å®‰è£…çš„ï¼Œè¿™æ—¶Easy Installå°±æ˜¾å¾—å¤šä½™äº†ï¼Œé‚£æˆ‘ä»¬è¦æ€ä¹ˆå–æ¶ˆEasy Installå‘¢ï¼Ÿä¸‹é¢æ˜¯ä¸€ç§ä¸é”™çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç”¨Typcialæˆ–customæ–¹å¼è¿›å…¥è™šæ‹Ÿæœºçš„å®‰è£…ã€‚&lt;/li&gt;
&lt;li&gt;å‡ºç°Easy Install Informationæ—¶ï¼Œå¯ä»¥éšä¾¿å¡«å†™ï¼Œè¿™ä¸ªåœ¨åæ¥çš„å®é™…å®‰è£…è¿‡ç¨‹ä¸­æ˜¯ç”¨ä¸ç€çš„ã€‚&lt;/li&gt;
&lt;li&gt;æŒ‰ä½ çš„éœ€è¦é…ç½®è™šæ‹Ÿæœº&lt;/li&gt;
&lt;li&gt;åœ¨Ready to Create Virtual Machineé¡µä¸­ï¼Œéœ€è¦æŠŠPower on this virtual machine after creationå‰çš„å‹¾å»æ‰ï¼ŒFinish&lt;/li&gt;
&lt;li&gt;æ¥ä¸‹æ¥é…ç½®ä½ åˆšåˆšåˆ›å»ºçš„è™šæ‹Ÿæœºã€‚&lt;/li&gt;
&lt;li&gt;æŠŠä½¿ç”¨autoinst.isoçš„CD/DVDè¿™ä¸ªç¡¬ä»¶ç›´æ¥removeæˆ–é€‰ä¸ºAuto detectï¼ŒåŒæ ·æ›´æ”¹Floppyè¿™ä¸ªç¡¬ä»¶ï¼ŒOK&lt;/li&gt;
&lt;li&gt;ç°åœ¨å¯åŠ¨è™šæ‹Ÿæœºå®‰è£…ç³»ç»Ÿæ—¶å°±ä¸ä¼šè¿›å…¥Easy Installäº†ã€‚&lt;/li&gt;
&lt;/ol&gt;</summary><content type="html">&lt;p&gt;ç”¨Typcialæˆ–customæ–¹å¼å®‰è£…è™šæ‹Ÿæœºæ—¶ï¼Œä¼šå‡ºç°Easy Installï¼Œä½¿å¾—å®‰è£…è¿‡ç¨‹è‡ªåŠ¨è¿›è¡Œï¼Œä½†è¿™ç§è‡ªåŠ¨çš„å®‰è£…ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚è£…Linuxæ—¶çš„åˆ†åŒºï¼Œubuntuçš„ä¸­æ–‡æ”¯æŒä¹Ÿä¼šæœ‰é—®é¢˜ã€‚
æ›´å¤šçš„ï¼Œå¯¹äºåƒæˆ‘è¿™ç§å­¦ç”Ÿæ¥è¯´ï¼Œè™šæ‹Ÿæœºæœ‰å¾ˆå¤§çš„ä½œç”¨æ˜¯ç”¨æ¥å­¦ä¹ ç³»ç»Ÿçš„å®‰è£…çš„ï¼Œè¿™æ—¶Easy Installå°±æ˜¾å¾—å¤šä½™äº†ï¼Œé‚£æˆ‘ä»¬è¦æ€ä¹ˆå–æ¶ˆEasy Installå‘¢ï¼Ÿä¸‹é¢æ˜¯ä¸€ç§ä¸é”™çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç”¨Typcialæˆ–customæ–¹å¼è¿›å…¥è™šæ‹Ÿæœºçš„å®‰è£…ã€‚&lt;/li&gt;
&lt;li&gt;å‡ºç°Easy Install Informationæ—¶ï¼Œå¯ä»¥éšä¾¿å¡«å†™ï¼Œè¿™ä¸ªåœ¨åæ¥çš„å®é™…å®‰è£…è¿‡ç¨‹ä¸­æ˜¯ç”¨ä¸ç€çš„ã€‚&lt;/li&gt;
&lt;li&gt;æŒ‰ä½ çš„éœ€è¦é…ç½®è™šæ‹Ÿæœº&lt;/li&gt;
&lt;li&gt;åœ¨Ready to Create Virtual Machineé¡µä¸­ï¼Œéœ€è¦æŠŠPower on this virtual machine after creationå‰çš„å‹¾å»æ‰ï¼ŒFinish&lt;/li&gt;
&lt;li&gt;æ¥ä¸‹æ¥é…ç½®ä½ åˆšåˆšåˆ›å»ºçš„è™šæ‹Ÿæœºã€‚&lt;/li&gt;
&lt;li&gt;æŠŠä½¿ç”¨autoinst.isoçš„CD/DVDè¿™ä¸ªç¡¬ä»¶ç›´æ¥removeæˆ–é€‰ä¸ºAuto detectï¼ŒåŒæ ·æ›´æ”¹Floppyè¿™ä¸ªç¡¬ä»¶ï¼ŒOK&lt;/li&gt;
&lt;li&gt;ç°åœ¨å¯åŠ¨è™šæ‹Ÿæœºå®‰è£…ç³»ç»Ÿæ—¶å°±ä¸ä¼šè¿›å…¥Easy Installäº†ã€‚&lt;/li&gt;
&lt;/ol&gt;</content><category term="VMware"></category><category term="linux"></category><category term="è™šæ‹Ÿæœº"></category></entry></feed>